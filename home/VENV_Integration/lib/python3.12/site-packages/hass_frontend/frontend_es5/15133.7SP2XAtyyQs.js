"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[15133,70511],{21863:function(n,e,t){function r(n){return void 0===n||Array.isArray(n)?n:[n]}t.d(e,{e:function(){return r}})},99890:function(n,e,t){t.d(e,{g:function(){return r}});t(82386),t(36604);var r=function(n){return function(e,t){return n.includes(e,t)}}},81771:function(n,e,t){t.d(e,{$W:function(){return v},Dp:function(){return k},EC:function(){return s},HB:function(){return m},S9:function(){return w},XF:function(){return l},aI:function(){return q},b1:function(){return _},bV:function(){return f},lB:function(){return d},lg:function(){return g},mX:function(){return b},oj:function(){return p},rY:function(){return j},vH:function(){return Y},vO:function(){return h}});var r,i=t(41981),o=(t(97741),t(89655),t(26098),t(39790),t(253),t(54846),t(16891),t(66555),t(16312)),a=t(21863),c=t(55979),u=t(56932),s="single",f=10,l=function(n){if("condition"in n&&Array.isArray(n.condition))return{condition:"and",conditions:n.condition};for(var e=0,t=["and","or","not"];e<t.length;e++){var r=t[e];if(r in n)return{condition:r,conditions:n[r]}}return n},d=function(n,e){n.callService("automation","trigger",{entity_id:e,skip_condition:!0})},g=function(n,e){return n.callApi("DELETE","config/automation/config/".concat(e))},p=function(n,e){return n.callApi("GET","config/automation/config/".concat(e))},v=function(n,e){return n.callWS({type:"automation/config",entity_id:e})},_=function(n,e,t){return n.callApi("POST","config/automation/config/".concat(e),t)},m=function(n){n=y(n);for(var e=0,t=["triggers","conditions","actions"];e<t.length;e++){var r=t[e],i=n[r];i&&!Array.isArray(i)&&(n[r]=[i])}return n},y=function(n){return"trigger"in n&&("triggers"in n||(n.triggers=n.trigger),delete n.trigger),"condition"in n&&("conditions"in n||(n.conditions=n.condition),delete n.condition),"action"in n&&("actions"in n||(n.actions=n.action),delete n.action),n.triggers&&(n.triggers=h(n.triggers)),n.actions&&(n.actions=(0,c.Rn)(n.actions)),n},h=function(n){return Array.isArray(n)?n.map(h):("triggers"in n&&n.triggers&&(n.triggers=h(n.triggers)),"platform"in n&&("trigger"in n||(n.trigger=n.platform),delete n.platform),n)},q=function(n){if(!n)return[];var e=[];return(0,a.e)(n).forEach((function(n){"triggers"in n?n.triggers&&e.push.apply(e,(0,i.A)(q(n.triggers))):e.push(n)})),e},b=function(n,e){r=n;var t=e?"?".concat((0,u.KH)({expanded:"1"})):"";(0,o.o)("/config/automation/edit/new".concat(t))},Y=function(n){b(Object.assign(Object.assign({},n),{},{id:void 0,alias:void 0}))},j=function(){var n=r;return r=void 0,n},k=function(n,e,t,r){return n.connection.subscribeMessage(e,{type:"subscribe_trigger",trigger:t,variables:r})},w=function(n,e,t){return n.callWS({type:"test_condition",condition:e,variables:t})}},55979:function(n,e,t){t.d(e,{AM:function(){return j},BD:function(){return v},FN:function(){return l},Ht:function(){return q},Iq:function(){return d},Kq:function(){return b},NX:function(){return k},Q2:function(){return h},R$:function(){return Y},Rn:function(){return E},TP:function(){return A},kR:function(){return y},pq:function(){return w}});var r,i=t(64782),o=(t(97741),t(10507),t(39790),t(64498),t(16891),t(66419)),a=t(99890),c=t(16312),u=t(81771),s=t(59780),f=t(56932),l=["single","restart","queued","parallel"],d=(0,a.g)(["queued","parallel"]),g=(0,o.Ik)({alias:(0,o.lq)((0,o.Yj)()),continue_on_error:(0,o.lq)((0,o.zM)()),enabled:(0,o.lq)((0,o.zM)())}),p=(0,o.Ik)({entity_id:(0,o.lq)((0,o.KC)([(0,o.Yj)(),(0,o.YO)((0,o.Yj)())])),device_id:(0,o.lq)((0,o.KC)([(0,o.Yj)(),(0,o.YO)((0,o.Yj)())])),area_id:(0,o.lq)((0,o.KC)([(0,o.Yj)(),(0,o.YO)((0,o.Yj)())])),floor_id:(0,o.lq)((0,o.KC)([(0,o.Yj)(),(0,o.YO)((0,o.Yj)())])),label_id:(0,o.lq)((0,o.KC)([(0,o.Yj)(),(0,o.YO)((0,o.Yj)())]))}),v=(0,o.kp)(g,(0,o.Ik)({action:(0,o.lq)((0,o.Yj)()),service_template:(0,o.lq)((0,o.Yj)()),entity_id:(0,o.lq)((0,o.Yj)()),target:(0,o.lq)(p),data:(0,o.lq)((0,o.Ik)()),response_variable:(0,o.lq)((0,o.Yj)()),metadata:(0,o.lq)((0,o.Ik)())})),_=(0,o.kp)(g,(0,o.Ik)({action:(0,o.eu)("media_player.play_media"),target:(0,o.lq)((0,o.Ik)({entity_id:(0,o.lq)((0,o.Yj)())})),entity_id:(0,o.lq)((0,o.Yj)()),data:(0,o.Ik)({media_content_id:(0,o.Yj)(),media_content_type:(0,o.Yj)()}),metadata:(0,o.Ik)()})),m=(0,o.kp)(g,(0,o.Ik)({action:(0,o.eu)("scene.turn_on"),target:(0,o.lq)((0,o.Ik)({entity_id:(0,o.lq)((0,o.Yj)())})),entity_id:(0,o.lq)((0,o.Yj)()),metadata:(0,o.Ik)()})),y=function(n,e,t){return n.callService("script",e,t)},h=function(n){return"off"===n.state||!!("on"===n.state&&d(n.attributes.mode)&&n.attributes.current<n.attributes.max)},q=function(n,e){return n.callApi("DELETE","config/script/config/".concat(e))},b=function(n,e){return n.callApi("GET","config/script/config/".concat(e))},Y=function(n,e){return n.callWS({type:"script/config",entity_id:e})},j=function(n,e){r=n;var t=e?"?".concat((0,f.KH)({expanded:"1"})):"";(0,c.o)("/config/script/edit/new".concat(t))},k=function(){var n=r;return r=void 0,n},w=function(n){if("delay"in n)return"delay";if("wait_template"in n)return"wait_template";if(["condition","and","or","not"].some((function(e){return e in n})))return"check_condition";if("event"in n)return"fire_event";if("device_id"in n)return"device_action";if("scene"in n)return"activate_scene";if("repeat"in n)return"repeat";if("choose"in n)return"choose";if("if"in n)return"if";if("wait_for_trigger"in n)return"wait_for_trigger";if("variables"in n)return"variables";if("stop"in n)return"stop";if("sequence"in n)return"sequence";if("parallel"in n)return"parallel";if("set_conversation_response"in n)return"set_conversation_response";if("action"in n||"service"in n){if("metadata"in n){if((0,o.is)(n,m))return"activate_scene";if((0,o.is)(n,_))return"play_media"}return"service"}return"unknown"},A=function(n,e){var t,r=null===(t=n.services.script[(0,s.Y)(e)])||void 0===t?void 0:t.fields;return void 0!==r&&Object.keys(r).length>0},E=function(n){if(Array.isArray(n))return n.map(E);if("service"in n&&("action"in n||(n.action=n.service),delete n.service),"sequence"in n){var e,t=(0,i.A)(n.sequence);try{for(t.s();!(e=t.n()).done;){var r=e.value;E(r)}}catch(g){t.e(g)}finally{t.f()}}var o=w(n);"parallel"===o&&E(n.parallel);if("choose"===o){var a=n;if(Array.isArray(a.choose)){var c,s=(0,i.A)(a.choose);try{for(s.s();!(c=s.n()).done;){var f=c.value;E(f.sequence)}}catch(g){s.e(g)}finally{s.f()}}else a.choose&&E(a.choose.sequence);a.default&&E(a.default)}"repeat"===o&&E(n.repeat.sequence);if("if"===o){var l=n;E(l.then),l.else&&E(l.else)}if("wait_for_trigger"===o){var d=n;(0,u.vO)(d.wait_for_trigger)}return n}},77907:function(n,e,t){t.r(e),t.d(e,{addExternalBarCodeListener:function(){return u},attachExternalToApp:function(){return c}});t(95737),t(39790),t(74268),t(24545),t(51855),t(82130),t(31743),t(22328),t(4959),t(62435),t(99019),t(253),t(54846),t(66555),t(96858);var r=t(34897),i=t(74005),o=t(81771),a=new Set,c=function(n){window.addEventListener("haptic",(function(e){return n.hass.auth.external.fireMessage({type:"haptic",payload:{hapticType:e.detail}})})),n.hass.auth.external.addCommandHandler((function(e){return s(n,e)}))},u=function(n){return a.add(n),function(){a.delete(n)}},s=function(n,e){var t=n.hass.auth.external;if("restart"===e.command)n.hass.connection.reconnect(!0),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else if("notifications/show"===e.command)(0,r.r)(n,"hass-show-notifications"),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else if("sidebar/toggle"===e.command){var c;if(null!==(c=i.G.history.state)&&void 0!==c&&c.open)return t.fireMessage({id:e.id,type:"result",success:!1,error:{code:"not_allowed",message:"dialog open"}}),!0;(0,r.r)(n,"hass-toggle-menu"),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}else if("sidebar/show"===e.command){var u;if(null!==(u=i.G.history.state)&&void 0!==u&&u.open)return t.fireMessage({id:e.id,type:"result",success:!1,error:{code:"not_allowed",message:"dialog open"}}),!0;(0,r.r)(n,"hass-toggle-menu",{open:!0}),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}else if("automation/editor/show"===e.command){var s;(0,o.mX)(null===(s=e.payload)||void 0===s?void 0:s.config),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}else if("bar_code/scan_result"===e.command)a.forEach((function(n){return n(e)})),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else{if("bar_code/aborted"!==e.command)return!1;a.forEach((function(n){return n(e)})),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}return!0}},78232:function(n,e,t){var r=t(26887),i=Math.floor;n.exports=Number.isInteger||function(n){return!r(n)&&isFinite(n)&&i(n)===n}},90924:function(n,e,t){var r=t(33616),i=t(53138),o=t(22669),a=RangeError;n.exports=function(n){var e=i(o(this)),t="",c=r(n);if(c<0||c===1/0)throw new a("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(e+=e))1&c&&(t+=e);return t}},63030:function(n,e,t){t(41765)({target:"Number",stat:!0},{isInteger:t(78232)})}}]);
//# sourceMappingURL=15133.7SP2XAtyyQs.js.map