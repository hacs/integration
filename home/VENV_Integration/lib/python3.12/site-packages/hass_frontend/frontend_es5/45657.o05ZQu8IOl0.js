"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[45657],{7127:function(e,t,n){n.d(t,{p:function(){return r}});n(81027),n(39805),n(18193),n(92765);var i=[" ",": "],r=function(e,t){for(var n=e.toLowerCase(),r=0,o=i;r<o.length;r++){var s=o[r],u="".concat(t).concat(s);if(n.startsWith(u)){var l=e.substring(u.length);if(l.length)return a(l.substr(0,l.indexOf(" ")))?l:l[0].toUpperCase()+l.slice(1)}}},a=function(e){return e.toLowerCase()!==e}},45657:function(e,t,n){n.d(t,{KT:function(){return b},Bi:function(){return _},ZI:function(){return m},Yp:function(){return w}});var i=n(64782),r=n(658),a=n(41981),o=(n(81027),n(13025),n(44124),n(82386),n(95737),n(97741),n(89655),n(33231),n(54774),n(50693),n(26098),n(99471),n(10507),n(39790),n(9241),n(74268),n(24545),n(51855),n(82130),n(31743),n(22328),n(4959),n(62435),n(36604),n(99019),n(79641),n(253),n(2075),n(94438),n(54846),n(16891),n(66555),n(96858),n(94872)),s=n(213),u=n(65459),l=n(19244),c=n(7127),d=n(2682),p=n(96915),f=n(46092),y=n(71443),v=n(57273),h=new Set(["automation","configurator","device_tracker","event","geo_location","notify","persistent_notification","script","sun","tag","todo","zone"].concat((0,a.A)(o.gt))),g=new Set(["mobile_app"]),m=function(e,t){return Object.assign({type:"grid",cards:e.map((function(e){return{type:"tile",entity:e,show_entity_picture:["camera","image","person"].includes((0,s.m)(e))||void 0}}))},t)},_=function(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=[],p=[],f=n.title?n.title.toLowerCase():void 0,y=[],v=(0,i.A)(t);try{for(v.s();!(r=v.n()).done;){var h=r.value,g=e[h],m=(0,s.m)(h);if("alarm_control_panel"===m){var b={type:"alarm-panel",entity:h};u.push(b)}else if("camera"===m){var w={type:"picture-entity",entity:h};u.push(w)}else if("image"===m){var E={type:"picture",image_entity:h};u.push(E)}else if("climate"===m){var A,j,k,C={type:"thermostat",entity:h,features:(null!==(A=null===(j=e[h])||void 0===j||null===(j=j.attributes)||void 0===j||null===(j=j.hvac_modes)||void 0===j?void 0:j.length)&&void 0!==A?A:0)>1?[{type:"climate-hvac-modes",hvac_modes:null===(k=e[h])||void 0===k||null===(k=k.attributes)||void 0===k?void 0:k.hvac_modes}]:void 0};u.push(C)}else if("humidifier"===m){var O={type:"humidifier",entity:h,features:[{type:"humidifier-toggle"}]};u.push(O)}else if("media_player"===m){var x={type:"media-control",entity:h};u.push(x)}else if("plant"===m){var W={type:"plant-status",entity:h};u.push(W)}else if("weather"===m){var L={type:"weather-forecast",entity:h,show_forecast:!1};u.push(L)}else if(!a||"scene"!==m&&"script"!==m){var S=void 0,I=f&&g&&(S=(0,c.p)((0,l.u)(g),f))?{entity:h,name:S}:h;p.push(I)}else{var P={entity:h,show_icon:!0,show_name:!0},U=void 0;f&&g&&(U=(0,c.p)((0,l.u)(g),f))&&(P.name=U),y.push(P)}}}catch(q){v.e(q)}finally{v.f()}if(p.sort((function(t,n){var i="string"==typeof t?t:t.entity,r="string"==typeof n?n:n.entity,a=o.JF.includes((0,s.m)(i))?"sensor":"control";return a!==(o.JF.includes((0,s.m)(r))?"sensor":"control")?"sensor"===a?1:-1:(0,d.x)("string"==typeof t?e[t]?(0,l.u)(e[t]):"":t.name||"","string"==typeof n?e[n]?(0,l.u)(e[n]):"":n.name||"")})),0===p.length&&y.length>0)return _(e,t,n,!1);if(p.length>0||y.length>0){var V=Object.assign({type:"entities",entities:p},n);y.length>0&&(V.footer={type:"buttons",entities:y}),u.unshift(V)}return u.length<2?u:[{type:"grid",square:!1,columns:1,cards:u}]},b=function(e,t){var n,r=[],a=(0,i.A)(t);try{for(a.s();!(n=a.n()).done;){var o={type:"entity",entity:n.value};r.push(o)}}catch(s){a.e(s)}finally{a.f()}return r},w=function(e,t,n,o,c,m,b,w,E){for(var A,j,k=function(e,t){for(var n={},i=new Set(Object.values(t).filter((function(e){return e.entity_category||e.platform&&g.has(e.platform)||e.hidden})).map((function(e){return e.entity_id}))),r=0,a=Object.keys(e);r<a.length;r++){var o=a[r],s=e[o];h.has((0,u.t)(s))||i.has(s.entity_id)||(n[o]=e[o])}return n}(o,n),C={},O=0,x=Object.keys(k);O<x.length;O++){var W=x[O],L=k[W];L.attributes.order&&(C[W]=L.attributes.order)}var S=function(e,t,n,i){for(var a=Object.assign({},i),o={},s={},u=0,l=Object.values(n);u<l.length;u++){var c,d=l[u],p=d.area_id||d.device_id&&(null===(c=t[d.device_id])||void 0===c?void 0:c.area_id);p&&p in e&&d.entity_id in a?(p in o||(o[p]=[]),o[p].push(a[d.entity_id]),delete a[d.entity_id]):d.device_id&&d.device_id in t&&d.entity_id in a&&(d.device_id in s||(s[d.device_id]=[]),s[d.device_id].push(a[d.entity_id]),delete a[d.entity_id])}for(var f=0,y=Object.entries(s);f<y.length;f++){var v=(0,r.A)(y[f],2),h=v[0],g=v[1];1===g.length&&(a[g[0].entity_id]=g[0],delete s[h])}return{areasWithEntities:o,devicesWithEntities:s,otherEntities:a}}(e,t,n,k);if(null!=b&&b.hidden){var I,P=(0,i.A)(b.hidden);try{for(P.s();!(I=P.n()).done;){var U=I.value;delete S.areasWithEntities[U]}}catch(re){P.e(re)}finally{P.f()}}w&&(S.devicesWithEntities={},S.otherEntities={});var V=function(e){var t=[],n={};return Object.keys(e).forEach((function(i){var r=e[i];"group"===(0,s.m)(i)?t.push(r):n[i]=r})),t.forEach((function(e){return e.attributes.entity_id.forEach((function(e){delete n[e]}))})),{groups:t,ungrouped:n}}(S.otherEntities);V.groups.sort((function(e,t){return C[e.entity_id]-C[t.entity_id]}));var q,z=[],B=(0,i.A)(V.groups);try{for(B.s();!(q=B.n()).done;){var F=q.value;z.push.apply(z,(0,a.A)(_(o,F.attributes.entity_id,{title:(0,l.u)(F),show_header_toggle:"hidden"!==F.attributes.control})))}}catch(re){B.e(re)}finally{B.f()}var J,R=function(e,t,n,r,o){for(var s={},c=0,p=Object.keys(o);c<p.length;c++){var h=p[c],g=o[h],m=(0,u.t)(g);m in s||(s[m]=[]),s[m].push(g.entity_id)}var b=[];if("person"in s){var w=[];if(1===s.person.length)b.push({type:"entities",entities:s.person});else{var E,A,j="",k=(0,i.A)(s.person);try{for(k.s();!(A=k.n()).done;){var C=A.value,O=o[C],x=O.attributes.entity_picture;if(!x){if(void 0===E){var W=getComputedStyle(document.body);E=encodeURIComponent(W.getPropertyValue("--light-primary-color").trim()),j=encodeURIComponent((W.getPropertyValue("--text-light-primary-color")||W.getPropertyValue("--primary-text-color")).trim())}var L=(0,y._2)(O.attributes.friendly_name||"");x="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' width='50' height='50' style='background-color:".concat(E,"'%3E%3Cg%3E%3Ctext font-family='roboto' x='50%25' y='50%25' text-anchor='middle' stroke='").concat(j,"' font-size='1.3em' dy='.3em'%3E").concat(L,"%3C/text%3E%3C/g%3E%3C/svg%3E")}w.push({type:"picture-entity",entity:C,aspect_ratio:"1",show_name:!1,image:x})}}catch(re){k.e(re)}finally{k.f()}b.push({type:"grid",square:!0,columns:3,cards:w})}delete s.person}var S,I=[],P=(0,i.A)(v.L);try{for(P.s();!(S=P.n()).done;){var U=S.value;U in s&&(I.push.apply(I,(0,a.A)(s[U])),delete s[U])}}catch(re){P.e(re)}finally{P.f()}for(var V={},q=0,z=Object.keys(s);q<z.length;q++){var B=z[q];V[B]=(0,f.p$)(e,B)}I.length&&(s._helpers=I,V._helpers=e("ui.panel.lovelace.strategy.original-states.helpers")),Object.keys(s).sort((function(e,t){return(0,d.x)(V[e],V[t])})).forEach((function(e){b.push.apply(b,(0,a.A)(_(o,s[e].sort((function(e,t){return(0,d.x)((0,l.u)(o[e]),(0,l.u)(o[t]))})),{title:V[e]})))}));var F={path:t,title:n,cards:b};return r&&(F.icon=r),F}(c,"default_view","Home",undefined,V.ungrouped),H=[],K=Object.keys(S.areasWithEntities).sort((0,p.dj)(e,null==b?void 0:b.order)),T=(0,i.A)(K);try{for(T.s();!(J=T.n()).done;){var Y=J.value,Z=S.areasWithEntities[Y],$=e[Y];H.push.apply(H,(0,a.A)(_(o,Z.map((function(e){return e.entity_id})),{title:$.name})))}}catch(re){T.e(re)}finally{T.f()}var D,G,M=[],N=Object.entries(S.devicesWithEntities).sort((function(e,n){var i=t[e[0]],r=t[n[0]];return(0,d.x)(i.name_by_user||i.name||"",r.name_by_user||r.name||"")})),Q=(0,i.A)(N);try{for(Q.s();!(D=Q.n()).done;){var X=(0,r.A)(D.value,2),ee=X[0],te=X[1],ne=t[ee];M.push.apply(M,(0,a.A)(_(o,te.map((function(e){return e.entity_id})),{title:ne.name_by_user||ne.name||c("ui.panel.config.devices.unnamed_device",{type:c("ui.panel.config.devices.type.".concat(ne.entry_type||"device"))})})))}}catch(re){Q.e(re)}finally{Q.f()}if(m&&!E){var ie=m.energy_sources.find((function(e){return"grid"===e.type}));ie&&ie.flow_from.length>0&&(G={title:c("ui.panel.lovelace.cards.energy.energy_distribution.title_today"),type:"energy-distribution",link_dashboard:!0})}return(A=R.cards).unshift.apply(A,H.concat(z,(0,a.A)(G?[G]:[]))),(j=R.cards).push.apply(j,M),R}}}]);
//# sourceMappingURL=45657.o05ZQu8IOl0.js.map