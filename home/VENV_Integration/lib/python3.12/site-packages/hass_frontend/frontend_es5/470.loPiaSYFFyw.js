/*! For license information please see 470.loPiaSYFFyw.js.LICENSE.txt */
"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[470,45346],{54838:function(e,t,n){n.r(t),n.d(t,{Button:function(){return u}});var i=n(35806),r=n(71008),a=n(62193),o=n(2816),s=n(79192),c=n(29818),l=n(3238),d=n(49141),u=function(e){function t(){return(0,r.A)(this,t),(0,a.A)(this,t,arguments)}return(0,o.A)(t,e),(0,i.A)(t)}(l.u);u.styles=[d.R],u=(0,s.__decorate)([(0,c.EM)("mwc-button")],u)},11514:function(e,t,n){n.d(t,{$:function(){return A}});var i,r,a,o=n(71008),s=n(35806),c=n(62193),l=n(35890),d=n(2816),u=(n(26098),n(79192)),h=n(69142),f=n(29818),p=n(64599),v=n(19637),g=n(15208),m=n(97164),k=n(15112),y=n(85323),_=g.QQ?{passive:!0}:void 0,b=function(e){function t(){var e;return(0,o.A)(this,t),(e=(0,c.A)(this,t,arguments)).centerTitle=!1,e.handleTargetScroll=function(){e.mdcFoundation.handleTargetScroll()},e.handleNavigationClick=function(){e.mdcFoundation.handleNavigationClick()},e}return(0,d.A)(t,e),(0,s.A)(t,[{key:"scrollTarget",get:function(){return this._scrollTarget||window},set:function(e){this.unregisterScrollListener();var t=this.scrollTarget;this._scrollTarget=e,this.updateRootPosition(),this.requestUpdate("scrollTarget",t),this.registerScrollListener()}},{key:"updateRootPosition",value:function(){if(this.mdcRoot){var e=this.scrollTarget===window;this.mdcRoot.style.position=e?"":"absolute"}}},{key:"render",value:function(){var e=(0,k.qy)(i||(i=(0,p.A)(['<span class="mdc-top-app-bar__title"><slot name="title"></slot></span>'])));return this.centerTitle&&(e=(0,k.qy)(r||(r=(0,p.A)(['<section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-center">',"</section>"])),e)),(0,k.qy)(a||(a=(0,p.A)([' <header class="mdc-top-app-bar ','"> <div class="mdc-top-app-bar__row"> <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start" id="navigation"> <slot name="navigationIcon" @click="','"></slot> '," </section> ",' <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" id="actions" role="toolbar"> <slot name="actionItems"></slot> </section> </div> </header> <div class="','"> <slot></slot> </div> '])),(0,y.H)(this.barClasses()),this.handleNavigationClick,this.centerTitle?null:e,this.centerTitle?e:null,(0,y.H)(this.contentClasses()))}},{key:"createAdapter",value:function(){var e=this;return Object.assign(Object.assign({},(0,v.i)(this.mdcRoot)),{setStyle:function(t,n){return e.mdcRoot.style.setProperty(t,n)},getTopAppBarHeight:function(){return e.mdcRoot.clientHeight},notifyNavigationIconClicked:function(){e.dispatchEvent(new Event(m.P$.NAVIGATION_EVENT,{bubbles:!0,cancelable:!0}))},getViewportScrollY:function(){return e.scrollTarget instanceof Window?e.scrollTarget.pageYOffset:e.scrollTarget.scrollTop},getTotalActionItems:function(){return e._actionItemsSlot.assignedNodes({flatten:!0}).length}})}},{key:"registerListeners",value:function(){this.registerScrollListener()}},{key:"unregisterListeners",value:function(){this.unregisterScrollListener()}},{key:"registerScrollListener",value:function(){this.scrollTarget.addEventListener("scroll",this.handleTargetScroll,_)}},{key:"unregisterScrollListener",value:function(){this.scrollTarget.removeEventListener("scroll",this.handleTargetScroll)}},{key:"firstUpdated",value:function(){(0,l.A)(t,"firstUpdated",this,3)([]),this.updateRootPosition(),this.registerListeners()}},{key:"disconnectedCallback",value:function(){(0,l.A)(t,"disconnectedCallback",this,3)([]),this.unregisterListeners()}}])}(v.O);(0,u.__decorate)([(0,f.P)(".mdc-top-app-bar")],b.prototype,"mdcRoot",void 0),(0,u.__decorate)([(0,f.P)('slot[name="actionItems"]')],b.prototype,"_actionItemsSlot",void 0),(0,u.__decorate)([(0,f.MZ)({type:Boolean})],b.prototype,"centerTitle",void 0),(0,u.__decorate)([(0,f.MZ)({type:Object})],b.prototype,"scrollTarget",null);var x=function(e){function t(){var e;return(0,o.A)(this,t),(e=(0,c.A)(this,t,arguments)).mdcFoundationClass=h.A,e.prominent=!1,e.dense=!1,e.handleResize=function(){e.mdcFoundation.handleWindowResize()},e}return(0,d.A)(t,e),(0,s.A)(t,[{key:"barClasses",value:function(){return{"mdc-top-app-bar--dense":this.dense,"mdc-top-app-bar--prominent":this.prominent,"center-title":this.centerTitle}}},{key:"contentClasses",value:function(){return{"mdc-top-app-bar--fixed-adjust":!this.dense&&!this.prominent,"mdc-top-app-bar--dense-fixed-adjust":this.dense&&!this.prominent,"mdc-top-app-bar--prominent-fixed-adjust":!this.dense&&this.prominent,"mdc-top-app-bar--dense-prominent-fixed-adjust":this.dense&&this.prominent}}},{key:"registerListeners",value:function(){(0,l.A)(t,"registerListeners",this,3)([]),window.addEventListener("resize",this.handleResize,_)}},{key:"unregisterListeners",value:function(){(0,l.A)(t,"unregisterListeners",this,3)([]),window.removeEventListener("resize",this.handleResize)}}])}(b);(0,u.__decorate)([(0,f.MZ)({type:Boolean,reflect:!0})],x.prototype,"prominent",void 0),(0,u.__decorate)([(0,f.MZ)({type:Boolean,reflect:!0})],x.prototype,"dense",void 0);var w=n(14315),A=function(e){function t(){var e;return(0,o.A)(this,t),(e=(0,c.A)(this,t,arguments)).mdcFoundationClass=w.A,e}return(0,d.A)(t,e),(0,s.A)(t,[{key:"barClasses",value:function(){return Object.assign(Object.assign({},(0,l.A)(t,"barClasses",this,3)([])),{"mdc-top-app-bar--fixed":!0})}},{key:"registerListeners",value:function(){this.scrollTarget.addEventListener("scroll",this.handleTargetScroll,_)}},{key:"unregisterListeners",value:function(){this.scrollTarget.removeEventListener("scroll",this.handleTargetScroll)}}])}(x)},99890:function(e,t,n){n.d(t,{g:function(){return i}});n(82386),n(36604);var i=function(e){return function(t,n){return e.includes(t,n)}}},46999:function(e,t,n){n.d(t,{Vy:function(){return a},fI:function(){return o}});var i=n(3254),r=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#9498a0","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#74787f","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#b6bac2","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function a(e){return r[e%r.length]}function o(e,t){var n=t.getPropertyValue("--graph-color-".concat(e+1))||a(e);return(0,i.RQ)(n)}},78691:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(i,a){var o,s,c,l,d,u,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.d(t,{EO:function(){return h},ol:function(){return d},xo:function(){return u}}),o=n(35193),s=n(45269),!(c=i([o])).then){e.next=12;break}return e.next=8,c;case 8:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=13;break;case 12:e.t0=c;case 13:o=e.t0[0],l=function(e,t,n,i){var r=n((0,o.L_)(e,t),i);return r instanceof Date?(0,o.uk)(r,t):r},d=function(e,t,n,i,r){return n.time_zone===s.Wj.server?l(e,i.time_zone,t,r):t(e,r)},u=function(e,t,n,i,r){return n.time_zone===s.Wj.server?l(e,i.time_zone,t,r):t(e,r)},h=function(e,t,n,i,r){return u(e,n,i,r,i.time_zone===s.Wj.server?(0,o.L_)(t,r.time_zone):t)},a(),e.next=24;break;case 21:e.prev=21,e.t2=e.catch(0),a(e.t2);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,n){return e.apply(this,arguments)}}())},9449:function(e,t,n){n.d(t,{Z:function(){return r},a:function(){return a}});n(28552);var i=n(37582),r={ms:1,s:1e3,min:6e4,h:36e5,d:864e5},a=function(e,t){return(0,i.A)(parseFloat(e)*r[t])||"0"}},34761:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(i,a){var o,s,c,l,d,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.d(t,{B:function(){return d},p:function(){return u}}),o=n(89655),s=n(13265),c=n(94100),!(l=i([s])).then){e.next=14;break}return e.next=10,l;case 10:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=15;break;case 14:e.t0=l;case 15:s=e.t0[0],d=(0,c.A)((function(e,t){for(var n=[],i=new Intl.DateTimeFormat(e,{weekday:t?"short":"long",timeZone:"UTC"}),r=0;r<7;r++){var a=new Date(Date.UTC(1970,0,4+r));n.push(i.format(a))}return n})),u=(0,c.A)((function(e,t){for(var n=[],i=new Intl.DateTimeFormat(e,{month:t?"short":"long",timeZone:"UTC"}),r=0;r<12;r++){var a=new Date(Date.UTC(1970,0+r,1));n.push(i.format(a))}return n})),a(),e.next=24;break;case 21:e.prev=21,e.t2=e.catch(0),a(e.t2);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,n){return e.apply(this,arguments)}}())},37582:function(e,t,n){n.d(t,{A:function(){return r}});n(81027),n(22871);var i=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=""+e,i=1;i<t;i++)n=parseInt(n)<Math.pow(10,i)?"0".concat(n):n;return n};function r(e){var t=Math.floor(e/1e3/3600),n=Math.floor(e/1e3%3600/60),r=Math.floor(e/1e3%3600%60),a=Math.floor(e%1e3);return t>0?"".concat(t,":").concat(i(n),":").concat(i(r)):n>0?"".concat(n,":").concat(i(r)):r>0||a>0?"".concat(r).concat(a>0?".".concat(i(a,3)):""):null}},96979:function(e,t,n){n.d(t,{I:function(){return s}});var i=n(71008),r=n(35806),a=(n(39805),n(89655),n(97099),n(72735),n(26098),n(10507),n(39790),n(253),n(54846),n(78266),n(66555),function(){return(0,r.A)((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.localStorage;(0,i.A)(this,e),this.storage=void 0,this._storage={},this._listeners={},this.storage=n,n===window.localStorage&&window.addEventListener("storage",(function(e){e.key&&t.hasKey(e.key)&&(t._storage[e.key]=e.newValue?JSON.parse(e.newValue):e.newValue,t._listeners[e.key]&&t._listeners[e.key].forEach((function(n){return n(e.oldValue?JSON.parse(e.oldValue):e.oldValue,t._storage[e.key])})))}))}),[{key:"addFromStorage",value:function(e){if(!this._storage[e]){var t=this.storage.getItem(e);t&&(this._storage[e]=JSON.parse(t))}}},{key:"subscribeChanges",value:function(e,t){var n=this;return this._listeners[e]?this._listeners[e].push(t):this._listeners[e]=[t],function(){n.unsubscribeChanges(e,t)}}},{key:"unsubscribeChanges",value:function(e,t){if(e in this._listeners){var n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1)}}},{key:"hasKey",value:function(e){return e in this._storage}},{key:"getValue",value:function(e){return this._storage[e]}},{key:"setValue",value:function(e,t){var n=this._storage[e];this._storage[e]=t;try{void 0===t?this.storage.removeItem(e):this.storage.setItem(e,JSON.stringify(t))}catch(i){}finally{this._listeners[e]&&this._listeners[e].forEach((function(e){return e(n,t)}))}}}])}()),o={},s=function(e){return function(t){var n,i=e.storage||"localStorage";i&&i in o?n=o[i]:(n=new a(window[i]),o[i]=n);var r=String(t.key),s=e.key||String(t.key),c=t.initializer?t.initializer():void 0;n.addFromStorage(s);var l=!1!==e.subscribe?function(e){return n.subscribeChanges(s,(function(n,i){e.requestUpdate(t.key,n)}))}:void 0,d=function(){return n.hasKey(s)?e.deserializer?e.deserializer(n.getValue(s)):n.getValue(s):c};return{kind:"method",placement:"prototype",key:t.key,descriptor:{set:function(i){!function(i,r){var a;e.state&&(a=d()),n.setValue(s,e.serializer?e.serializer(r):r),e.state&&i.requestUpdate(t.key,a)}(this,i)},get:function(){return d()},enumerable:!0,configurable:!0},finisher:function(n){if(e.state&&e.subscribe){var i=n.prototype.connectedCallback,a=n.prototype.disconnectedCallback;n.prototype.connectedCallback=function(){i.call(this),this["__unbsubLocalStorage".concat(r)]=null==l?void 0:l(this)},n.prototype.disconnectedCallback=function(){var e;a.call(this),null===(e=this["__unbsubLocalStorage".concat(r)])||void 0===e||e.call(this),this["__unbsubLocalStorage".concat(r)]=void 0}}e.state&&n.createProperty(t.key,Object.assign({noAccessor:!0},e.stateOptions))}}}}},65459:function(e,t,n){n.d(t,{t:function(){return r}});var i=n(213),r=function(e){return(0,i.m)(e.entity_id)}},42496:function(e,t,n){n.d(t,{$:function(){return i}});var i=function(e,t){return r(e.attributes,t)},r=function(e,t){return!!(e.supported_features&t)}},26175:function(e,t,n){n.d(t,{n:function(){return r}});n(36016),n(98185);var i=/^(\w+)\.(\w+)$/,r=function(e){return i.test(e)}},69678:function(e,t,n){n.d(t,{O:function(){return r},q:function(){return i}});var i=function(e,t,n){return Math.min(Math.max(e,t),n)},r=function(e,t,n){var i;return i=null!=t?Math.max(e,t):e,i=null!=n?Math.min(i,n):i}},57636:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(i,a){var o,s,c,l,d,u,h,f,p,v,g,m,k,y,_,b,x,w,A,D;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.d(t,{Yf:function(){return x},ZQ:function(){return A},ZV:function(){return w},ty:function(){return b},x:function(){return _}}),o=n(13265),s=n(81027),c=n(82386),l=n(39805),d=n(29193),u=n(63030),h=n(49445),f=n(26098),p=n(39790),v=n(7760),g=n(36604),m=n(45269),k=n(53249),!(y=i([o])).then){e.next=33;break}return e.next=29,y;case 29:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=34;break;case 33:e.t0=y;case 34:o=e.t0[0],_=function(e){return b(e.attributes)},b=function(e,t){return!!e.unit_of_measurement||!!e.state_class||(t||[]).includes(e.device_class||"")},x=function(e){switch(e.number_format){case m.jG.comma_decimal:return["en-US","en"];case m.jG.decimal_comma:return["de","es","it"];case m.jG.space_comma:return["fr","sv","cs"];case m.jG.system:return;default:return e.language}},w=function(e,t,n){var i=t?x(t):void 0;return Number.isNaN=Number.isNaN||function e(t){return"number"==typeof t&&e(t)},(null==t?void 0:t.number_format)===m.jG.none||Number.isNaN(Number(e))?Number.isNaN(Number(e))||""===e||(null==t?void 0:t.number_format)!==m.jG.none?"string"==typeof e?e:"".concat((0,k.L)(e,null==n?void 0:n.maximumFractionDigits).toString()).concat("currency"===(null==n?void 0:n.style)?" ".concat(n.currency):""):new Intl.NumberFormat("en-US",D(e,Object.assign(Object.assign({},n),{},{useGrouping:!1}))).format(Number(e)):new Intl.NumberFormat(i,D(e,n)).format(Number(e))},A=function(e,t){var n,i=null==t?void 0:t.display_precision;return null!=i?{maximumFractionDigits:i,minimumFractionDigits:i}:Number.isInteger(Number(null==e||null===(n=e.attributes)||void 0===n?void 0:n.step))&&Number.isInteger(Number(null==e?void 0:e.state))?{maximumFractionDigits:0}:void 0},D=function(e,t){var n=Object.assign({maximumFractionDigits:2},t);if("string"!=typeof e)return n;if(!t||void 0===t.minimumFractionDigits&&void 0===t.maximumFractionDigits){var i=e.indexOf(".")>-1?e.split(".")[1].length:0;n.minimumFractionDigits=i,n.maximumFractionDigits=i}return n},a(),e.next=47;break;case 44:e.prev=44,e.t2=e.catch(0),a(e.t2);case 47:case"end":return e.stop()}}),e,null,[[0,44]])})));return function(t,n){return e.apply(this,arguments)}}())},53249:function(e,t,n){n.d(t,{L:function(){return i}});var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}},33984:function(e,t,n){n.d(t,{d:function(){return i}});var i=function(e){switch(e.language){case"cz":case"de":case"fi":case"fr":case"sk":case"sv":return" ";default:return""}}},40863:function(e,t,n){n.d(t,{A:function(){return r}});var i=n(33984),r=function(e,t){return"°"===e?"":t&&"%"===e?(0,i.d)(t):" "}},73207:function(e,t,n){n.d(t,{c:function(){return f}});n(95737),n(33822),n(39790),n(99019),n(96858);var i=n(46999),r=n(3254),a=n(92164),o=n(213),s=n(95239),c=n(9883),l=n(61352),d={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};var u=0,h=new Map;function f(e,t,n){return function(e,t,n){var i;if(!n||e===c.Hh)return(0,l.a)("--history-unavailable-color",t);if(e===c.HV)return(0,l.a)("--history-unknown-color",t);var u=(0,s.mg)(n,e);if(u){var h=(0,l.a)(u,t);if(h){var f=(0,o.m)(n.entity_id),p=null===(i=d[f])||void 0===i?void 0:i[e];return p?(0,r.zm)((0,a.T)((0,r.Nc)((0,r.xp)(h)),p)):h}}}(e,t,n)||function(e,t){if(h.has(e))return h.get(e);var n=(0,i.fI)(u,t);return u++,h.set(e,n),n}(e,t)}},23179:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(t,i){var a,o,s,c,l,d,u,h,f,p,v,g,m,k,y,_,b,x,w;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=n(35806),o=n(71008),s=n(62193),c=n(2816),l=n(27927),d=n(29193),u=n(51677),h=n(29818),f=n(65100),p=n(4219),v=n.n(p),g=n(32230),m=n(34897),k=n(34761),y=n(74005),!(_=t([k])).then){e.next=25;break}return e.next=21,_;case 21:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=26;break;case 25:e.t0=_;case 26:k=e.t0[0],b=f.Ay.extend({mixins:[v()],methods:{selectMonthDate:function(){var e=this.end||new Date;this.changeLeftMonth({year:e.getFullYear(),month:e.getMonth()+1})},hoverDate:function(e){if(!this.readonly){if(this.in_selection){var t=this.in_selection,n=e;this.start=this.normalizeDatetime(Math.min(t.valueOf(),n.valueOf()),this.start),this.end=this.normalizeDatetime(Math.max(t.valueOf(),n.valueOf()),this.end)}this.$emit("hover-date",e)}}}}),x=f.Ay.extend({props:{timePicker:{type:Boolean,default:!0},twentyfourHours:{type:Boolean,default:!0},openingDirection:{type:String,default:"right"},disabled:{type:Boolean,default:!1},ranges:{type:Boolean,default:!0},startDate:{type:[String,Date],default:function(){return new Date}},endDate:{type:[String,Date],default:function(){return new Date}},firstDay:{type:Number,default:1},autoApply:{type:Boolean,default:!1},language:{type:String,default:"en"}},render:function(e){var t=this;return e(b,{props:{"time-picker":this.timePicker,"auto-apply":this.autoApply,opens:this.openingDirection,"show-dropdowns":!1,"time-picker24-hour":this.twentyfourHours,disabled:this.disabled,ranges:!!this.ranges&&{},"locale-data":{firstDay:this.firstDay,daysOfWeek:(0,k.B)(this.language,!0),monthNames:(0,k.p)(this.language,!1)}},model:{value:{startDate:this.startDate,endDate:this.endDate},callback:function(e){(0,m.r)(t.$el,"change",e)},expression:"dateRange"},scopedSlots:{input:function(){return e("slot",{domProps:{name:"input"}})},header:function(){return e("slot",{domProps:{name:"header"}})},ranges:function(){return e("slot",{domProps:{name:"ranges"}})},footer:function(){return e("slot",{domProps:{name:"footer"}})}}})}}),w=(0,u.A)(f.Ay,x),(0,l.A)([(0,h.EM)("date-range-picker")],(function(e,t){return{F:function(t){function n(){var t;(0,o.A)(this,n),t=(0,s.A)(this,n),e(t);var i=document.createElement("style");i.innerHTML="\n          ".concat(g,"\n          .calendars {\n            display: flex;\n            flex-wrap: nowrap !important;\n          }\n          .daterangepicker {\n            top: auto;\n            box-shadow: var(--ha-card-box-shadow, none);\n            background-color: var(--card-background-color);\n            border-radius: var(--ha-card-border-radius, 12px);\n            border-width: var(--ha-card-border-width, 1px);\n            border-style: solid;\n            border-color: var(\n              --ha-card-border-color,\n              var(--divider-color, #e0e0e0)\n            );\n            color: var(--primary-text-color);\n            min-width: initial !important;\n            max-height: var(--date-range-picker-max-height);\n            overflow-y: auto;\n                      }\n          .daterangepicker:before {\n            display: none;\n          }\n          .daterangepicker:after {\n            border-bottom: 6px solid var(--card-background-color);\n          }\n          .daterangepicker .calendar-table {\n            background-color: var(--card-background-color);\n            border: none;\n          }\n          .daterangepicker .calendar-table td,\n          .daterangepicker .calendar-table th {\n            background-color: transparent;\n            color: var(--secondary-text-color);\n            border-radius: 0;\n            outline: none;\n            min-width: 32px;\n            height: 32px;\n          }\n          .daterangepicker td.off,\n          .daterangepicker td.off.end-date,\n          .daterangepicker td.off.in-range,\n          .daterangepicker td.off.start-date {\n            background-color: var(--secondary-background-color);\n            color: var(--disabled-text-color);\n          }\n          .daterangepicker td.in-range {\n            background-color: var(--light-primary-color);\n            color: var(--text-light-primary-color, var(--primary-text-color));\n          }\n          .daterangepicker td.active,\n          .daterangepicker td.active:hover {\n            background-color: var(--primary-color);\n            color: var(--text-primary-color);\n          }\n          .daterangepicker td.start-date.end-date {\n            border-radius: 50%;\n          }\n          .daterangepicker td.start-date {\n            border-radius: 50% 0 0 50%;\n          }\n          .daterangepicker td.end-date {\n            border-radius: 0 50% 50% 0;\n          }\n          .reportrange-text {\n            background: none !important;\n            padding: 0 !important;\n            border: none !important;\n          }\n          .daterangepicker .calendar-table .next span,\n          .daterangepicker .calendar-table .prev span {\n            border: solid var(--primary-text-color);\n            border-width: 0 2px 2px 0;\n          }\n          .daterangepicker .ranges li {\n            outline: none;\n          }\n          .daterangepicker .ranges li:hover {\n            background-color: var(--secondary-background-color);\n          }\n          .daterangepicker .ranges li.active {\n            background-color: var(--primary-color);\n            color: var(--text-primary-color);\n          }\n          .daterangepicker select.ampmselect,\n          .daterangepicker select.hourselect,\n          .daterangepicker select.minuteselect,\n          .daterangepicker select.secondselect {\n            background: transparent;\n            border: 1px solid var(--divider-color);\n            color: var(--primary-color);\n          }\n          .daterangepicker .drp-buttons .btn {\n            border: 1px solid var(--primary-color);\n            background-color: transparent;\n            color: var(--primary-color);\n            border-radius: 4px;\n            padding: 8px;\n            cursor: pointer;\n          }\n          .calendars-container {\n            flex-direction: column;\n            align-items: center;\n          }\n          .drp-calendar.col.right .calendar-table {\n            display: none;\n          }\n          .daterangepicker.show-ranges .drp-calendar.left {\n            border-left: 0px;\n          }\n          .daterangepicker .drp-calendar.left {\n            padding: 8px;\n            width: unset;\n            max-width: unset;\n            min-width: 270px;\n          }\n          .daterangepicker.show-calendar .ranges {\n            margin-top: 0;\n            padding-top: 8px;\n            border-right: 1px solid var(--divider-color);\n          }\n          @media only screen and (max-width: 800px) {\n            .calendars {\n              flex-direction: column;\n            }\n          }\n          .calendar-table {\n            padding: 0 !important;\n          }\n          .calendar-time {\n            direction: ltr;\n          }\n          .daterangepicker.ltr {\n            direction: var(--direction);\n            text-align: var(--float-start);\n          }\n          .vue-daterange-picker{\n            min-width: unset !important;\n            display: block !important;\n          }\n        "),"rtl"===y.G.document.dir&&(i.innerHTML+="\n            .daterangepicker .calendar-table .next span {\n              transform: rotate(135deg);\n              -webkit-transform: rotate(135deg);\n            }\n            .daterangepicker .calendar-table .prev span {\n              transform: rotate(-45deg);\n              -webkit-transform: rotate(-45deg);\n            }\n            .daterangepicker td.start-date {\n              border-radius: 0 50% 50% 0;\n            }\n            .daterangepicker td.end-date {\n              border-radius: 50% 0 0 50%;\n            }\n            ");var r=t.shadowRoot;return r.appendChild(i),r.addEventListener("click",(function(e){return e.stopPropagation()})),t}return(0,c.A)(n,t),(0,a.A)(n)}(t),d:[]}}),w),i(),e.next=37;break;case 34:e.prev=34,e.t2=e.catch(0),i(e.t2);case 37:case"end":return e.stop()}}),e,null,[[0,34]])})));return function(t,n){return e.apply(this,arguments)}}())},26790:function(e,t,n){var i,r,a=n(64599),o=n(35806),s=n(71008),c=n(62193),l=n(2816),d=n(27927),u=n(35890),h=(n(81027),n(29193),n(39790),n(33628),n(55383),n(253),n(54846),n(66555),n(29654),n(15112)),f=n(29818),p=n(74005),v=n(90952);(0,d.A)([(0,f.EM)("ha-button-menu")],(function(e,t){var n=function(t){function n(){var t;(0,s.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,c.A)(this,n,[].concat(r)),e(t),t}return(0,l.A)(n,t),(0,o.A)(n)}(t);return{F:n,d:[{kind:"field",key:v.Xr,value:void 0},{kind:"field",decorators:[(0,f.MZ)()],key:"corner",value:function(){return"BOTTOM_START"}},{kind:"field",decorators:[(0,f.MZ)()],key:"menuCorner",value:function(){return"START"}},{kind:"field",decorators:[(0,f.MZ)({type:Number})],key:"x",value:function(){return null}},{kind:"field",decorators:[(0,f.MZ)({type:Number})],key:"y",value:function(){return null}},{kind:"field",decorators:[(0,f.MZ)({type:Boolean})],key:"multi",value:function(){return!1}},{kind:"field",decorators:[(0,f.MZ)({type:Boolean})],key:"activatable",value:function(){return!1}},{kind:"field",decorators:[(0,f.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,f.MZ)({type:Boolean})],key:"fixed",value:function(){return!1}},{kind:"field",decorators:[(0,f.MZ)({type:Boolean,attribute:"no-anchor"})],key:"noAnchor",value:function(){return!1}},{kind:"field",decorators:[(0,f.P)("mwc-menu",!0)],key:"_menu",value:void 0},{kind:"get",key:"items",value:function(){var e;return null===(e=this._menu)||void 0===e?void 0:e.items}},{kind:"get",key:"selected",value:function(){var e;return null===(e=this._menu)||void 0===e?void 0:e.selected}},{kind:"method",key:"focus",value:function(){var e,t;null!==(e=this._menu)&&void 0!==e&&e.open?this._menu.focusItemAtIndex(0):null===(t=this._triggerButton)||void 0===t||t.focus()}},{kind:"method",key:"render",value:function(){return(0,h.qy)(i||(i=(0,a.A)([' <div @click="','"> <slot name="trigger" @slotchange="','"></slot> </div> <mwc-menu .corner="','" .menuCorner="','" .fixed="','" .multi="','" .activatable="','" .y="','" .x="','"> <slot></slot> </mwc-menu> '])),this._handleClick,this._setTriggerAria,this.corner,this.menuCorner,this.fixed,this.multi,this.activatable,this.y,this.x)}},{kind:"method",key:"firstUpdated",value:function(e){var t=this;(0,u.A)(n,"firstUpdated",this,3)([e]),"rtl"===p.G.document.dir&&this.updateComplete.then((function(){t.querySelectorAll("mwc-list-item").forEach((function(e){var t=document.createElement("style");t.innerHTML="span.material-icons:first-of-type { margin-left: var(--mdc-list-item-graphic-margin, 32px) !important; margin-right: 0px !important;}",e.shadowRoot.appendChild(t)}))}))}},{kind:"method",key:"_handleClick",value:function(){this.disabled||(this._menu.anchor=this.noAnchor?null:this,this._menu.show())}},{kind:"get",key:"_triggerButton",value:function(){return this.querySelector('ha-icon-button[slot="trigger"], mwc-button[slot="trigger"]')}},{kind:"method",key:"_setTriggerAria",value:function(){this._triggerButton&&(this._triggerButton.ariaHasPopup="menu")}},{kind:"get",static:!0,key:"styles",value:function(){return(0,h.AH)(r||(r=(0,a.A)([":host{display:inline-block;position:relative}::slotted([disabled]){color:var(--disabled-text-color)}"])))}}]}}),h.WF)},37629:function(e,t,n){n.r(t),n.d(t,{HaCircularProgress:function(){return v}});var i,r=n(64599),a=n(41981),o=n(35806),s=n(71008),c=n(62193),l=n(2816),d=n(27927),u=n(35890),h=(n(81027),n(99322)),f=n(15112),p=n(29818),v=(0,d.A)([(0,p.EM)("ha-circular-progress")],(function(e,t){var n=function(t){function n(){var t;(0,s.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,c.A)(this,n,[].concat(r)),e(t),t}return(0,l.A)(n,t),(0,o.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,p.MZ)({attribute:"aria-label",type:String})],key:"ariaLabel",value:function(){return"Loading"}},{kind:"field",decorators:[(0,p.MZ)()],key:"size",value:function(){return"medium"}},{kind:"method",key:"updated",value:function(e){if((0,u.A)(n,"updated",this,3)([e]),e.has("size"))switch(this.size){case"tiny":this.style.setProperty("--md-circular-progress-size","16px");break;case"small":this.style.setProperty("--md-circular-progress-size","28px");break;case"medium":this.style.setProperty("--md-circular-progress-size","48px");break;case"large":this.style.setProperty("--md-circular-progress-size","68px")}}},{kind:"field",static:!0,key:"styles",value:function(){return[].concat((0,a.A)((0,u.A)(n,"styles",this)),[(0,f.AH)(i||(i=(0,r.A)([":host{--md-sys-color-primary:var(--primary-color);--md-circular-progress-size:48px}"])))])}}]}}),h.U)},9043:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(t,i){var a,o,s,c,l,d,u,h,f,p,v,g,m,k,y,_,b,x,w,A,D,M,S,H,L,C,O,P,z,E,V,j,I,T,Z,R,B,N,F,q,U,W;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=n(64599),o=n(14842),s=n(35806),c=n(71008),l=n(62193),d=n(2816),u=n(27927),h=n(81027),f=n(97741),p=n(26098),v=n(10507),g=n(9241),m=n(16891),n(54838),n(63893),n(67056),k=n(94086),y=n(98176),_=n(23566),b=n(31077),x=n(46091),w=n(34206),A=n(4537),D=n(56235),M=n(62619),S=n(22034),H=n(49668),L=n(15112),C=n(29818),O=n(10977),P=n(78691),z=n(58558),E=n(57289),V=n(8581),j=n(3453),I=n(23179),n(28066),n(88400),n(90431),!(T=t([P,z,E,V,I])).then){e.next=54;break}return e.next=50,T;case 50:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=55;break;case 54:e.t0=T;case 55:Z=e.t0,P=Z[0],z=Z[1],E=Z[2],V=Z[3],I=Z[4],W="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z",(0,u.A)([(0,C.EM)("ha-date-range-picker")],(function(e,t){var n=function(t){function n(){var t;(0,c.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,l.A)(this,n,[].concat(r)),e(t),t}return(0,d.A)(n,t),(0,s.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,C.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,C.MZ)({attribute:!1})],key:"startDate",value:void 0},{kind:"field",decorators:[(0,C.MZ)({attribute:!1})],key:"endDate",value:void 0},{kind:"field",decorators:[(0,C.MZ)({attribute:!1})],key:"ranges",value:void 0},{kind:"field",decorators:[(0,C.wk)()],key:"_ranges",value:void 0},{kind:"field",decorators:[(0,C.MZ)({type:Boolean})],key:"autoApply",value:function(){return!1}},{kind:"field",decorators:[(0,C.MZ)({type:Boolean})],key:"timePicker",value:function(){return!0}},{kind:"field",decorators:[(0,C.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,C.MZ)({type:Boolean})],key:"minimal",value:function(){return!1}},{kind:"field",decorators:[(0,C.wk)()],key:"_hour24format",value:function(){return!1}},{kind:"field",decorators:[(0,C.MZ)({type:Boolean})],key:"extendedPresets",value:function(){return!1}},{kind:"field",decorators:[(0,C.MZ)()],key:"openingDirection",value:void 0},{kind:"field",decorators:[(0,C.wk)()],key:"_calcedOpeningDirection",value:void 0},{kind:"method",key:"willUpdate",value:function(e){var t,n;if(!this.hasUpdated&&void 0===this.ranges||e.has("hass")&&(null===(t=this.hass)||void 0===t?void 0:t.localize)!==(null===(n=e.get("hass"))||void 0===n?void 0:n.localize)){var i=new Date,r=(0,z.PE)(this.hass.locale),a=(0,P.ol)(i,k.k,this.hass.locale,this.hass.config,{weekStartsOn:r}),s=(0,P.ol)(i,y.$,this.hass.locale,this.hass.config,{weekStartsOn:r});this._ranges=Object.assign((0,o.A)((0,o.A)((0,o.A)((0,o.A)({},this.hass.localize("ui.components.date-range-picker.ranges.today"),[(0,P.ol)(i,_.o,this.hass.locale,this.hass.config,{weekStartsOn:r}),(0,P.ol)(i,b.D,this.hass.locale,this.hass.config,{weekStartsOn:r})]),this.hass.localize("ui.components.date-range-picker.ranges.yesterday"),[(0,P.ol)((0,x.f)(i,-1),_.o,this.hass.locale,this.hass.config,{weekStartsOn:r}),(0,P.ol)((0,x.f)(i,-1),b.D,this.hass.locale,this.hass.config,{weekStartsOn:r})]),this.hass.localize("ui.components.date-range-picker.ranges.this_week"),[a,s]),this.hass.localize("ui.components.date-range-picker.ranges.last_week"),[(0,x.f)(a,-7),(0,x.f)(s,-7)]),this.extendedPresets?(0,o.A)((0,o.A)((0,o.A)((0,o.A)({},this.hass.localize("ui.components.date-range-picker.ranges.this_month"),[(0,P.ol)(i,w.w,this.hass.locale,this.hass.config,{weekStartsOn:r}),(0,P.ol)(i,A.p,this.hass.locale,this.hass.config,{weekStartsOn:r})]),this.hass.localize("ui.components.date-range-picker.ranges.last_month"),[(0,P.ol)((0,D.P)(i,-1),w.w,this.hass.locale,this.hass.config,{weekStartsOn:r}),(0,P.ol)((0,D.P)(i,-1),A.p,this.hass.locale,this.hass.config,{weekStartsOn:r})]),this.hass.localize("ui.components.date-range-picker.ranges.this_year"),[(0,P.ol)(i,M.D,this.hass.locale,this.hass.config,{weekStartsOn:r}),(0,P.ol)(i,S.Q,this.hass.locale,this.hass.config,{weekStartsOn:r})]),this.hass.localize("ui.components.date-range-picker.ranges.last_year"),[(0,P.ol)((0,H.e)(i,-1),M.D,this.hass.locale,this.hass.config,{weekStartsOn:r}),(0,P.ol)((0,H.e)(i,-1),S.Q,this.hass.locale,this.hass.config,{weekStartsOn:r})]):{})}}},{kind:"method",key:"updated",value:function(e){if(e.has("hass")){var t=e.get("hass");t&&t.locale===this.hass.locale||(this._hour24format=!(0,j.J)(this.hass.locale))}}},{kind:"method",key:"render",value:function(){return(0,L.qy)(R||(R=(0,a.A)([' <date-range-picker ?disabled="','" ?auto-apply="','" time-picker="','" twentyfour-hours="','" start-date="','" end-date="','" ?ranges="','" opening-direction="','" first-day="','" language="','"> <div slot="input" class="date-range-inputs" @click="','"> '," </div> ",' <div slot="footer" class="date-range-footer"> <mwc-button @click="','">','</mwc-button> <mwc-button @click="','">',"</mwc-button> </div> </date-range-picker> "])),this.disabled,this.autoApply,this.timePicker,this._hour24format,this.startDate.toISOString(),this.endDate.toISOString(),!1!==this.ranges,(0,O.J)(this.openingDirection||this._calcedOpeningDirection),(0,z.PE)(this.hass.locale),this.hass.locale.language,this._handleClick,this.minimal?(0,L.qy)(N||(N=(0,a.A)(['<ha-icon-button .label="','" .path="','"></ha-icon-button>'])),this.hass.localize("ui.components.date-range-picker.select_date_range"),W):(0,L.qy)(B||(B=(0,a.A)(['<ha-svg-icon .path="','"></ha-svg-icon> <ha-textfield .value="','" .label="','" .disabled="','" @click="','" readonly="readonly"></ha-textfield> <ha-textfield .value="','" .label="','" .disabled="','" @click="','" readonly="readonly"></ha-textfield>'])),W,this.timePicker?(0,V.r6)(this.startDate,this.hass.locale,this.hass.config):(0,E.Yq)(this.startDate,this.hass.locale,this.hass.config),this.hass.localize("ui.components.date-range-picker.start_date"),this.disabled,this._handleInputClick,this.timePicker?(0,V.r6)(this.endDate,this.hass.locale,this.hass.config):(0,E.Yq)(this.endDate,this.hass.locale,this.hass.config),this.hass.localize("ui.components.date-range-picker.end_date"),this.disabled,this._handleInputClick),!1!==this.ranges&&(this.ranges||this._ranges)?(0,L.qy)(F||(F=(0,a.A)(['<div slot="ranges" class="date-range-ranges"> <mwc-list @action="','" activatable> '," </mwc-list> </div>"])),this._setDateRange,Object.keys(this.ranges||this._ranges).map((function(e){return(0,L.qy)(q||(q=(0,a.A)(["<mwc-list-item>","</mwc-list-item>"])),e)}))):L.s6,this._cancelDateRange,this.hass.localize("ui.common.cancel"),this._applyDateRange,this.hass.localize("ui.components.date-range-picker.select"))}},{kind:"method",key:"_setDateRange",value:function(e){var t=Object.values(this.ranges||this._ranges)[e.detail.index],n=this._dateRangePicker;n.clickRange(t),n.clickedApply()}},{kind:"method",key:"_cancelDateRange",value:function(){this._dateRangePicker.clickCancel()}},{kind:"method",key:"_applyDateRange",value:function(){this._dateRangePicker.clickedApply()}},{kind:"get",key:"_dateRangePicker",value:function(){return this.shadowRoot.querySelector("date-range-picker").vueComponent.$children[0]}},{kind:"method",key:"_handleInputClick",value:function(){this._dateRangePicker.open&&(this._dateRangePicker.open=!1)}},{kind:"method",key:"_handleClick",value:function(){if(!this._dateRangePicker.open&&!this.openingDirection){var e,t=this.getBoundingClientRect().x;e=t>2*window.innerWidth/3?"left":t<window.innerWidth/3?"right":"center",this._calcedOpeningDirection=e}}},{kind:"get",static:!0,key:"styles",value:function(){return(0,L.AH)(U||(U=(0,a.A)(["ha-svg-icon{margin-right:8px;margin-inline-end:8px;margin-inline-start:initial;direction:var(--direction)}ha-icon-button{direction:var(--direction)}.date-range-inputs{display:flex;align-items:center}.date-range-ranges{border-right:1px solid var(--divider-color)}.date-range-footer{display:flex;justify-content:flex-end;padding:8px;border-top:1px solid var(--divider-color)}ha-textfield{display:inline-block;max-width:250px;min-width:220px}ha-textfield:last-child{margin-left:8px;margin-inline-start:8px;margin-inline-end:initial;direction:var(--direction)}@media only screen and (max-width:800px){.date-range-ranges{border-right:none;border-bottom:1px solid var(--divider-color)}}@media only screen and (max-width:500px){ha-textfield{min-width:inherit}ha-svg-icon{display:none}}"])))}}]}}),L.WF),i(),e.next=69;break;case 66:e.prev=66,e.t2=e.catch(0),i(e.t2);case 69:case"end":return e.stop()}}),e,null,[[0,66]])})));return function(t,n){return e.apply(this,arguments)}}())},45346:function(e,t,n){n.r(t),n.d(t,{HaIconButtonArrowPrev:function(){return f}});var i,r=n(64599),a=n(35806),o=n(71008),s=n(62193),c=n(2816),l=n(27927),d=(n(81027),n(15112)),u=n(29818),h=n(74005),f=(n(28066),(0,l.A)([(0,u.EM)("ha-icon-button-arrow-prev")],(function(e,t){var n=function(t){function n(){var t;(0,o.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,s.A)(this,n,[].concat(r)),e(t),t}return(0,c.A)(n,t),(0,a.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,u.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,u.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,u.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,u.wk)()],key:"_icon",value:function(){return"rtl"===h.G.document.dir?"M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z":"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"}},{kind:"method",key:"render",value:function(){var e;return(0,d.qy)(i||(i=(0,r.A)([' <ha-icon-button .disabled="','" .label="','" .path="','"></ha-icon-button> '])),this.disabled,this.label||(null===(e=this.hass)||void 0===e?void 0:e.localize("ui.common.back"))||"Back",this._icon)}}]}}),d.WF))},90431:function(e,t,n){var i,r,a,o,s=n(64599),c=n(35806),l=n(71008),d=n(62193),u=n(2816),h=n(27927),f=n(35890),p=(n(81027),n(44331)),v=n(67449),g=n(15112),m=n(29818),k=n(74005);(0,h.A)([(0,m.EM)("ha-textfield")],(function(e,t){var n=function(t){function n(){var t;(0,l.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,d.A)(this,n,[].concat(r)),e(t),t}return(0,u.A)(n,t),(0,c.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,m.MZ)({type:Boolean})],key:"invalid",value:void 0},{kind:"field",decorators:[(0,m.MZ)({attribute:"error-message"})],key:"errorMessage",value:void 0},{kind:"field",decorators:[(0,m.MZ)({type:Boolean})],key:"icon",value:function(){return!1}},{kind:"field",decorators:[(0,m.MZ)({type:Boolean})],key:"iconTrailing",value:function(){return!1}},{kind:"field",decorators:[(0,m.MZ)()],key:"autocomplete",value:void 0},{kind:"field",decorators:[(0,m.MZ)()],key:"autocorrect",value:void 0},{kind:"field",decorators:[(0,m.MZ)({attribute:"input-spellcheck"})],key:"inputSpellcheck",value:void 0},{kind:"field",decorators:[(0,m.P)("input")],key:"formElement",value:void 0},{kind:"method",key:"updated",value:function(e){(0,f.A)(n,"updated",this,3)([e]),(e.has("invalid")||e.has("errorMessage"))&&(this.setCustomValidity(this.invalid?this.errorMessage||this.validationMessage||"Invalid":""),(this.invalid||this.validateOnInitialRender||e.has("invalid")&&void 0!==e.get("invalid"))&&this.reportValidity()),e.has("autocomplete")&&(this.autocomplete?this.formElement.setAttribute("autocomplete",this.autocomplete):this.formElement.removeAttribute("autocomplete")),e.has("autocorrect")&&(this.autocorrect?this.formElement.setAttribute("autocorrect",this.autocorrect):this.formElement.removeAttribute("autocorrect")),e.has("inputSpellcheck")&&(this.inputSpellcheck?this.formElement.setAttribute("spellcheck",this.inputSpellcheck):this.formElement.removeAttribute("spellcheck"))}},{kind:"method",key:"renderIcon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?"trailing":"leading";return(0,g.qy)(i||(i=(0,s.A)([' <span class="mdc-text-field__icon mdc-text-field__icon--','" tabindex="','"> <slot name="','Icon"></slot> </span> '])),n,t?1:-1,n)}},{kind:"field",static:!0,key:"styles",value:function(){return[v.R,(0,g.AH)(r||(r=(0,s.A)([".mdc-text-field__input{width:var(--ha-textfield-input-width,100%)}.mdc-text-field:not(.mdc-text-field--with-leading-icon){padding:var(--text-field-padding,0px 16px)}.mdc-text-field__affix--suffix{padding-left:var(--text-field-suffix-padding-left,12px);padding-right:var(--text-field-suffix-padding-right,0px);padding-inline-start:var(--text-field-suffix-padding-left,12px);padding-inline-end:var(--text-field-suffix-padding-right,0px);direction:ltr}.mdc-text-field--with-leading-icon{padding-inline-start:var(--text-field-suffix-padding-left,0px);padding-inline-end:var(--text-field-suffix-padding-right,16px);direction:var(--direction)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:var(--text-field-suffix-padding-left,0px);padding-right:var(--text-field-suffix-padding-right,0px);padding-inline-start:var(--text-field-suffix-padding-left,0px);padding-inline-end:var(--text-field-suffix-padding-right,0px)}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__affix--suffix{color:var(--secondary-text-color)}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__icon{color:var(--secondary-text-color)}.mdc-text-field__icon--leading{margin-inline-start:16px;margin-inline-end:8px;direction:var(--direction)}.mdc-text-field__icon--trailing{padding:var(--textfield-icon-trailing-padding,12px)}.mdc-floating-label:not(.mdc-floating-label--float-above){text-overflow:ellipsis;width:inherit;padding-right:30px;padding-inline-end:30px;padding-inline-start:initial;box-sizing:border-box;direction:var(--direction)}input{text-align:var(--text-field-text-align,start)}::-ms-reveal{display:none}:host([no-spinner]) input::-webkit-inner-spin-button,:host([no-spinner]) input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}:host([no-spinner]) input[type=number]{-moz-appearance:textfield}.mdc-text-field__ripple{overflow:hidden}.mdc-text-field{overflow:var(--text-field-overflow)}.mdc-floating-label{inset-inline-start:16px!important;inset-inline-end:initial!important;transform-origin:var(--float-start);direction:var(--direction);text-align:var(--float-start)}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px - var(--text-field-suffix-padding-left,0px));inset-inline-start:calc(48px + var(--text-field-suffix-padding-left,0px))!important;inset-inline-end:initial!important;direction:var(--direction)}.mdc-text-field__input[type=number]{direction:var(--direction)}.mdc-text-field__affix--prefix{padding-right:var(--text-field-prefix-padding-right,2px);padding-inline-end:var(--text-field-prefix-padding-right,2px);padding-inline-start:initial}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__affix--prefix{color:var(--mdc-text-field-label-ink-color)}"]))),"rtl"===k.G.document.dir?(0,g.AH)(a||(a=(0,s.A)([".mdc-floating-label,.mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field__icon--leading,.mdc-text-field__input[type=number]{direction:rtl;--direction:rtl}"]))):(0,g.AH)(o||(o=(0,s.A)([""])))]}}]}}),p.J)},50808:function(e,t,n){var i,r=n(64599),a=n(35806),o=n(71008),s=n(62193),c=n(2816),l=n(27927),d=(n(81027),n(11514)),u=n(21025),h=n(15112),f=n(29818);(0,l.A)([(0,f.EM)("ha-top-app-bar-fixed")],(function(e,t){var n=function(t){function n(){var t;(0,o.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,s.A)(this,n,[].concat(r)),e(t),t}return(0,c.A)(n,t),(0,a.A)(n)}(t);return{F:n,d:[{kind:"field",static:!0,key:"styles",value:function(){return[u.R,(0,h.AH)(i||(i=(0,r.A)([".mdc-top-app-bar__row{height:var(--header-height);border-bottom:var(--app-header-border-bottom)}.mdc-top-app-bar--fixed-adjust{padding-top:var(--header-height)}.mdc-top-app-bar{--mdc-typography-headline6-font-weight:400;color:var(--app-header-text-color,var(--mdc-theme-on-primary,#fff));background-color:var(--app-header-background-color,var(--mdc-theme-primary))}.mdc-top-app-bar__title{padding-inline-start:20px;padding-inline-end:initial}"])))]}}]}}),d.$)},50118:function(e,t,n){function i(e){return"strategy"in e}n.d(t,{Dz:function(){return r},Wu:function(){return i},io:function(){return o},ql:function(){return a}});var r=function(e,t,n){return e.sendMessagePromise({type:"lovelace/config",url_path:t,force:n})},a=function(e,t,n){return e.callWS({type:"lovelace/config/save",url_path:t,config:n})},o=function(e,t){return e.callWS({type:"lovelace/config/delete",url_path:t})}},57216:function(e,t,n){n.d(t,{A_:function(){return o},SJ:function(){return i},mQ:function(){return a},n6:function(){return r}});n(26098);var i=function(e){return e.callWS({type:"lovelace/dashboards/list"})},r=function(e,t){return e.callWS(Object.assign({type:"lovelace/dashboards/create"},t))},a=function(e,t,n){return e.callWS(Object.assign({type:"lovelace/dashboards/update",dashboard_id:t},n))},o=function(e,t){return e.callWS({type:"lovelace/dashboards/delete",dashboard_id:t})}},29829:function(e,t,n){n.d(t,{DF:function(){return m},Lo:function(){return w},MH:function(){return f},MM:function(){return k},Qz:function(){return g},Ru:function(){return _},UU:function(){return b},_7:function(){return v},bZ:function(){return p},m0:function(){return h},tD:function(){return x},vX:function(){return y}});var i=n(41981),r=n(26810),a=(n(13025),n(84251),n(82386),n(95737),n(89655),n(89336),n(26098),n(39790),n(9241),n(74268),n(24545),n(51855),n(82130),n(31743),n(22328),n(4959),n(62435),n(36604),n(99019),n(253),n(2075),n(32137),n(54846),n(4525),n(66555),n(96858),n(21863)),o=n(65459),s=n(42496),c=n(57273),l=n(10725),d=["domain","integration","device_class"],u=["integration","manufacturer","model"],h=function(e,t,n,i,r,a,o){var s=[],c=[],l=[];return Object.values(n).forEach((function(n){n.labels.includes(t)&&g(e,r,i,n.area_id,a,o)&&l.push(n.area_id)})),Object.values(i).forEach((function(n){n.labels.includes(t)&&m(e,Object.values(r),n,a,o)&&c.push(n.id)})),Object.values(r).forEach((function(n){n.labels.includes(t)&&k(e.states[n.entity_id],a,o)&&s.push(n.entity_id)})),{areas:l,devices:c,entities:s}},f=function(e,t,n,i,r){var a=[];return Object.values(n).forEach((function(n){n.floor_id===t&&g(e,e.entities,e.devices,n.area_id,i,r)&&a.push(n.area_id)})),{areas:a}},p=function(e,t,n,i,r,a){var o=[],s=[];return Object.values(n).forEach((function(n){n.area_id===t&&m(e,Object.values(i),n,r,a)&&s.push(n.id)})),Object.values(i).forEach((function(n){n.area_id===t&&k(e.states[n.entity_id],r,a)&&o.push(n.entity_id)})),{devices:s,entities:o}},v=function(e,t,n,i,r){var a=[];return Object.values(n).forEach((function(n){n.device_id===t&&k(e.states[n.entity_id],i,r)&&a.push(n.entity_id)})),{entities:a}},g=function(e,t,n,i,r,a){return!!Object.values(n).some((function(n){return!(n.area_id!==i||!m(e,Object.values(t),n,r,a))}))||Object.values(t).some((function(t){return!(t.area_id!==i||!k(e.states[t.entity_id],r,a))}))},m=function(e,t,n,i,r){var o,s,c=r?(0,l.fk)(r,t):void 0;return!(null!==(o=i.target)&&void 0!==o&&o.device&&!(0,a.e)(i.target.device).some((function(e){return y(e,n,c)})))&&(null===(s=i.target)||void 0===s||!s.entity||t.filter((function(e){return e.device_id===n.id})).some((function(t){var n=e.states[t.entity_id];return k(n,i,r)})))},k=function(e,t,n){var i;return null===(i=t.target)||void 0===i||!i.entity||(0,a.e)(t.target.entity).some((function(t){return _(t,e,n)}))},y=function(e,t,n){var i,r=e.manufacturer,a=e.model,o=e.integration;if(r&&t.manufacturer!==r)return!1;if(a&&t.model!==a)return!1;if(o&&n&&(null==n||null===(i=n[t.id])||void 0===i||!i.has(o)))return!1;return!0},_=function(e,t,n){var i,r=e.domain,c=e.device_class,l=e.supported_features,d=e.integration;if(r){var u=(0,o.t)(t);if(Array.isArray(r)?!r.includes(u):u!==r)return!1}if(c){var h=t.attributes.device_class;if(h&&Array.isArray(c)?!c.includes(h):h!==c)return!1}return!(l&&!(0,a.e)(l).some((function(e){return(0,s.$)(t,e)})))&&(!d||(null==n||null===(i=n[t.entity_id])||void 0===i?void 0:i.domain)===d)},b=function(e){if(!e.entity)return{entity:null};if("filter"in e.entity)return e;var t=e.entity,n=t.domain,i=t.integration,a=t.device_class,o=(0,r.A)(t,d);return n||i||a?{entity:Object.assign(Object.assign({},o),{},{filter:{domain:n,integration:i,device_class:a}})}:{entity:o}},x=function(e){if(!e.device)return{device:null};if("filter"in e.device)return e;var t=e.device,n=t.integration,i=t.manufacturer,a=t.model,o=(0,r.A)(t,u);return n||i||a?{device:Object.assign(Object.assign({},o),{},{filter:{integration:n,manufacturer:i,model:a}})}:{device:o}},w=function(e){var t,n;if("target"in e)t=(0,a.e)(null===(n=e.target)||void 0===n?void 0:n.entity);else if("entity"in e){var r,o;if(null!==(r=e.entity)&&void 0!==r&&r.include_entities)return;t=(0,a.e)(null===(o=e.entity)||void 0===o?void 0:o.filter)}if(t){var s=t.flatMap((function(e){return e.integration||e.device_class||e.supported_features||!e.domain?[]:(0,a.e)(e.domain).filter((function(e){return(0,c.z)(e)}))}));return(0,i.A)(new Set(s))}}},11577:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(i,a){var o,s,c,l,d,u,h,f,p,v,g,m,k,y,_,b,x,w,A,D,M,S,H,L,C,O,P,z,E,V,j,I,T,Z,R,B,N,F,q,U,W,Q,G,J,$,Y,K,X,ee,te,ne,ie,re,ae,oe,se,ce,le,de,ue,he,fe,pe,ve,ge,me,ke,ye,_e,be,xe,we,Ae,De,Me,Se,He,Le,Ce,Oe,Pe,ze,Ee,Ve;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.r(t),o=n(33994),s=n(658),c=n(22858),l=n(41981),d=n(64782),u=n(64599),h=n(35806),f=n(71008),p=n(62193),v=n(2816),g=n(27927),m=n(35890),k=n(81027),y=n(44124),_=n(52427),b=n(95737),x=n(79243),w=n(97741),A=n(89655),D=n(33231),M=n(26098),S=n(99471),H=n(10507),L=n(39790),C=n(9241),O=n(36016),P=n(98185),z=n(7760),E=n(74268),V=n(24545),j=n(51855),I=n(82130),T=n(31743),Z=n(22328),R=n(4959),B=n(62435),N=n(99019),F=n(43037),q=n(63523),U=n(253),W=n(94438),Q=n(54846),G=n(16891),J=n(66555),$=n(96858),Y=n(84341),K=n(49365),X=n(38389),ee=n(74860),te=n(71011),ne=n(71174),ie=n(56180),re=n(15112),ae=n(29818),oe=n(94100),se=n(21863),ce=n(96979),le=n(213),de=n(16312),ue=n(20732),he=n(56932),fe=n(90701),pe=n(4159),n(37629),ve=n(9043),n(28066),n(26790),n(13830),n(45346),n(11804),ge=n(4736),n(50808),me=n(11630),ke=n(4826),ye=n(29829),_e=n(96778),be=n(6121),xe=n(55321),we=n(30489),Ae=n(7950),!(De=i([pe,ve,ge,me])).then){e.next=129;break}return e.next=125,De;case 125:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=130;break;case 129:e.t0=De;case 130:Me=e.t0,pe=Me[0],ve=Me[1],ge=Me[2],me=Me[3],Ve=(0,g.A)(null,(function(e,t){var n,i,r,a=function(t){function n(){var t;(0,f.A)(this,n),t=(0,p.A)(this,n),e(t);var i=new Date;i.setHours(i.getHours()-1,0,0,0),t._startDate=i;var r=new Date;return r.setHours(r.getHours()+2,0,0,0),t._endDate=r,t}return(0,v.A)(n,t),(0,h.A)(n)}(t);return{F:a,d:[{kind:"field",decorators:[(0,ae.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,ae.MZ)({reflect:!0,type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,ae.MZ)({reflect:!0,type:Boolean})],key:"rtl",value:function(){return!1}},{kind:"field",decorators:[(0,ae.wk)()],key:"_startDate",value:void 0},{kind:"field",decorators:[(0,ae.wk)()],key:"_endDate",value:void 0},{kind:"field",decorators:[(0,ce.I)({key:"historyPickedValue",state:!0,subscribe:!1})],key:"_targetPickerValue",value:function(){return{}}},{kind:"field",decorators:[(0,ae.wk)()],key:"_isLoading",value:function(){return!1}},{kind:"field",decorators:[(0,ae.wk)()],key:"_stateHistory",value:void 0},{kind:"field",key:"_mungedStateHistory",value:void 0},{kind:"field",decorators:[(0,ae.wk)()],key:"_statisticsHistory",value:void 0},{kind:"field",decorators:[(0,ae.wk)()],key:"_showBack",value:void 0},{kind:"field",decorators:[(0,ae.P)("state-history-charts")],key:"_stateHistoryCharts",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"field",key:"_interval",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,m.A)(a,"connectedCallback",this,3)([]),this.hasUpdated&&this._getHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,m.A)(a,"disconnectedCallback",this,3)([]),this._unsubscribeHistory()}},{kind:"method",key:"_goBack",value:function(){history.back()}},{kind:"method",key:"render",value:function(){var e=this._getEntityIds().length>0;return(0,re.qy)(Se||(Se=(0,u.A)([" <ha-top-app-bar-fixed> ",' <div slot="title">',"</div> ",' <ha-button-menu slot="actionItems" @action="','"> <ha-icon-button slot="trigger" .label="','" .path="','"></ha-icon-button> <ha-list-item graphic="icon" .disabled="','"> ',' <ha-svg-icon slot="graphic" .path="','"></ha-svg-icon> </ha-list-item> <ha-list-item graphic="icon" .disabled="','"> ',' <ha-svg-icon slot="graphic" .path="','"></ha-svg-icon> </ha-list-item> </ha-button-menu> <div class="flex content"> <div class="filters"> <ha-date-range-picker .hass="','" ?disabled="','" .startDate="','" .endDate="','" extendedPresets @change="','"></ha-date-range-picker> <ha-target-picker .hass="','" .value="','" .disabled="','" addOnTop @value-changed="','"></ha-target-picker> </div> '," </div> </ha-top-app-bar-fixed> "])),this._showBack?(0,re.qy)(He||(He=(0,u.A)([' <ha-icon-button-arrow-prev slot="navigationIcon" @click="','"></ha-icon-button-arrow-prev> '])),this._goBack):(0,re.qy)(Le||(Le=(0,u.A)([' <ha-menu-button slot="navigationIcon" .hass="','" .narrow="','"></ha-menu-button> '])),this.hass,this.narrow),this.hass.localize("panel.history"),e?(0,re.qy)(Ce||(Ce=(0,u.A)([' <ha-icon-button slot="actionItems" @click="','" .disabled="','" .path="','" .label="','"></ha-icon-button> '])),this._removeAll,this._isLoading,"M14.76,20.83L17.6,18L14.76,15.17L16.17,13.76L19,16.57L21.83,13.76L23.24,15.17L20.43,18L23.24,20.83L21.83,22.24L19,19.4L16.17,22.24L14.76,20.83M12,12V19.88C12.04,20.18 11.94,20.5 11.71,20.71C11.32,21.1 10.69,21.1 10.3,20.71L8.29,18.7C8.06,18.47 7.96,18.16 8,17.87V12H7.97L2.21,4.62C1.87,4.19 1.95,3.56 2.38,3.22C2.57,3.08 2.78,3 3,3V3H17V3C17.22,3 17.43,3.08 17.62,3.22C18.05,3.56 18.13,4.19 17.79,4.62L12.03,12H12Z",this.hass.localize("ui.panel.history.remove_all")):"",this._handleMenuAction,this.hass.localize("ui.common.menu"),"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",this._isLoading,this.hass.localize("ui.panel.history.download_data"),"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",this._isLoading,this.hass.localize("ui.panel.history.add_card"),"M18 15V18H15V20H18V23H20V20H23V18H20V15H18M13.3 21H5C3.9 21 3 20.1 3 19V5C3 3.9 3.9 3 5 3H19C20.1 3 21 3.9 21 5V13.3C20.4 13.1 19.7 13 19 13C17.9 13 16.8 13.3 15.9 13.9L14.5 12L11 16.5L8.5 13.5L5 18H13.1C13 18.3 13 18.7 13 19C13 19.7 13.1 20.4 13.3 21Z",this.hass,this._isLoading,this._startDate,this._endDate,this._dateRangeChanged,this.hass,this._targetPickerValue,this._isLoading,this._targetsChanged,this._isLoading?(0,re.qy)(Oe||(Oe=(0,u.A)(['<div class="progress-wrapper"> <ha-circular-progress indeterminate></ha-circular-progress> </div>']))):e?(0,re.qy)(ze||(ze=(0,u.A)([' <state-history-charts .hass="','" .historyData="','" .startTime="','" .endTime="','"> </state-history-charts> '])),this.hass,this._mungedStateHistory,this._startDate,this._endDate):(0,re.qy)(Pe||(Pe=(0,u.A)(['<div class="start-search"> '," </div>"])),this.hass.localize("ui.panel.history.start_search")))}},{kind:"method",key:"mergeHistoryResults",value:function(e,t){var n,i=Object.assign(Object.assign({},t),{},{line:[]}),r={},a=(0,d.A)(t.line);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=(0,me.qc)(o.unit,o.device_class,!0);s&&(r[s]={historyItem:o})}}catch(A){a.e(A)}finally{a.f()}var c,u=(0,d.A)(e.line);try{for(u.s();!(c=u.n()).done;){var h=c.value,f=(0,me.qc)(h.unit,h.device_class,!0);f&&(f in r?r[f].ltsItem=h:r[f]={ltsItem:h})}}catch(A){u.e(A)}finally{u.f()}for(var p=0,v=Object.values(r);p<v.length;p++){var g=v[p],m=g.historyItem,k=g.ltsItem;if(m&&k){var y,_=Object.assign(Object.assign({},m),{},{data:[]}),b=new Set([].concat((0,l.A)(m.data.map((function(e){return e.entity_id}))),(0,l.A)(k.data.map((function(e){return e.entity_id}))))),x=(0,d.A)(b);try{var w=function(){var e,t=y.value,n=m.data.find((function(e){return e.entity_id===t})),i=k.data.find((function(e){return e.entity_id===t}));if(!n||!i)return _.data.push(n||i),1;var r,a=(null===(e=n.states[0])||void 0===e?void 0:e.last_changed)||i.statistics[i.statistics.length-1].last_changed+1,o=[],s=(0,d.A)(i.statistics);try{for(s.s();!(r=s.n()).done;){var c=r.value;if(c.last_changed>=a)break;o.push(c)}}catch(A){s.e(A)}finally{s.f()}_.data.push(0===o.length?n:Object.assign(Object.assign({},n),{},{statistics:o}))};for(x.s();!(y=x.n()).done;)w()}catch(A){x.e(A)}finally{x.f()}i.line.push(_)}else i.line.push(m||k)}return i}},{kind:"method",key:"willUpdate",value:function(e){if((0,m.A)(a,"willUpdate",this,3)([e]),(e.has("_stateHistory")||e.has("_statisticsHistory")||e.has("_startDate")||e.has("_endDate")||e.has("_targetPickerValue"))&&(this._statisticsHistory&&this._stateHistory?this._mungedStateHistory=this.mergeHistoryResults(this._statisticsHistory,this._stateHistory):this._mungedStateHistory=this._stateHistory||this._statisticsHistory),!this.hasUpdated){var t=(0,he.px)(),n=t.entity_id,i=t.device_id,r=t.area_id,o=t.floor_id,s=t.label_id;if((n||i||r||o||s)&&(this._targetPickerValue={}),n){var c=n.split(",");this._targetPickerValue.entity_id=c}if(i){var l=i.split(",");this._targetPickerValue.device_id=l}if(r){var d=r.split(",");this._targetPickerValue.area_id=d}if(o){var u=o.split(",");this._targetPickerValue.floor_id=u}if(s){var h=s.split(",");this._targetPickerValue.label_id=h}var f=t.start_date;f&&(this._startDate=new Date(f));var p=t.end_date;p&&(this._endDate=new Date(p))}}},{kind:"method",key:"firstUpdated",value:function(e){(0,m.A)(a,"firstUpdated",this,3)([e]),"1"===(0,he.px)().back&&history.length>1&&(this._showBack=!0,(0,de.o)((0,ue.Z)((0,he.s8)("back")),{replace:!0}))}},{kind:"method",key:"updated",value:function(e){(e.has("_startDate")||e.has("_endDate")||e.has("_targetPickerValue")||!this._stateHistory&&(e.has("_deviceEntityLookup")||e.has("_areaEntityLookup")||e.has("_areaDeviceLookup")))&&(this._getHistory(),this._getStats())}},{kind:"method",key:"_removeAll",value:function(){this._targetPickerValue={},this._updatePath()}},{kind:"method",key:"_getStats",value:(r=(0,c.A)((0,o.A)().mark((function e(){var t,n,i,r,a,c,l;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(n=this._getEntityIds()).length){e.next=4;break}return this._statisticsHistory=void 0,e.abrupt("return");case 4:return e.next=6,(0,ke.sz)(this.hass,this._startDate,this._endDate,n,"hour",void 0,["mean","state"]);case 6:return i=e.sent,r={},n.forEach((function(e){e in i&&(r[e]=i[e])})),a={},Object.entries(r).forEach((function(e){var t=(0,s.A)(e,2),n=t[0],i=t[1].map((function(e){return{s:null!=e.mean?e.mean.toString():e.state.toString(),lc:e.start/1e3,a:{},lu:e.start/1e3}}));a[n]=i})),e.next=13,(0,_e.KL)(this.hass);case 13:c=e.sent,l=c.numeric_device_classes,this._statisticsHistory=(0,me.Mm)(this.hass,a,[],this.hass.localize,l,!0,!0),((null===(t=this._statisticsHistory)||void 0===t?void 0:t.line)||[]).forEach((function(e){e.data.forEach((function(e){e.statistics=e.states,e.states=[]}))}));case 17:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{kind:"method",key:"_getHistory",value:(i=(0,c.A)((0,o.A)().mark((function e(){var t,n,i,r,a=this;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=this._getEntityIds()).length){e.next=4;break}return this._stateHistory=void 0,e.abrupt("return");case 4:return this._isLoading=!0,this._subscribed&&this._unsubscribeHistory(),n=new Date,e.next=9,(0,_e.KL)(this.hass);case 9:i=e.sent,r=i.numeric_device_classes,this._subscribed=(0,me.Jo)(this.hass,(function(e){a._isLoading=!1,a._stateHistory=(0,me.Mm)(a.hass,e,t,a.hass.localize,r,!0)}),this._startDate,this._endDate,t),this._subscribed.catch((function(){a._isLoading=!1,a._unsubscribeHistory()})),this._endDate>n&&this._setRedrawTimer();case 14:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"_setRedrawTimer",value:function(){var e=this;clearInterval(this._interval);var t=new Date,n=this._endDate>t?t:this._endDate,i=(0,ie.M)(n,this._startDate);this._interval=window.setInterval((function(){var t;return null===(t=e._stateHistoryCharts)||void 0===t?void 0:t.requestUpdate()}),i<2?1e4:i<10?6e4:fe.p)}},{kind:"method",key:"_unsubscribeHistory",value:function(){this._interval&&(clearInterval(this._interval),this._interval=void 0),this._subscribed&&(this._subscribed.then((function(e){return null==e?void 0:e()})),this._subscribed=void 0)}},{kind:"method",key:"_getEntityIds",value:function(){return this.__getEntityIds(this._targetPickerValue,this.hass.entities,this.hass.devices,this.hass.areas)}},{kind:"field",key:"__getEntityIds",value:function(){var e=this;return(0,oe.A)((function(t,n,i,r){if(!t)return[];var a={target:{}},o=new Set((0,se.e)(t.entity_id)),s=new Set((0,se.e)(t.device_id)),c=new Set((0,se.e)(t.area_id)),l=new Set((0,se.e)(t.floor_id));return new Set((0,se.e)(t.label_id)).forEach((function(t){var l=(0,ye.m0)(e.hass,t,r,i,n,a);l.devices.forEach((function(e){return s.add(e)})),l.entities.forEach((function(e){return o.add(e)})),l.areas.forEach((function(e){return c.add(e)}))})),l.forEach((function(t){(0,ye.MH)(e.hass,t,r,a).areas.forEach((function(e){return c.add(e)}))})),c.forEach((function(t){var r=(0,ye.bZ)(e.hass,t,i,n,a);r.devices.forEach((function(e){return s.add(e)})),r.entities.forEach((function(e){return o.add(e)}))})),s.forEach((function(t){(0,ye._7)(e.hass,t,n,a).entities.forEach((function(e){return o.add(e)}))})),Array.from(o)}))}},{kind:"method",key:"_dateRangeChanged",value:function(e){this._startDate=e.detail.startDate;var t=e.detail.endDate;0===t.getHours()&&0===t.getMinutes()&&(t.setDate(t.getDate()+1),t.setMilliseconds(t.getMilliseconds()-1)),this._endDate=t,this._updatePath()}},{kind:"method",key:"_targetsChanged",value:function(e){this._targetPickerValue=e.detail.value||{},this._updatePath()}},{kind:"method",key:"_updatePath",value:function(){var e={};this._targetPickerValue.entity_id&&(e.entity_id=(0,se.e)(this._targetPickerValue.entity_id).join(",")),this._targetPickerValue.label_id&&(e.label_id=(0,se.e)(this._targetPickerValue.label_id).join(",")),this._targetPickerValue.floor_id&&(e.floor_id=(0,se.e)(this._targetPickerValue.floor_id).join(",")),this._targetPickerValue.area_id&&(e.area_id=(0,se.e)(this._targetPickerValue.area_id).join(",")),this._targetPickerValue.device_id&&(e.device_id=(0,se.e)(this._targetPickerValue.device_id).join(",")),this._startDate&&(e.start_date=this._startDate.toISOString()),this._endDate&&(e.end_date=this._endDate.toISOString()),(0,de.o)("/history?".concat((0,he.KH)(e)),{replace:!0})}},{kind:"method",key:"_handleMenuAction",value:(n=(0,c.A)((0,o.A)().mark((function e(t){return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.detail.index,e.next=0===e.t0?3:1===e.t0?5:7;break;case 3:return this._downloadHistory(),e.abrupt("break",7);case 5:return this._suggestCard(),e.abrupt("break",7);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{kind:"method",key:"_downloadHistory",value:function(){if(0!==(0,l.A)(this._getEntityIds()).sort().length&&this._mungedStateHistory){var e,t=[""],n=["entity_id","state","last_changed"],i=new Set,r={climate:{current_temperature:0,hvac_action:0,target_temp_high:0,target_temp_low:0,temperature:0},humidifier:{action:0,current_humidity:0,humidity:0},water_heater:{current_temperature:0,operation_mode:0,temperature:0}},a=function(e){return new Date(e).toISOString()},o=(0,d.A)(this._mungedStateHistory.line);try{for(o.s();!(e=o.n()).done;){var c,u=e.value,h=(0,d.A)(u.data);try{for(h.s();!(c=h.n()).done;){var f=c.value,p=f.entity_id,v=(0,le.m)(p),g=r[v];if(g&&!i.has(v)){i.add(v);for(var m=n.length,k=0,y=Object.keys(g);k<y.length;k++){var _=y[k];n.push(_),g[_]=m,m+=1}}if(f.statistics){var b,x=(0,d.A)(f.statistics);try{for(x.s();!(b=x.n()).done;){var w=b.value;t.push("".concat(p,",").concat(w.state,",").concat(a(w.last_changed),"\n"))}}catch(U){x.e(U)}finally{x.f()}}var A,D=(0,d.A)(f.states);try{for(D.s();!(A=D.n()).done;){var M=A.value,S=a(M.last_changed),H=[p,M.state,S];if(M.attributes&&g)for(var L=M.attributes,C=0,O=Object.entries(g);C<O.length;C++){var P=(0,s.A)(O[C],2),z=P[0],E=P[1];z in L&&(H[E]=L[z])}t.push(H.join(",")+"\n")}}catch(U){D.e(U)}finally{D.f()}}}catch(U){h.e(U)}finally{h.f()}}}catch(U){o.e(U)}finally{o.f()}var V,j=(0,d.A)(this._mungedStateHistory.timeline);try{for(j.s();!(V=j.n()).done;){var I,T=V.value,Z=T.entity_id,R=(0,d.A)(T.data);try{for(R.s();!(I=R.n()).done;){var B=I.value,N=/,|"/.test(B.state)?'"'.concat(B.state.replaceAll('"','""'),'"'):B.state;t.push("".concat(Z,",").concat(N,",").concat(a(B.last_changed),"\n"))}}catch(U){R.e(U)}finally{R.f()}}}catch(U){j.e(U)}finally{j.f()}t[0]=n.join(",")+"\n";var F=new Blob(t,{type:"text/csv"}),q=window.URL.createObjectURL(F);(0,we.R)(q,"history.csv")}else(0,be.showAlertDialog)(this,{title:this.hass.localize("ui.panel.history.download_data_error"),text:this.hass.localize("ui.panel.history.error_no_data"),warning:!0})}},{kind:"method",key:"_suggestCard",value:function(){var e=this._getEntityIds();if(0!==e.length&&this._mungedStateHistory){var t=Math.min(this._endDate.getTime(),Date.now()),n=[{title:this.hass.localize("panel.history"),type:"history-graph",hours_to_show:Math.round((t-this._startDate.getTime())/1e3/60/60),entities:e}];(0,Ae.Q)(this,this.hass,n,{title:this.hass.localize("panel.history"),cards:n},e)}else(0,be.showAlertDialog)(this,{title:this.hass.localize("ui.panel.history.add_card_error"),text:this.hass.localize("ui.panel.history.error_no_data"),warning:!0})}},{kind:"get",static:!0,key:"styles",value:function(){return[xe.RF,(0,re.AH)(Ee||(Ee=(0,u.A)([".content{padding:0 16px 16px;padding-bottom:max(env(safe-area-inset-bottom),16px)}:host([virtualize]){height:100%}.progress-wrapper{position:relative;display:flex;align-items:center;flex-direction:column;padding:16px}.filters{display:flex;align-items:flex-start;margin-top:16px}ha-date-range-picker{margin-right:16px;margin-inline-end:16px;margin-inline-start:initial;max-width:100%;direction:var(--direction)}@media all and (max-width:1025px){.filters{flex-direction:column}ha-date-range-picker{margin-right:0;margin-inline-end:0;margin-inline-start:initial;width:100%}}.start-search{padding-top:16px;text-align:center;color:var(--secondary-text-color)}"])))]}}]}}),re.WF),customElements.define("ha-panel-history",Ve),a(),e.next=147;break;case 144:e.prev=144,e.t2=e.catch(0),a(e.t2);case 147:case"end":return e.stop()}}),e,null,[[0,144]])})));return function(t,n){return e.apply(this,arguments)}}())},7950:function(e,t,n){n.d(t,{Q:function(){return u}});var i=n(33994),r=n(64782),a=n(22858),o=(n(13025),n(39790),n(253),n(2075),n(50118)),s=n(57216),c=n(6121),l=n(84048),d=n(45111),u=function(){var e=(0,a.A)((0,i.A)().mark((function e(t,n,u,h,f){var p,v,g,m,k,y,_,b,x,w;return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loadFragmentTranslation("lovelace"),e.next=3,(0,s.SJ)(n);case 3:if(g=e.sent,m=g.filter((function(e){return"storage"===e.mode})),"storage"===(k=null===(p=n.panels.lovelace)||void 0===p||null===(p=p.config)||void 0===p?void 0:p.mode)||m.length){e.next=9;break}return(0,l.Q)(t,{cardConfig:u,entities:f,yaml:!0}),e.abrupt("return");case 9:if(_=null,"storage"!==k){e.next=19;break}return e.prev=11,e.next=14,(0,o.Dz)(n.connection,null,!1);case 14:y=e.sent,e.next=19;break;case 17:e.prev=17,e.t0=e.catch(11);case 19:if(y||!m.length){e.next=45;break}b=(0,r.A)(m),e.prev=21,b.s();case 23:if((x=b.n()).done){e.next=37;break}return w=x.value,e.prev=25,e.next=28,(0,o.Dz)(n.connection,w.url_path,!1);case 28:return y=e.sent,_=w.url_path,e.abrupt("break",37);case 33:e.prev=33,e.t1=e.catch(25);case 35:e.next=23;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(21),b.e(e.t2);case 42:return e.prev=42,b.f(),e.finish(42);case 45:if(y){e.next=48;break}return g.length>m.length?(0,l.Q)(t,{cardConfig:u,sectionConfig:h,entities:f,yaml:!0}):(0,c.showAlertDialog)(t,{text:"You don't seem to be in control of any dashboard, please take control first."}),e.abrupt("return");case 48:if(m.length||null!==(v=y.views)&&void 0!==v&&v.length){e.next=51;break}return(0,c.showAlertDialog)(t,{text:"You don't have any Lovelace views, first create a view in Lovelace."}),e.abrupt("return");case 51:if(m.length||1!==y.views.length){e.next=54;break}return(0,l.Q)(t,{cardConfig:u,sectionConfig:h,lovelaceConfig:y,saveConfig:function(){var e=(0,a.A)((0,i.A)().mark((function e(t){return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,o.ql)(n,null,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(n.localize("ui.panel.lovelace.add_entities.saving_failed"));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),path:[0],entities:f}),e.abrupt("return");case 54:(0,d.X)(t,{lovelaceConfig:y,urlPath:_,allowDashboardChange:!0,actionLabel:n.localize("ui.common.next"),dashboards:g,viewSelectedCallback:function(e,r,s){var c;(0,l.Q)(t,{cardConfig:u,sectionConfig:h,lovelaceConfig:r,saveConfig:(c=(0,a.A)((0,i.A)().mark((function t(r){return(0,i.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,o.ql)(n,e,r);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),alert(n.localize("ui.panel.lovelace.add_entities.saving_failed"));case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),function(e){return c.apply(this,arguments)}),path:[s],entities:f})}});case 55:case"end":return e.stop()}}),e,null,[[11,17],[21,39,42,45],[25,33]])})));return function(t,n,i,r,a){return e.apply(this,arguments)}}()},84048:function(e,t,n){n.d(t,{Q:function(){return a}});n(95737),n(39790),n(66457),n(99019),n(96858);var i=n(34897),r=function(){return Promise.all([n.e(24500),n.e(70252),n.e(99196),n.e(72915),n.e(65082),n.e(51431),n.e(49054),n.e(81625),n.e(73767),n.e(17590),n.e(89134),n.e(8075),n.e(9421),n.e(57641),n.e(24014),n.e(82765),n.e(97243),n.e(73789),n.e(41511)]).then(n.bind(n,80675))},a=function(e,t){(0,i.r)(e,"show-dialog",{dialogTag:"hui-dialog-suggest-card",dialogImport:r,dialogParams:t})}},45111:function(e,t,n){n.d(t,{X:function(){return r}});n(95737),n(39790),n(66457),n(99019),n(96858);var i=n(34897),r=function(e,t){(0,i.r)(e,"show-dialog",{dialogTag:"hui-dialog-select-view",dialogImport:function(){return Promise.all([n.e(10963),n.e(14691),n.e(24500),n.e(3051),n.e(53779)]).then(n.bind(n,53779))},dialogParams:t})}},30489:function(e,t,n){n.d(t,{R:function(){return i}});var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=document.createElement("a");n.target="_blank",n.href=e,n.download=t,document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click")),document.body.removeChild(n)}},25517:function(e,t,n){var i=n(18816),r=n(56674),a=n(1370),o=n(36810);e.exports=function(e,t){t&&"string"==typeof e||r(e);var n=o(e);return a(r(void 0!==n?i(n,e):e))}},32283:function(e){e.exports=Math.sign||function(e){var t=+e;return 0===t||t!=t?t:t<0?-1:1}},84251:function(e,t,n){var i=n(41765),r=n(90840),a=n(95689),o=n(49940),s=n(36565),c=n(23974);i({target:"Array",proto:!0},{flatMap:function(e){var t,n=o(this),i=s(n);return a(e),(t=c(n,0)).length=r(t,n,n,i,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},89336:function(e,t,n){n(2586)("flatMap")},32137:function(e,t,n){var i=n(41765),r=n(18816),a=n(95689),o=n(56674),s=n(1370),c=n(25517),l=n(78211),d=n(91228),u=n(53982),h=l((function(){for(var e,t,n=this.iterator,i=this.mapper;;){if(t=this.inner)try{if(!(e=o(r(t.next,t.iterator))).done)return e.value;this.inner=null}catch(a){d(n,"throw",a)}if(e=o(r(this.next,n)),this.done=!!e.done)return;try{this.inner=c(i(e.value,this.counter++),!1)}catch(a){d(n,"throw",a)}}}));i({target:"Iterator",proto:!0,real:!0,forced:u},{flatMap:function(e){return o(this),a(e),new h(s(this),{mapper:e,inner:null})}})},92466:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(i,a){var o,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.d(t,{gP:function(){return o.z}}),o=n(20288),!(s=i([o])).then){e.next=11;break}return e.next=7,s;case 7:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=12;break;case 11:e.t0=s;case 12:o=e.t0[0],a(),e.next=19;break;case 16:e.prev=16,e.t2=e.catch(0),a(e.t2);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}())},91293:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(i,a){var o,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.d(t,{gP:function(){return o.gP}}),o=n(92466),!(s=i([o])).then){e.next=11;break}return e.next=7,s;case 7:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=12;break;case 11:e.t0=s;case 12:o=e.t0[0],a(),e.next=19;break;case 16:e.prev=16,e.t2=e.catch(0),a(e.t2);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}())},56180:function(e,t,n){n.d(t,{M:function(){return s}});var i=n(658),r=n(55473),a=n(52142),o=n(40086);function s(e,t,n){var s=(0,a.x)(null==n?void 0:n.in,e,t),c=(0,i.A)(s,2),l=(+c[0]-+c[1])/o.s0;return(0,r.u)(null==n?void 0:n.roundingMethod)(l)}}}]);
//# sourceMappingURL=470.loPiaSYFFyw.js.map