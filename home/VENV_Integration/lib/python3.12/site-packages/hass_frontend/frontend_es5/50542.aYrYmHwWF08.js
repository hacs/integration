"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[50542],{37456:function(e,t,n){n.d(t,{a:function(){return a}});var i=(0,n(58034).n)((function(e){history.replaceState({scrollPosition:e},"")}),300),a=function(e){return function(t){return{kind:"method",placement:"prototype",key:t.key,descriptor:{set:function(e){i(e),this["__".concat(String(t.key))]=e},get:function(){var e;return this["__".concat(String(t.key))]||(null===(e=history.state)||void 0===e?void 0:e.scrollPosition)},enumerable:!0,configurable:!0},finisher:function(n){var i=n.prototype.connectedCallback;n.prototype.connectedCallback=function(){var n=this;i.call(this);var a=this[t.key];a&&this.updateComplete.then((function(){var t=n.renderRoot.querySelector(e);t&&setTimeout((function(){t.scrollTop=a}),0)}))}}}}}},45395:function(e,t,n){var i,a,r,o=n(64599),s=n(35806),c=n(71008),l=n(62193),u=n(2816),d=n(27927),h=n(35890),f=(n(81027),n(46724)),v=n(38973),g=n(29818),y=n(15112),p=n(74005);(0,d.A)([(0,g.EM)("ha-fab")],(function(e,t){var n=function(t){function n(){var t;(0,c.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,l.A)(this,n,[].concat(a)),e(t),t}return(0,u.A)(n,t),(0,s.A)(n)}(t);return{F:n,d:[{kind:"method",key:"firstUpdated",value:function(e){(0,h.A)(n,"firstUpdated",this,3)([e]),this.style.setProperty("--mdc-theme-secondary","var(--primary-color)")}},{kind:"field",static:!0,key:"styles",value:function(){return[v.R,(0,y.AH)(i||(i=(0,o.A)([":host .mdc-fab--extended .mdc-fab__icon{margin-inline-start:-8px;margin-inline-end:12px;direction:var(--direction)}"]))),"rtl"===p.G.document.dir?(0,y.AH)(a||(a=(0,o.A)([":host .mdc-fab--extended .mdc-fab__icon{direction:rtl}"]))):(0,y.AH)(r||(r=(0,o.A)([""])))]}}]}}),f.n)},15625:function(e,t,n){n.d(t,{S_:function(){return s},Xd:function(){return c},lZ:function(){return l}});n(82386),n(95737),n(10507),n(39790),n(74268),n(24545),n(51855),n(82130),n(31743),n(22328),n(4959),n(62435),n(99019),n(253),n(54846),n(66555),n(96858);var i=["zone","persistent_notification"],a=function(e,t){var n,i,a,r,o,s,c,l;if("call-service"===t.action&&(null!==(n=t.target)&&void 0!==n&&n.entity_id||null!==(i=t.service_data)&&void 0!==i&&i.entity_id||null!==(a=t.data)&&void 0!==a&&a.entity_id)){var u=null!==(r=null!==(o=null===(s=t.service_data)||void 0===s?void 0:s.entity_id)&&void 0!==o?o:null===(c=t.data)||void 0===c?void 0:c.entity_id)&&void 0!==r?r:null===(l=t.target)||void 0===l?void 0:l.entity_id;Array.isArray(u)||(u=[u]);for(var d=0,h=u;d<h.length;d++){var f=h[d];e.add(f)}}},r=function(e,t){"string"!=typeof t?(t.entity&&e.add(t.entity),t.camera_image&&e.add(t.camera_image),t.tap_action&&a(e,t.tap_action),t.hold_action&&a(e,t.hold_action)):e.add(t)},o=function(e,t){t.entity&&r(e,t.entity),t.entities&&Array.isArray(t.entities)&&t.entities.forEach((function(t){return r(e,t)})),t.card&&o(e,t.card),t.cards&&Array.isArray(t.cards)&&t.cards.forEach((function(t){return o(e,t)})),t.elements&&Array.isArray(t.elements)&&t.elements.forEach((function(t){return o(e,t)})),t.badges&&Array.isArray(t.badges)&&t.badges.forEach((function(t){return r(e,t)}))},s=function(e){var t=new Set;return e.views.forEach((function(e){return o(t,e)})),t},c=function(e,t){for(var n=new Set,a=0,r=Object.keys(e.states);a<r.length;a++){var o=r[a];t.has(o)||i.includes(o.split(".",1)[0])||n.add(o)}return n},l=function(e,t){var n=s(t);return c(e,n)}},4790:function(e,t,n){var i=n(22858).A,a=n(33994).A;n.a(e,function(){var e=i(a().mark((function e(t,i){var r,o,s,c,l,u,d,h,f,v,g,y,p,m,b,k,A,_,E,w;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=n(64599),o=n(35806),s=n(71008),c=n(62193),l=n(2816),u=n(27927),d=n(81027),h=n(50693),f=n(15112),v=n(29818),g=n(94100),y=n(34897),n(28664),n(12675),p=n(13740),!(m=t([p])).then){e.next=26;break}return e.next=22,m;case 22:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=27;break;case 26:e.t0=m;case 27:p=e.t0[0],(0,u.A)([(0,v.EM)("hui-entity-picker-table")],(function(e,t){var n=function(t){function n(){var t;(0,s.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,c.A)(this,n,[].concat(a)),e(t),t}return(0,l.A)(n,t),(0,o.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,v.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,v.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,v.MZ)({type:Boolean,attribute:"no-label-float"})],key:"noLabelFloat",value:function(){return!1}},{kind:"field",decorators:[(0,v.MZ)({type:Array})],key:"entities",value:void 0},{kind:"method",key:"render",value:function(){return(0,f.qy)(b||(b=(0,r.A)([' <ha-data-table .hass="','" selectable .id="','" .columns="','" .data="','" .searchLabel="','" .noLabelFloat="','" .noDataText="','" @selection-changed="','"></ha-data-table> '])),this.hass,"entity_id",this._columns(this.narrow),this.entities,this.hass.localize("ui.panel.lovelace.unused_entities.search"),this.noLabelFloat,this.hass.localize("ui.panel.lovelace.unused_entities.no_data"),this._handleSelectionChanged)}},{kind:"field",key:"_columns",value:function(){var e=this;return(0,g.A)((function(t){var n={icon:{title:"",label:e.hass.localize("ui.panel.lovelace.unused_entities.state_icon"),type:"icon",template:function(t){return(0,f.qy)(k||(k=(0,r.A)([' <state-badge @click="','" .hass="','" .stateObj="','"></state-badge> '])),e._handleEntityClicked,e.hass,t.stateObj)}},name:{title:e.hass.localize("ui.panel.lovelace.unused_entities.entity"),sortable:!0,filterable:!0,flex:2,main:!0,direction:"asc",template:function(n){return(0,f.qy)(A||(A=(0,r.A)([' <div @click="','" style="cursor:pointer"> '," "," </div> "])),e._handleEntityClicked,n.name,t?(0,f.qy)(_||(_=(0,r.A)([' <div class="secondary">',"</div> "])),n.entity_id):"")}}};return n.entity_id={title:e.hass.localize("ui.panel.lovelace.unused_entities.entity_id"),sortable:!0,filterable:!0,hidden:t},n.domain={title:e.hass.localize("ui.panel.lovelace.unused_entities.domain"),sortable:!0,filterable:!0,hidden:t},n.last_changed={title:e.hass.localize("ui.panel.lovelace.unused_entities.last_changed"),type:"numeric",sortable:!0,hidden:t,template:function(t){return(0,f.qy)(E||(E=(0,r.A)([' <ha-relative-time .hass="','" .datetime="','" capitalize></ha-relative-time> '])),e.hass,t.last_changed)}},n}))}},{kind:"method",key:"_handleSelectionChanged",value:function(e){var t=e.detail.value;(0,y.r)(this,"selected-changed",{selectedEntities:t})}},{kind:"method",key:"_handleEntityClicked",value:function(e){var t=e.target.closest(".mdc-data-table__row").rowId;(0,y.r)(this,"hass-more-info",{entityId:t})}},{kind:"get",static:!0,key:"styles",value:function(){return(0,f.AH)(w||(w=(0,r.A)(["ha-data-table{--data-table-border-width:0;height:100%}"])))}}]}}),f.WF),i(),e.next=35;break;case 32:e.prev=32,e.t2=e.catch(0),i(e.t2);case 35:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(t,n){return e.apply(this,arguments)}}())},84048:function(e,t,n){n.d(t,{Q:function(){return r}});n(95737),n(39790),n(66457),n(99019),n(96858);var i=n(34897),a=function(){return Promise.all([n.e(24500),n.e(70252),n.e(99196),n.e(72915),n.e(65082),n.e(51431),n.e(49054),n.e(81625),n.e(73767),n.e(17590),n.e(89134),n.e(8075),n.e(9421),n.e(57641),n.e(24014),n.e(82765),n.e(97243),n.e(73789),n.e(41511)]).then(n.bind(n,80675))},r=function(e,t){(0,i.r)(e,"show-dialog",{dialogTag:"hui-dialog-suggest-card",dialogImport:a,dialogParams:t})}},45111:function(e,t,n){n.d(t,{X:function(){return a}});n(95737),n(39790),n(66457),n(99019),n(96858);var i=n(34897),a=function(e,t){(0,i.r)(e,"show-dialog",{dialogTag:"hui-dialog-select-view",dialogImport:function(){return Promise.all([n.e(10963),n.e(14691),n.e(24500),n.e(3051),n.e(53779)]).then(n.bind(n,53779))},dialogParams:t})}},45559:function(e,t,n){var i=n(22858).A,a=n(33994).A;n.a(e,function(){var e=i(a().mark((function e(i,r){var o,s,c,l,u,d,h,f,v,g,y,p,m,b,k,A,_,E,w,C,x,S,M,z,T,L,P,H;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.r(t),n.d(t,{HuiUnusedEntities:function(){return H}}),o=n(41981),s=n(64599),c=n(35806),l=n(71008),u=n(62193),d=n(2816),h=n(27927),f=n(35890),v=n(81027),g=n(97741),y=n(33231),p=n(16891),m=n(15112),b=n(29818),k=n(85323),A=n(213),_=n(19244),n(45395),n(88400),E=n(15625),w=n(4790),C=n(84048),x=n(45111),S=n(45657),!(M=i([w])).then){e.next=39;break}return e.next=35,M;case 35:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=40;break;case 39:e.t0=M;case 40:w=e.t0[0],H=(0,h.A)([(0,b.EM)("hui-unused-entities")],(function(e,t){var n=function(t){function n(){var t;(0,l.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,u.A)(this,n,[].concat(a)),e(t),t}return(0,d.A)(n,t),(0,c.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,b.MZ)({attribute:!1})],key:"lovelace",value:void 0},{kind:"field",decorators:[(0,b.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,b.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,b.wk)()],key:"_unusedEntities",value:function(){return[]}},{kind:"field",decorators:[(0,b.wk)()],key:"_selectedEntities",value:function(){return[]}},{kind:"get",key:"_config",value:function(){return this.lovelace.config}},{kind:"method",key:"updated",value:function(e){(0,f.A)(n,"updated",this,3)([e]),e.has("lovelace")&&this._getUnusedEntities()}},{kind:"method",key:"render",value:function(){var e=this;return this.hass&&this.lovelace?"storage"===this.lovelace.mode&&!1===this.lovelace.editMode?m.s6:(0,m.qy)(z||(z=(0,s.A)([' <div class="container"> ',' <hui-entity-picker-table .hass="','" .narrow="','" .entities="','" @selected-changed="','"></hui-entity-picker-table> </div> <div class="fab ','"> <ha-fab .label="','" extended @click="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> </ha-fab> </div> '])),this.narrow?"":(0,m.qy)(T||(T=(0,s.A)([' <ha-card header="','"> <div class="card-content"> '," "," </div> </ha-card> "])),this.hass.localize("ui.panel.lovelace.unused_entities.title"),this.hass.localize("ui.panel.lovelace.unused_entities.available_entities"),"storage"===this.lovelace.mode?(0,m.qy)(L||(L=(0,s.A)([" <br>"," "])),this.hass.localize("ui.panel.lovelace.unused_entities.select_to_add")):""),this.hass,this.narrow,this._unusedEntities.map((function(t){var n=e.hass.states[t];return{icon:"",entity_id:t,stateObj:n,name:n?(0,_.u)(n):"Unavailable",domain:(0,A.m)(t),last_changed:null==n?void 0:n.last_changed}})),this._handleSelectedChanged,(0,k.H)({selected:this._selectedEntities.length}),this.hass.localize("ui.panel.lovelace.editor.edit_card.add"),this._addToLovelaceView,"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"):m.s6}},{kind:"method",key:"_getUnusedEntities",value:function(){if(this.hass&&this.lovelace){this._selectedEntities=[];var e=(0,E.lZ)(this.hass,this._config);this._unusedEntities=(0,o.A)(e).sort()}}},{kind:"method",key:"_handleSelectedChanged",value:function(e){this._selectedEntities=e.detail.selectedEntities}},{kind:"method",key:"_addToLovelaceView",value:function(){var e=this,t=(0,S.Bi)(this.hass.states,this._selectedEntities,{}),n=(0,S.ZI)(this._selectedEntities,{});1!==this.lovelace.config.views.length?(0,x.X)(this,{lovelaceConfig:this.lovelace.config,allowDashboardChange:!1,viewSelectedCallback:function(i,a,r){(0,C.Q)(e,{lovelaceConfig:e.lovelace.config,saveConfig:e.lovelace.saveConfig,path:[r],entities:e._selectedEntities,cardConfig:t,sectionConfig:n})}}):(0,C.Q)(this,{lovelaceConfig:this.lovelace.config,saveConfig:this.lovelace.saveConfig,path:[0],entities:this._selectedEntities,cardConfig:t,sectionConfig:n})}},{kind:"get",static:!0,key:"styles",value:function(){return(0,m.AH)(P||(P=(0,s.A)([":host{background:var(--lovelace-background);overflow:hidden}.container{display:flex;flex-direction:column;height:100%}ha-card{--ha-card-box-shadow:none;--ha-card-border-radius:0}hui-entity-picker-table{flex-grow:1}.fab{position:sticky;float:var(--float-end);right:calc(16px + env(safe-area-inset-right));bottom:calc(16px + env(safe-area-inset-bottom));inset-inline-end:calc(16px + env(safe-area-inset-right));inset-inline-start:initial;z-index:1}ha-fab{position:relative;bottom:calc(-80px - env(safe-area-inset-bottom));transition:bottom .3s}.fab.selected ha-fab{bottom:0}"])))}}]}}),m.WF),r(),e.next=49;break;case 46:e.prev=46,e.t2=e.catch(0),r(e.t2);case 49:case"end":return e.stop()}}),e,null,[[0,46]])})));return function(t,n){return e.apply(this,arguments)}}())},6566:function(e,t,n){n(41765)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},36575:function(e,t,n){n.d(t,{LV:function(){return m}});var i=n(658),a=n(14842),r=n(82275),o=n(41981),s=n(64782),c=n(91001),l=(n(58975),n(42942),n(48062),n(71499),n(81027),n(48358),n(95737),n(79243),n(97741),n(46469),n(18193),n(50693),n(96434),n(33822),n(6566),n(26098),n(39790),n(66457),n(66385),n(13448),n(36016),n(64646),n(98185),n(7760),n(99019),n(15129),n(253),n(16891),n(37679),n(96858),Symbol("Comlink.proxy")),u=Symbol("Comlink.endpoint"),d=Symbol("Comlink.releaseProxy"),h=Symbol("Comlink.finalizer"),f=Symbol("Comlink.thrown"),v=function(e){return"object"===(0,c.A)(e)&&null!==e||"function"==typeof e},g=new Map([["proxy",{canHandle:function(e){return v(e)&&e[l]},serialize:function(e){var t=new MessageChannel,n=t.port1,i=t.port2;return y(e,n),[i,[i]]},deserialize:function(e){return e.start(),m(e)}}],["throw",{canHandle:function(e){return v(e)&&f in e},serialize:function(e){var t=e.value;return[t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["*"];t.addEventListener("message",(function c(u){if(u&&u.data)if(function(e,t){var n,i=(0,s.A)(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(t===a||"*"===a)return!0;if(a instanceof RegExp&&a.test(t))return!0}}catch(r){i.e(r)}finally{i.f()}return!1}(n,u.origin)){var d,v=Object.assign({path:[]},u.data),g=v.id,m=v.type,b=v.path,k=(u.data.argumentList||[]).map(S);try{var A=b.slice(0,-1).reduce((function(e,t){return e[t]}),e),_=b.reduce((function(e,t){return e[t]}),e);switch(m){case"GET":d=_;break;case"SET":A[b.slice(-1)[0]]=S(u.data.value),d=!0;break;case"APPLY":d=_.apply(A,k);break;case"CONSTRUCT":var E;d=function(e){return Object.assign(e,(0,a.A)({},l,!0))}((0,r.A)(_,(0,o.A)(k)));break;case"ENDPOINT":var w=new MessageChannel,M=w.port1,z=w.port2;y(e,z),d=function(e,t){return C.set(e,t),e}(M,[M]);break;case"RELEASE":d=void 0;break;default:return}}catch(E){d=(0,a.A)({value:E},f,0)}Promise.resolve(d).catch((function(e){return(0,a.A)({value:e},f,0)})).then((function(n){var a=x(n),r=(0,i.A)(a,2),o=r[0],s=r[1];t.postMessage(Object.assign(Object.assign({},o),{id:g}),s),"RELEASE"===m&&(t.removeEventListener("message",c),p(t),h in e&&"function"==typeof e[h]&&e[h]())})).catch((function(e){var n=x((0,a.A)({value:new TypeError("Unserializable return value")},f,0)),r=(0,i.A)(n,2),o=r[0],s=r[1];t.postMessage(Object.assign(Object.assign({},o),{id:g}),s)}))}else console.warn("Invalid origin '".concat(u.origin,"' for comlink proxy"))})),t.start&&t.start()}function p(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function m(e,t){return E(e,[],t)}function b(e){if(e)throw new Error("Proxy has been released and is not useable")}function k(e){return M(e,{type:"RELEASE"}).then((function(){p(e)}))}var A=new WeakMap,_="FinalizationRegistry"in globalThis&&new FinalizationRegistry((function(e){var t=(A.get(e)||0)-1;A.set(e,t),0===t&&k(e)}));function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!1,a=new Proxy(arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},{get:function(i,r){if(b(n),r===d)return function(){!function(e){_&&_.unregister(e)}(a),k(e),n=!0};if("then"===r){if(0===t.length)return{then:function(){return a}};var s=M(e,{type:"GET",path:t.map((function(e){return e.toString()}))}).then(S);return s.then.bind(s)}return E(e,[].concat((0,o.A)(t),[r]))},set:function(a,r,s){b(n);var c=x(s),l=(0,i.A)(c,2),u=l[0],d=l[1];return M(e,{type:"SET",path:[].concat((0,o.A)(t),[r]).map((function(e){return e.toString()})),value:u},d).then(S)},apply:function(a,r,o){b(n);var s=t[t.length-1];if(s===u)return M(e,{type:"ENDPOINT"}).then(S);if("bind"===s)return E(e,t.slice(0,-1));var c=w(o),l=(0,i.A)(c,2),d=l[0],h=l[1];return M(e,{type:"APPLY",path:t.map((function(e){return e.toString()})),argumentList:d},h).then(S)},construct:function(a,r){b(n);var o=w(r),s=(0,i.A)(o,2),c=s[0],l=s[1];return M(e,{type:"CONSTRUCT",path:t.map((function(e){return e.toString()})),argumentList:c},l).then(S)}});return function(e,t){var n=(A.get(t)||0)+1;A.set(t,n),_&&_.register(e,t,e)}(a,e),a}function w(e){var t,n=e.map(x);return[n.map((function(e){return e[0]})),(t=n.map((function(e){return e[1]})),Array.prototype.concat.apply([],t))]}var C=new WeakMap;function x(e){var t,n=(0,s.A)(g);try{for(n.s();!(t=n.n()).done;){var a=(0,i.A)(t.value,2),r=a[0],o=a[1];if(o.canHandle(e)){var c=o.serialize(e),l=(0,i.A)(c,2);return[{type:"HANDLER",name:r,value:l[0]},l[1]]}}}catch(u){n.e(u)}finally{n.f()}return[{type:"RAW",value:e},C.get(e)||[]]}function S(e){switch(e.type){case"HANDLER":return g.get(e.name).deserialize(e.value);case"RAW":return e.value}}function M(e,t,n){return new Promise((function(i){var a=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===a&&(e.removeEventListener("message",t),i(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),n)}))}}}]);
//# sourceMappingURL=50542.aYrYmHwWF08.js.map