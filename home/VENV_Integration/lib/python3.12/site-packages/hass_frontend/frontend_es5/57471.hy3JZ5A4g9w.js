"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[57471],{96961:function(e,t,n){n.d(t,{JW:function(){return w},OW:function(){return y},PO:function(){return p},VN:function(){return l},XG:function(){return _},eB:function(){return m},gZ:function(){return h},hM:function(){return f},k2:function(){return u},lU:function(){return v},nc:function(){return g},vX:function(){return k},z1:function(){return d}});var r=n(33994),a=n(22858),i=(n(13025),n(44124),n(95737),n(97741),n(39790),n(9241),n(74268),n(24545),n(51855),n(82130),n(31743),n(22328),n(4959),n(62435),n(99019),n(253),n(2075),n(94438),n(16891),n(96858),n(16312)),s=n(10725),o=n(33922),c=n(23712),d=function(e){return e.THREAD="thread",e.WIFI="wifi",e.ETHERNET="ethernet",e.UNKNOWN="unknown",e}({}),u=function(e){var t;return null===(t=e.auth.external)||void 0===t?void 0:t.config.canCommissionMatter},l=function(){var e=(0,a.A)((0,r.A)().mark((function e(t){var n,a;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,o.x)(t,"thread")){e.next=16;break}return e.next=3,(0,c.sL)(t);case 3:if(n=e.sent,!(a=n.datasets.find((function(e){return e.preferred})))){e.next=16;break}return e.t0=t.auth.external,e.next=9,(0,c.dy)(t,a.dataset_id);case 9:return e.t1=e.sent.tlv,e.t2=a.preferred_border_agent_id,e.t3=a.preferred_extended_address,e.t4=a.extended_pan_id,e.t5={active_operational_dataset:e.t1,border_agent_id:e.t2,mac_extended_address:e.t3,extended_pan_id:e.t4},e.t6={type:"matter/commission",payload:e.t5},e.abrupt("return",e.t0.fireMessage.call(e.t0,e.t6));case 16:return e.abrupt("return",t.auth.external.fireMessage({type:"matter/commission"}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e,t){var n,r=(0,s.Ag)(e.connection,(function(e){if(n){var a=Object.values(e).filter((function(e){return e.identifiers.find((function(e){return"matter"===e[0]}))&&!n.has(e.id)}));a.length&&(r(),n=void 0,null==t||t(),(0,i.o)("/config/devices/device/".concat(a[0].id)))}else n=new Set(Object.values(e).filter((function(e){return e.identifiers.find((function(e){return"matter"===e[0]}))})).map((function(e){return e.id})))}));return function(){r(),n=void 0}},p=function(e,t){return e.callWS({type:"matter/commission",code:t})},_=function(e,t){return e.callWS({type:"matter/commission_on_network",pin:t})},v=function(e,t,n){return e.callWS({type:"matter/set_wifi_credentials",network_name:t,password:n})},h=function(e,t){return e.callWS({type:"matter/set_thread",thread_operation_dataset:t})},m=function(e,t){return e.callWS({type:"matter/node_diagnostics",device_id:t})},y=function(e,t){return e.callWS({type:"matter/ping_node",device_id:t})},g=function(e,t){return e.callWS({type:"matter/open_commissioning_window",device_id:t})},k=function(e,t,n){return e.callWS({type:"matter/remove_matter_fabric",device_id:t,fabric_index:n})},w=function(e,t){return e.callWS({type:"matter/interview_node",device_id:t})}},23712:function(e,t,n){n.d(t,{It:function(){return d},W4:function(){return l},dy:function(){return c},l1:function(){return f},rY:function(){return u},sL:function(){return o},wm:function(){return s}});var r=n(71008),a=n(35806),i=(n(9241),function(){return(0,a.A)((function e(){(0,r.A)(this,e),this.routers=void 0,this.routers={}}),[{key:"processEvent",value:function(e){return"router_discovered"===e.type?this.routers[e.key]=e.data:"router_removed"===e.type&&delete this.routers[e.key],Object.values(this.routers)}}])}()),s=function(e,t){var n=new i;return e.connection.subscribeMessage((function(e){return t(n.processEvent(e))}),{type:"thread/discover_routers"})},o=function(e){return e.callWS({type:"thread/list_datasets"})},c=function(e,t){return e.callWS({type:"thread/get_dataset_tlv",dataset_id:t})},d=function(e,t,n){return e.callWS({type:"thread/add_dataset_tlv",source:t,tlv:n})},u=function(e,t){return e.callWS({type:"thread/delete_dataset",dataset_id:t})},l=function(e,t){return e.callWS({type:"thread/set_preferred_dataset",dataset_id:t})},f=function(e,t,n,r){return e.callWS({type:"thread/set_preferred_border_agent",dataset_id:t,border_agent_id:n,extended_address:r})}},57471:function(e,t,n){n.r(t),n.d(t,{HaDeviceInfoMatter:function(){return x}});var r,a,i,s,o,c=n(64599),d=n(33994),u=n(22858),l=n(35806),f=n(71008),p=n(62193),_=n(2816),v=n(27927),h=n(35890),m=(n(81027),n(97741),n(16891),n(15112)),y=n(29818),g=(n(15720),n(96961)),k=(n(63893),n(13830),n(20712)),w=n(55321),x=(0,v.A)([(0,y.EM)("ha-device-info-matter")],(function(e,t){var n,v=function(t){function n(){var t;(0,f.A)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t=(0,p.A)(this,n,[].concat(a)),e(t),t}return(0,_.A)(n,t),(0,l.A)(n)}(t);return{F:v,d:[{kind:"field",decorators:[(0,y.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,y.MZ)({attribute:!1})],key:"device",value:void 0},{kind:"field",decorators:[(0,y.wk)()],key:"_nodeDiagnostics",value:void 0},{kind:"method",key:"willUpdate",value:function(e){(0,h.A)(v,"willUpdate",this,3)([e]),e.has("device")&&this._fetchNodeDetails()}},{kind:"method",key:"_fetchNodeDetails",value:(n=(0,u.A)((0,d.A)().mark((function e(){return(0,d.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.device){e.next=2;break}return e.abrupt("return");case 2:if(null===this.device.via_device_id){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,(0,g.eB)(this.hass,this.device.id);case 7:this._nodeDiagnostics=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),this._nodeDiagnostics=void 0;case 13:case"end":return e.stop()}}),e,this,[[4,10]])}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"render",value:function(){return this._nodeDiagnostics?(0,m.qy)(r||(r=(0,c.A)([' <ha-expansion-panel .header="','"> <div class="row"> <span class="name">',':</span> <span class="value">','</span> </div> <div class="row"> <span class="name">',':</span> <span class="value">','</span> </div> <div class="row"> <span class="name">',':</span> <span class="value">',"</span> </div> "," ",' <div class="row"> <span class="name">',':</span> <span class="value">',"</span> </div> </ha-expansion-panel> "])),this.hass.localize("ui.panel.config.matter.device_info.device_info"),this.hass.localize("ui.panel.config.matter.device_info.node_id"),this._nodeDiagnostics.node_id,this.hass.localize("ui.panel.config.matter.device_info.network_type"),this.hass.localize("ui.panel.config.matter.network_type.".concat(this._nodeDiagnostics.network_type)),this.hass.localize("ui.panel.config.matter.device_info.node_type"),this.hass.localize("ui.panel.config.matter.node_type.".concat(this._nodeDiagnostics.node_type)),this._nodeDiagnostics.network_name?(0,m.qy)(a||(a=(0,c.A)([' <div class="row"> <span class="name">',':</span> <span class="value">',"</span> </div> "])),this.hass.localize("ui.panel.config.matter.device_info.network_name"),this._nodeDiagnostics.network_name):m.s6,this._nodeDiagnostics.mac_address?(0,m.qy)(i||(i=(0,c.A)([' <div class="row"> <span class="name">',':</span> <span class="value">',"</span> </div> "])),this.hass.localize("ui.panel.config.matter.device_info.mac_address"),this._nodeDiagnostics.mac_address):m.s6,this.hass.localize("ui.panel.config.matter.device_info.ip_adresses"),this._nodeDiagnostics.ip_adresses.map((function(e){return(0,m.qy)(s||(s=(0,c.A)(["","<br>"])),e)}))):m.s6}},{kind:"get",static:!0,key:"styles",value:function(){return[w.RF,(0,m.AH)(o||(o=(0,c.A)(["h4{margin-bottom:4px}div{word-break:break-all;margin-top:2px}.row{display:flex;justify-content:space-between;padding-bottom:4px}.value{text-align:right}ha-expansion-panel{margin:8px -16px 0;--expansion-panel-summary-padding:0 16px;--expansion-panel-content-padding:0 16px;--ha-card-border-radius:0px}"])))]}}]}}),(0,k.E)(m.WF))}}]);
//# sourceMappingURL=57471.hy3JZ5A4g9w.js.map