"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[59173],{20712:function(t,e,n){n.d(e,{E:function(){return l}});var a=n(64782),r=n(35806),i=n(71008),s=n(62193),o=n(2816),c=n(27927),u=n(35890),d=(n(81027),n(82386),n(95737),n(39790),n(66457),n(36604),n(253),n(4525),n(96858),n(29818)),l=function(t){var e=(0,c.A)(null,(function(t,e){var n=function(e){function n(){var e;(0,i.A)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=(0,s.A)(this,n,[].concat(r)),t(e),e}return(0,o.A)(n,e),(0,r.A)(n)}(e);return{F:n,d:[{kind:"field",decorators:[(0,d.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,u.A)(n,"connectedCallback",this,3)([]),this.__checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,u.A)(n,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){var t=this.__unsubs.pop();t instanceof Promise?t.then((function(t){return t()})):t()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(t){if((0,u.A)(n,"updated",this,3)([t]),t.has("hass"))this.__checkSubscribed();else if(this.hassSubscribeRequiredHostProps){var e,r=(0,a.A)(t.keys());try{for(r.s();!(e=r.n()).done;){var i=e.value;if(this.hassSubscribeRequiredHostProps.includes(i))return void this.__checkSubscribed()}}catch(s){r.e(s)}finally{r.f()}}}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"__checkSubscribed",value:function(){var t,e=this;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(t=this.hassSubscribeRequiredHostProps)&&void 0!==t&&t.some((function(t){return void 0===e[t]}))||(this.__unsubs=this.hassSubscribe())}}]}}),t);return e}},23469:function(t,e,n){n.d(e,{g:function(){return i}});n(79641);var a=n(3254),r=n(92164);function i(t,e,n,i,s,o){var c=t.getPropertyValue(s+"-"+o).trim(),u=c.length>0?c:t.getPropertyValue(s).trim(),d=(0,a.RQ)(u);return 0===c.length&&o&&(d=(0,a.v2)((0,a.BE)(e?(0,r.T)((0,a.Nc)((0,a.xp)(d)),o):(0,r.d)((0,a.Nc)((0,a.xp)(d)),o)))),i?d+=n?"32":"7F":n&&(d+="7F"),d}},37334:function(t,e,n){var a=n(22858).A,r=n(33994).A;n.a(t,function(){var t=a(r().mark((function t(a,i){var s,o,c,u,d,l,h,f,p,v,k,g,b;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,b=function(t,e,n,a,r,i,s){var o=(0,u.c)(e,t),c=void 0!==i&&void 0!==s;if(c&&o<=35){var v=(0,d.M)(e,t),k=(0,d.M)(s,i);k>v?e=(0,l.L)(e,k-v):v>k&&(s=(0,l.L)(s,v-k))}var b={parsing:!1,animation:!1,interaction:{mode:"x"},scales:{x:{type:"time",suggestedMin:t.getTime(),max:g(o,e),adapters:{date:{locale:n,config:a}},ticks:{maxRotation:0,sampleSize:5,autoSkipPadding:20,font:function(t){return t.tick&&t.tick.major?{weight:"bold"}:{}}},time:{tooltipFormat:o>35?"monthyear":o>7?"date":o>2?"weekday":o>0?"datetime":"hour",minUnit:o>35?"month":o>2?"day":"hour"}},y:{stacked:!0,type:"linear",title:{display:!0,text:r},ticks:{beginAtZero:!0,callback:function(t){return(0,h.ZV)(Math.abs(t),n)}}}},plugins:{tooltip:{position:"nearest",filter:function(t){return"0"!==t.formattedValue},itemSort:function(t,e){return e.datasetIndex-t.datasetIndex},callbacks:{title:function(t){if(o>0)return t[0].label;var e=new Date(t[0].parsed.x);return"".concat(c?"".concat((0,f.sl)(e,n,a),": "):"").concat((0,p.fU)(e,n,a)," â€“ ").concat((0,p.fU)((0,l.L)(e,1),n,a))},label:function(t){return"".concat(t.dataset.label,": ").concat((0,h.ZV)(t.parsed.y,n)," ").concat(r)}}},filler:{propagate:!1},legend:{display:!1,labels:{usePointStyle:!0}}},elements:{bar:{borderWidth:1.5,borderRadius:4},point:{hitRadius:50}},locale:(0,h.Yf)(n)};return c&&(b.scales.xAxisCompare=Object.assign(Object.assign({},b.scales.x),{},{suggestedMin:i.getTime(),max:g(o,s),display:!1})),b},g=function(t,e){var n=new Date(e);return t>2&&0===n.getHours()&&(n=(0,c.O)(n,1)),n.setMinutes(0,0,0),t>35&&n.setDate(1),t>2&&n.setHours(0),n.getTime()},n.d(e,{o:function(){return b}}),s=n(81027),o=n(26098),c=n(22874),u=n(74312),d=n(56180),l=n(97405),h=n(57636),f=n(57289),p=n(41924),!(v=a([h,f,p])).then){t.next=23;break}return t.next=19,v;case 19:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=24;break;case 23:t.t0=v;case 24:k=t.t0,h=k[0],f=k[1],p=k[2],i(),t.next=34;break;case 31:t.prev=31,t.t2=t.catch(0),i(t.t2);case 34:case"end":return t.stop()}}),t,null,[[0,31]])})));return function(e,n){return t.apply(this,arguments)}}())},59173:function(t,e,n){var a=n(22858).A,r=n(33994).A;n.a(t,function(){var t=a(r().mark((function t(a,i){var s,o,c,u,d,l,h,f,p,v,k,g,b,y,_,m,x,A,w,S,C,D,M,O,j,P,H,R,E,q,z,F,V,Z,I,T,U,L,W,N;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.r(e),n.d(e,{HuiEnergyWaterGraphCard:function(){return N}}),s=n(33994),o=n(41981),c=n(22858),u=n(64782),d=n(64599),l=n(35806),h=n(71008),f=n(62193),p=n(2816),v=n(27927),k=n(81027),g=n(13025),b=n(89655),y=n(26098),_=n(39790),m=n(253),x=n(2075),A=n(54846),w=n(66555),S=n(34953),C=n(59298),D=n(28514),M=n(15112),O=n(29818),j=n(85323),P=n(94100),H=n(23469),R=n(57636),n(90701),n(13082),E=n(47076),q=n(4826),z=n(20712),F=n(7934),V=n(37334),!(Z=a([R,E,V])).then){t.next=55;break}return t.next=51,Z;case 51:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=56;break;case 55:t.t0=Z;case 56:I=t.t0,R=I[0],E=I[1],V=I[2],N=(0,v.A)([(0,O.EM)("hui-energy-water-graph-card")],(function(t,e){var n,a=function(e){function n(){var e;(0,h.A)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return e=(0,f.A)(this,n,[].concat(r)),t(e),e}return(0,p.A)(n,e),(0,l.A)(n)}(e);return{F:a,d:[{kind:"field",decorators:[(0,O.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,O.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,O.wk)()],key:"_chartData",value:function(){return{datasets:[]}}},{kind:"field",decorators:[(0,O.wk)()],key:"_start",value:function(){return(0,S.R)()}},{kind:"field",decorators:[(0,O.wk)()],key:"_end",value:function(){return(0,C.o)()}},{kind:"field",decorators:[(0,O.wk)()],key:"_compareStart",value:void 0},{kind:"field",decorators:[(0,O.wk)()],key:"_compareEnd",value:void 0},{kind:"field",decorators:[(0,O.wk)()],key:"_unit",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:function(){return["_config"]}},{kind:"method",key:"hassSubscribe",value:function(){var t,e=this;return[(0,E.tb)(this.hass,{key:null===(t=this._config)||void 0===t?void 0:t.collection_key}).subscribe((function(t){return e._getStatistics(t)}))]}},{kind:"method",key:"getCardSize",value:function(){return 3}},{kind:"method",key:"setConfig",value:function(t){this._config=t}},{kind:"method",key:"shouldUpdate",value:function(t){return(0,F.xP)(this,t)||t.size>1||!t.has("hass")}},{kind:"method",key:"render",value:function(){return this.hass&&this._config?(0,M.qy)(T||(T=(0,d.A)([" <ha-card> ",' <div class="content ','"> <ha-chart-base .hass="','" .data="','" .options="','" chart-type="bar"></ha-chart-base> '," </div> </ha-card> "])),this._config.title?(0,M.qy)(U||(U=(0,d.A)(['<h1 class="card-header">',"</h1>"])),this._config.title):"",(0,j.H)({"has-header":!!this._config.title}),this.hass,this._chartData,this._createOptions(this._start,this._end,this.hass.locale,this.hass.config,this._unit,this._compareStart,this._compareEnd),this._chartData.datasets.length?"":(0,M.qy)(L||(L=(0,d.A)(['<div class="no-data"> '," </div>"])),(0,D.c)(this._start)?this.hass.localize("ui.panel.lovelace.cards.energy.no_data"):this.hass.localize("ui.panel.lovelace.cards.energy.no_data_period"))):M.s6}},{kind:"field",key:"_createOptions",value:function(){var t=this;return(0,P.A)((function(e,n,a,r,i,s,o){var c=(0,V.o)(e,n,a,r,i,s,o);return Object.assign(Object.assign({},c),{},{plugins:Object.assign(Object.assign({},c.plugins),{},{tooltip:Object.assign(Object.assign({},c.plugins.tooltip),{},{callbacks:Object.assign(Object.assign({},c.plugins.tooltip.callbacks),{},{footer:function(e){if(e.length<2)return[];var n,r=0,s=(0,u.A)(e);try{for(s.s();!(n=s.n()).done;){var o=n.value;r+=o.dataset.data[o.dataIndex].y}}catch(c){s.e(c)}finally{s.f()}return 0===r?[]:[t.hass.localize("ui.panel.lovelace.cards.energy.energy_water_graph.total_consumed",{num:(0,R.ZV)(r,a),unit:i})]}})})})})}))}},{kind:"method",key:"_getStatistics",value:(n=(0,c.A)((0,s.A)().mark((function t(e){var n,a,r;return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.prefs.energy_sources.filter((function(t){return"water"===t.type})),this._unit=(0,E.yM)(this.hass),a=[],r=getComputedStyle(this),a.push.apply(a,(0,o.A)(this._processDataSet(e.stats,e.statsMetadata,n,r))),e.statsCompare&&(a.push({order:0,data:[]}),a.push({order:999,data:[],xAxisID:"xAxisCompare"}),a.push.apply(a,(0,o.A)(this._processDataSet(e.statsCompare,e.statsMetadata,n,r,!0)))),this._start=e.start,this._end=e.end||(0,C.o)(),this._compareStart=e.startCompare,this._compareEnd=e.endCompare,this._chartData={datasets:a};case 11:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{kind:"method",key:"_processDataSet",value:function(t,e,n,a){var r=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=[];return n.forEach((function(n,o){var c=null,d=[];if(n.stat_energy_from in t){var l,h,f=t[n.stat_energy_from],p=(0,u.A)(f);try{for(p.s();!(h=p.n()).done;){var v=h.value;if(null!==v.change&&void 0!==v.change&&c!==v.start){var k=new Date(v.start);d.push({x:k.getTime(),y:v.change}),c=v.start,l=v.end}}}catch(g){p.e(g)}finally{p.f()}1===d.length&&d.push({x:l,y:0})}s.push({label:(0,q.$O)(r.hass,n.stat_energy_from,e[n.stat_energy_from]),borderColor:(0,H.g)(a,r.hass.themes.darkMode,!1,i,"--energy-water-color",o),backgroundColor:(0,H.g)(a,r.hass.themes.darkMode,!0,i,"--energy-water-color",o),data:d,order:1,stack:"water",xAxisID:i?"xAxisCompare":void 0})})),s}},{kind:"get",static:!0,key:"styles",value:function(){return(0,M.AH)(W||(W=(0,d.A)(["ha-card{height:100%}.card-header{padding-bottom:0}.content{padding:16px}.has-header{padding-top:0}.no-data{position:absolute;height:100%;top:0;left:0;right:0;display:flex;justify-content:center;align-items:center;padding:20%;margin-left:32px;margin-inline-start:32px;margin-inline-end:initial;box-sizing:border-box}"])))}}]}}),(0,z.E)(M.WF)),i(),t.next=67;break;case 64:t.prev=64,t.t2=t.catch(0),i(t.t2);case 67:case"end":return t.stop()}}),t,null,[[0,64]])})));return function(e,n){return t.apply(this,arguments)}}())},78276:function(t,e,n){n.d(e,{A:function(){return r}});var a=n(76270);function r(t){return(0,a.w)(t,Date.now())}},78635:function(t,e,n){n.d(e,{r:function(){return s}});var a=n(658),r=n(52142),i=n(23566);function s(t,e,n){var s=(0,r.x)(null==n?void 0:n.in,t,e),o=(0,a.A)(s,2),c=o[0],u=o[1];return+(0,i.o)(c)==+(0,i.o)(u)}},28514:function(t,e,n){n.d(e,{c:function(){return s}});var a=n(76270),r=n(78276),i=n(78635);function s(t,e){return(0,i.r)((0,a.w)((null==e?void 0:e.in)||t,t),(0,r.A)((null==e?void 0:e.in)||t))}}}]);
//# sourceMappingURL=59173.-XZx3aP5_JE.js.map