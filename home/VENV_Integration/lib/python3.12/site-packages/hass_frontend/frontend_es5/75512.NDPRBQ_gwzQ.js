/*! For license information please see 75512.NDPRBQ_gwzQ.js.LICENSE.txt */
"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[75512],{46999:function(t,e,n){n.d(e,{Vy:function(){return s},fI:function(){return a}});var i=n(3254),r=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#9498a0","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#74787f","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#b6bac2","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function s(t){return r[t%r.length]}function a(t,e){var n=e.getPropertyValue("--graph-color-".concat(t+1))||s(t);return(0,i.RQ)(n)}},73207:function(t,e,n){n.d(e,{c:function(){return l}});n(95737),n(33822),n(39790),n(99019),n(96858);var i=n(46999),r=n(3254),s=n(92164),a=n(213),o=n(95239),c=n(9883),u=n(61352),h={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};var d=0,f=new Map;function l(t,e,n){return function(t,e,n){var i;if(!n||t===c.Hh)return(0,u.a)("--history-unavailable-color",e);if(t===c.HV)return(0,u.a)("--history-unknown-color",e);var d=(0,o.mg)(n,t);if(d){var f=(0,u.a)(d,e);if(f){var l=(0,a.m)(n.entity_id),_=null===(i=h[l])||void 0===i?void 0:i[t];return _?(0,r.zm)((0,s.T)((0,r.Nc)((0,r.xp)(f)),_)):f}}}(t,e,n)||function(t,e){if(f.has(t))return f.get(t);var n=(0,i.fI)(d,e);return d++,f.set(t,n),n}(t,e)}},60654:function(t,e,n){var i=n(22858).A,r=n(33994).A;n.a(t,function(){var t=i(r().mark((function t(i,s){var a,o,c,u,h,d,f,l,_,v,y,b,k,p,g,m,w,x,A,H,I,S,T,C,E,z,D,O,P,Y,q,L,M,R,U,j,F,G,V,K,N,Q;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.r(e),n.d(e,{DEFAULT_HOURS_TO_SHOW:function(){return N},HuiHistoryGraphCard:function(){return Q}}),a=n(64599),o=n(33994),c=n(22858),u=n(35806),h=n(71008),d=n(62193),f=n(2816),l=n(27927),_=n(35890),v=n(71499),y=n(81027),b=n(95737),k=n(79243),p=n(89655),g=n(50693),m=n(26098),w=n(39790),x=n(66457),A=n(99019),H=n(253),I=n(54846),S=n(66555),T=n(96858),C=n(15112),E=n(29818),z=n(85323),D=n(33922),O=n(4159),n(13292),n(13082),n(46163),P=n(11630),Y=n(96778),q=n(7934),L=n(62241),M=n(56932),!(R=i([O,P])).then){t.next=61;break}return t.next=57,R;case 57:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=62;break;case 61:t.t0=R;case 62:U=t.t0,O=U[0],P=U[1],N=24,Q=(0,l.A)([(0,E.EM)("hui-history-graph-card")],(function(t,e){var i,r,s=function(e){function n(){var e;(0,h.A)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=(0,d.A)(this,n,[].concat(r)),t(e),e}return(0,f.A)(n,e),(0,u.A)(n)}(e);return{F:s,d:[{kind:"method",static:!0,key:"getConfigElement",value:(r=(0,c.A)((0,o.A)().mark((function t(){return(0,o.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.e(94131),n.e(40319),n.e(7726),n.e(55792),n.e(94548),n.e(33644),n.e(62411)]).then(n.bind(n,62411));case 2:return t.abrupt("return",document.createElement("hui-history-graph-card-editor"));case 3:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{kind:"method",static:!0,key:"getStubConfig",value:function(){return{type:"history-graph",entities:["sun.sun"]}}},{kind:"field",decorators:[(0,E.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,E.wk)()],key:"_stateHistory",value:void 0},{kind:"field",decorators:[(0,E.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,E.wk)()],key:"_error",value:void 0},{kind:"field",key:"_names",value:function(){return{}}},{kind:"field",key:"_entityIds",value:function(){return[]}},{kind:"field",key:"_hoursToShow",value:function(){return N}},{kind:"field",key:"_interval",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"method",key:"getCardSize",value:function(){var t,e;return null!==(t=this._config)&&void 0!==t&&t.title?2:0+2*((null===(e=this._entityIds)||void 0===e?void 0:e.length)||1)}},{kind:"method",key:"setConfig",value:function(t){var e=this;if(!t.entities||!Array.isArray(t.entities))throw new Error("Entities need to be an array");if(!t.entities.length)throw new Error("You must include at least one entity");var n=t.entities?(0,L.L)(t.entities):[];this._entityIds=[],n.forEach((function(t){e._entityIds.push(t.entity),t.name&&(e._names[t.entity]=t.name)})),this._hoursToShow=t.hours_to_show||N,this._config=t}},{kind:"method",key:"connectedCallback",value:function(){(0,_.A)(s,"connectedCallback",this,3)([]),this.hasUpdated&&this._subscribeHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,_.A)(s,"disconnectedCallback",this,3)([]),this._unsubscribeHistory()}},{kind:"method",key:"_subscribeHistory",value:(i=(0,c.A)((0,o.A)().mark((function t(){var e,n,i=this;return(0,o.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,D.x)(this.hass,"history")&&!this._subscribed){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,(0,Y.KL)(this.hass);case 4:e=t.sent,n=e.numeric_device_classes,this._subscribed=(0,P.IQ)(this.hass,(function(t){var e;i._subscribed&&(i._stateHistory=(0,P.Mm)(i.hass,t,i._entityIds,i.hass.localize,n,null===(e=i._config)||void 0===e?void 0:e.split_device_classes))}),this._hoursToShow,this._entityIds).catch((function(t){i._subscribed=void 0,i._error=t})),this._setRedrawTimer();case 8:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"_redrawGraph",value:function(){this._stateHistory&&(this._stateHistory=Object.assign({},this._stateHistory))}},{kind:"method",key:"_setRedrawTimer",value:function(){var t=this;clearInterval(this._interval),this._interval=window.setInterval((function(){return t._redrawGraph()}),6e4)}},{kind:"method",key:"_unsubscribeHistory",value:function(){clearInterval(this._interval),this._subscribed&&(this._subscribed.then((function(t){return null==t?void 0:t()})),this._subscribed=void 0)}},{kind:"method",key:"shouldUpdate",value:function(t){return(0,q.pY)(this,t)||t.size>1||!t.has("hass")}},{kind:"method",key:"updated",value:function(t){if((0,_.A)(s,"updated",this,3)([t]),this._config&&this.hass&&this._hoursToShow&&this._entityIds.length&&(t.has("_config")||t.has("hass"))){var e=t.get("_config");!t.has("_config")||(null==e?void 0:e.entities)===this._config.entities&&(null==e?void 0:e.hours_to_show)===this._config.hours_to_show||(this._unsubscribeHistory(),this._subscribeHistory())}}},{kind:"method",key:"render",value:function(){if(!this.hass||!this._config)return C.s6;var t=new Date;t.setHours(t.getHours()-this._hoursToShow);var e="/history?".concat((0,M.KH)({entity_id:this._entityIds.join(","),start_date:t.toISOString()}));return(0,C.qy)(j||(j=(0,a.A)([" <ha-card> ",' <div class="content ','"> '," </div> </ha-card> "])),this._config.title?(0,C.qy)(F||(F=(0,a.A)([' <h1 class="card-header"> ',' <a href="','"><ha-icon-next></ha-icon-next></a> </h1> '])),this._config.title,e):C.s6,(0,z.H)({"has-header":!!this._config.title}),this._error?(0,C.qy)(G||(G=(0,a.A)([' <ha-alert alert-type="error"> ',": "," </ha-alert> "])),this.hass.localize("ui.components.history_charts.error"),this._error.message||this._error.code):(0,C.qy)(V||(V=(0,a.A)([' <state-history-charts .hass="','" .isLoadingData="','" .historyData="','" .names="','" up-to-now .hoursToShow="','" .showNames="','" .logarithmicScale="','" .minYAxis="','" .maxYAxis="','" .fitYData="','"></state-history-charts> '])),this.hass,!this._stateHistory,this._stateHistory,this._names,this._hoursToShow,void 0===this._config.show_names||this._config.show_names,this._config.logarithmic_scale||!1,this._config.min_y_axis,this._config.max_y_axis,this._config.fit_y_data||!1))}},{kind:"get",static:!0,key:"styles",value:function(){return(0,C.AH)(K||(K=(0,a.A)(["ha-card{height:100%}.card-header{justify-content:space-between;display:flex}.card-header ha-icon-next{--mdc-icon-button-size:24px;line-height:24px;color:var(--primary-text-color)}.content{padding:16px}.has-header{padding-top:0}"])))}}]}}),C.WF),s(),t.next=73;break;case 70:t.prev=70,t.t2=t.catch(0),s(t.t2);case 73:case"end":return t.stop()}}),t,null,[[0,70]])})));return function(e,n){return t.apply(this,arguments)}}())},92466:function(t,e,n){var i=n(22858).A,r=n(33994).A;n.a(t,function(){var t=i(r().mark((function t(i,s){var a,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.d(e,{gP:function(){return a.z}}),a=n(20288),!(o=i([a])).then){t.next=11;break}return t.next=7,o;case 7:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=12;break;case 11:t.t0=o;case 12:a=t.t0[0],s(),t.next=19;break;case 16:t.prev=16,t.t2=t.catch(0),s(t.t2);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e,n){return t.apply(this,arguments)}}())},91293:function(t,e,n){var i=n(22858).A,r=n(33994).A;n.a(t,function(){var t=i(r().mark((function t(i,s){var a,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.d(e,{gP:function(){return a.gP}}),a=n(92466),!(o=i([a])).then){t.next=11;break}return t.next=7,o;case 7:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=12;break;case 11:t.t0=o;case 12:a=t.t0[0],s(),t.next=19;break;case 16:t.prev=16,t.t2=t.catch(0),s(t.t2);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e,n){return t.apply(this,arguments)}}())}}]);
//# sourceMappingURL=75512.NDPRBQ_gwzQ.js.map