"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[7725],{20712:function(t,n,e){e.d(n,{E:function(){return d}});var i=e(64782),a=e(35806),r=e(71008),s=e(62193),o=e(2816),u=e(27927),c=e(35890),l=(e(81027),e(82386),e(95737),e(39790),e(66457),e(36604),e(253),e(4525),e(96858),e(29818)),d=function(t){var n=(0,u.A)(null,(function(t,n){var e=function(n){function e(){var n;(0,r.A)(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=(0,s.A)(this,e,[].concat(a)),t(n),n}return(0,o.A)(e,n),(0,a.A)(e)}(n);return{F:e,d:[{kind:"field",decorators:[(0,l.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,c.A)(e,"connectedCallback",this,3)([]),this.__checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,c.A)(e,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){var t=this.__unsubs.pop();t instanceof Promise?t.then((function(t){return t()})):t()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(t){if((0,c.A)(e,"updated",this,3)([t]),t.has("hass"))this.__checkSubscribed();else if(this.hassSubscribeRequiredHostProps){var n,a=(0,i.A)(t.keys());try{for(a.s();!(n=a.n()).done;){var r=n.value;if(this.hassSubscribeRequiredHostProps.includes(r))return void this.__checkSubscribed()}}catch(s){a.e(s)}finally{a.f()}}}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"__checkSubscribed",value:function(){var t,n=this;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(t=this.hassSubscribeRequiredHostProps)&&void 0!==t&&t.some((function(t){return void 0===n[t]}))||(this.__unsubs=this.hassSubscribe())}}]}}),t);return n}},39483:function(t,n,e){var i=e(22858).A,a=e(33994).A;e.a(t,function(){var t=i(a().mark((function t(i,r){var s,o,u,c,l,d,h,f,v,g,_,p,y,k,b,m,A,x,w,M,S,z,E,F,C,H,q,D,N,P,Y,R,j,W;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.r(n),s=e(64599),o=e(35806),u=e(71008),c=e(62193),l=e(2816),d=e(27927),h=e(81027),f=e(97741),v=e(46469),g=e(39790),_=e(9241),p=e(253),y=e(16891),k=e(37679),e(7986),b=e(15112),m=e(29818),A=e(63073),x=e(53249),e(13082),w=e(43106),e(88400),M=e(47076),S=e(4826),z=e(20712),E=e(46645),F=e(57540),C=e(7934),!(H=i([w,M,F])).then){t.next=46;break}return t.next=42,H;case 42:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=47;break;case 46:t.t0=H;case 47:q=t.t0,w=q[0],M=q[1],F=q[2],W={maximumFractionDigits:0},(0,d.A)([(0,m.EM)("hui-energy-carbon-consumed-gauge-card")],(function(t,n){var e=function(n){function e(){var n;(0,u.A)(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return n=(0,c.A)(this,e,[].concat(a)),t(n),n}return(0,l.A)(e,n),(0,o.A)(e)}(n);return{F:e,d:[{kind:"field",decorators:[(0,m.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,m.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,m.wk)()],key:"_data",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:function(){return["_config"]}},{kind:"method",key:"getCardSize",value:function(){return 4}},{kind:"method",key:"setConfig",value:function(t){this._config=t}},{kind:"method",key:"hassSubscribe",value:function(){var t,n=this;return[(0,M.tb)(this.hass,{key:null===(t=this._config)||void 0===t?void 0:t.collection_key}).subscribe((function(t){n._data=t}))]}},{kind:"method",key:"shouldUpdate",value:function(t){var n;return(0,C.xP)(this,t)||t.size>1||!t.has("hass")||!(null===(n=this._data)||void 0===n||!n.co2SignalEntity)&&this.hass.states[this._data.co2SignalEntity]!==t.get("hass").states[this._data.co2SignalEntity]}},{kind:"method",key:"render",value:function(){if(!this._config||!this.hass)return b.s6;if(!this._data)return(0,b.qy)(D||(D=(0,s.A)(["",""])),this.hass.localize("ui.panel.lovelace.cards.energy.loading"));if(!this._data.co2SignalEntity)return b.s6;if(!this.hass.states[this._data.co2SignalEntity])return(0,b.qy)(N||(N=(0,s.A)(["<hui-warning> "," </hui-warning>"])),(0,E.j)(this.hass,this._data.co2SignalEntity));var t,n=this._data.prefs,e=(0,M.E$)(n),i=(0,S.gF)(this._data.stats,e.grid[0].flow_from.map((function(t){return t.stat_energy_from})));if(this._data.fossilEnergyConsumption&&i){var a=this._data.fossilEnergyConsumption?Object.values(this._data.fossilEnergyConsumption).reduce((function(t,n){return t+n}),0):0,r=e.solar&&(0,S.gF)(this._data.stats,e.solar.map((function(t){return t.stat_energy_from})))||0,o=(0,S.gF)(this._data.stats,e.grid[0].flow_to.map((function(t){return t.stat_energy_to})))||0,u=i+Math.max(0,r-o);t=(0,x.L)(100*(1-a/u))}return(0,b.qy)(P||(P=(0,s.A)([" <ha-card> "," </ha-card> "])),void 0!==t?(0,b.qy)(Y||(Y=(0,s.A)([' <ha-svg-icon id="info" .path="','"></ha-svg-icon> <simple-tooltip animation-delay="0" for="info" position="left"> <span> ',' </span> </simple-tooltip> <ha-gauge min="0" max="100" .value="','" .formatOptions="','" .locale="','" label="%" style="','"></ha-gauge> <div class="name"> '," </div> "])),"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",this.hass.localize("ui.panel.lovelace.cards.energy.carbon_consumed_gauge.card_indicates_energy_used"),t,W,this.hass.locale,(0,A.W)({"--gauge-color":this._computeSeverity(t)}),this.hass.localize("ui.panel.lovelace.cards.energy.carbon_consumed_gauge.low_carbon_energy_consumed")):(0,b.qy)(R||(R=(0,s.A)(["",""])),this.hass.localize("ui.panel.lovelace.cards.energy.carbon_consumed_gauge.low_carbon_energy_not_calculated")))}},{kind:"method",key:"_computeSeverity",value:function(t){return t<10?F.severityMap.red:t<30?F.severityMap.yellow:t>75?F.severityMap.green:F.severityMap.normal}},{kind:"get",static:!0,key:"styles",value:function(){return(0,b.AH)(j||(j=(0,s.A)(["ha-card{height:100%;overflow:hidden;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-gauge{width:100%;max-width:250px}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:15px;margin-top:8px}ha-svg-icon{position:absolute;right:4px;inset-inline-end:4px;inset-inline-start:initial;top:4px;color:var(--secondary-text-color)}simple-tooltip>span{font-size:12px;line-height:12px}simple-tooltip{width:80%;max-width:250px;top:8px!important}"])))}}]}}),(0,z.E)(b.WF)),r(),t.next=60;break;case 57:t.prev=57,t.t2=t.catch(0),r(t.t2);case 60:case"end":return t.stop()}}),t,null,[[0,57]])})));return function(n,e){return t.apply(this,arguments)}}())},46091:function(t,n,e){e.d(n,{f:function(){return r}});var i=e(76270),a=e(21710);function r(t,n,e){var r=(0,a.a)(t,null==e?void 0:e.in);return isNaN(n)?(0,i.w)((null==e?void 0:e.in)||t,NaN):n?(r.setDate(r.getDate()+n),r):r}},97405:function(t,n,e){e.d(n,{L:function(){return r}});var i=e(34542),a=e(40086);function r(t,n,e){return(0,i.A)(t,n*a.s0,e)}},34542:function(t,n,e){e.d(n,{A:function(){return r}});var i=e(76270),a=e(21710);function r(t,n,e){return(0,i.w)((null==e?void 0:e.in)||t,+(0,a.a)(t)+n)}},56235:function(t,n,e){e.d(n,{P:function(){return r}});var i=e(76270),a=e(21710);function r(t,n,e){var r=(0,a.a)(t,null==e?void 0:e.in);if(isNaN(n))return(0,i.w)((null==e?void 0:e.in)||t,NaN);if(!n)return r;var s=r.getDate(),o=(0,i.w)((null==e?void 0:e.in)||t,r.getTime());return o.setMonth(r.getMonth()+n+1,0),s>=o.getDate()?o:(r.setFullYear(o.getFullYear(),o.getMonth(),s),r)}},73583:function(t,n,e){e.d(n,{z:function(){return a}});var i=e(21710);function a(t,n){var e=+(0,i.a)(t)-+(0,i.a)(n);return e<0?-1:e>0?1:e}},7792:function(t,n,e){e.d(n,{W:function(){return u}});var i=e(658),a=e(52142),r=e(73583);function s(t,n,e){var r=(0,a.x)(null==e?void 0:e.in,t,n),s=(0,i.A)(r,2),o=s[0],u=s[1];return 12*(o.getFullYear()-u.getFullYear())+(o.getMonth()-u.getMonth())}var o=e(76476);function u(t,n,e){var u=(0,a.x)(null==e?void 0:e.in,t,t,n),c=(0,i.A)(u,3),l=c[0],d=c[1],h=c[2],f=(0,r.z)(d,h),v=Math.abs(s(d,h));if(v<1)return 0;1===d.getMonth()&&d.getDate()>27&&d.setDate(30),d.setMonth(d.getMonth()-f*v);var g=(0,r.z)(d,h)===-f;(0,o.c)(l)&&1===v&&1===(0,r.z)(l,h)&&(g=!1);var _=f*(v-+g);return 0===_?0:_}},31077:function(t,n,e){e.d(n,{D:function(){return a}});var i=e(21710);function a(t,n){var e=(0,i.a)(t,null==n?void 0:n.in);return e.setHours(23,59,59,999),e}},4537:function(t,n,e){e.d(n,{p:function(){return a}});var i=e(21710);function a(t,n){var e=(0,i.a)(t,null==n?void 0:n.in),a=e.getMonth();return e.setFullYear(e.getFullYear(),a+1,0),e.setHours(23,59,59,999),e}},40102:function(t,n,e){e.d(n,{e:function(){return a}});var i=e(21710);function a(t,n){return 1===(0,i.a)(t,null==n?void 0:n.in).getDate()}},76476:function(t,n,e){e.d(n,{c:function(){return s}});var i=e(31077),a=e(4537),r=e(21710);function s(t,n){var e=(0,r.a)(t,null==n?void 0:n.in);return+(0,i.D)(e,n)==+(0,a.p)(e,n)}}}]);
//# sourceMappingURL=7725.vTG3ZcjE2OY.js.map