"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[78066,13265,13292,45346],{57289:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(i,a){var o,s,u,c,l,d,h,f,p,v,m,k,g,b,_,y,x,A,w,M,C,Z,z,I,L,F,H,D,P,R,N,T,B;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.d(t,{CA:function(){return R},Pm:function(){return D},Wq:function(){return F},Yq:function(){return y},fr:function(){return I},gu:function(){return T},kz:function(){return A},sl:function(){return Z},sw:function(){return b},zB:function(){return M}}),o=n(14842),s=n(4978),u=n(81027),c=n(44124),l=n(39790),d=n(8206),h=n(253),f=n(94438),p=n(13265),v=n(94100),m=n(45269),k=n(35638),!(g=i([p])).then){e.next=29;break}return e.next=25,g;case 25:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=30;break;case 29:e.t0=g;case 30:p=e.t0[0],b=function(e,t,n){return _(t,n.time_zone).format(e)},_=(0,v.A)((function(e,t){return new Intl.DateTimeFormat(e.language,{weekday:"long",month:"long",day:"numeric",timeZone:(0,k.w)(e.time_zone,t)})})),y=function(e,t,n){return x(t,n.time_zone).format(e)},x=(0,v.A)((function(e,t){return new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",timeZone:(0,k.w)(e.time_zone,t)})})),A=function(e,t,n){return w(t,n.time_zone).format(e)},w=(0,v.A)((function(e,t){return new Intl.DateTimeFormat(e.language,{year:"numeric",month:"short",day:"numeric",timeZone:(0,k.w)(e.time_zone,t)})})),M=function(e,t,n){var i,r,a,s,u=C(t,n.time_zone);if(t.date_format===m.ow.language||t.date_format===m.ow.system)return u.format(e);var c=u.formatToParts(e),l=null===(i=c.find((function(e){return"literal"===e.type})))||void 0===i?void 0:i.value,d=null===(r=c.find((function(e){return"day"===e.type})))||void 0===r?void 0:r.value,h=null===(a=c.find((function(e){return"month"===e.type})))||void 0===a?void 0:a.value,f=null===(s=c.find((function(e){return"year"===e.type})))||void 0===s?void 0:s.value,p=c.at(c.length-1),v="literal"===(null==p?void 0:p.type)?null==p?void 0:p.value:"";return"bg"===t.language&&t.date_format===m.ow.YMD&&(v=""),(0,o.A)((0,o.A)((0,o.A)({},m.ow.DMY,"".concat(d).concat(l).concat(h).concat(l).concat(f).concat(v)),m.ow.MDY,"".concat(h).concat(l).concat(d).concat(l).concat(f).concat(v)),m.ow.YMD,"".concat(f).concat(l).concat(h).concat(l).concat(d).concat(v))[t.date_format]},C=(0,v.A)((function(e,t){var n=e.date_format===m.ow.system?void 0:e.language;return e.date_format===m.ow.language||(e.date_format,m.ow.system),new Intl.DateTimeFormat(n,{year:"numeric",month:"numeric",day:"numeric",timeZone:(0,k.w)(e.time_zone,t)})})),Z=function(e,t,n){return z(t,n.time_zone).format(e)},z=(0,v.A)((function(e,t){return new Intl.DateTimeFormat(e.language,{day:"numeric",month:"short",timeZone:(0,k.w)(e.time_zone,t)})})),I=function(e,t,n){return L(t,n.time_zone).format(e)},L=(0,v.A)((function(e,t){return new Intl.DateTimeFormat(e.language,{month:"long",year:"numeric",timeZone:(0,k.w)(e.time_zone,t)})})),F=function(e,t,n){return H(t,n.time_zone).format(e)},H=(0,v.A)((function(e,t){return new Intl.DateTimeFormat(e.language,{month:"long",timeZone:(0,k.w)(e.time_zone,t)})})),D=function(e,t,n){return P(t,n.time_zone).format(e)},P=(0,v.A)((function(e,t){return new Intl.DateTimeFormat(e.language,{year:"numeric",timeZone:(0,k.w)(e.time_zone,t)})})),R=function(e,t,n){return N(t,n.time_zone).format(e)},N=(0,v.A)((function(e,t){return new Intl.DateTimeFormat(e.language,{weekday:"long",timeZone:(0,k.w)(e.time_zone,t)})})),T=function(e,t,n){return B(t,n.time_zone).format(e)},B=(0,v.A)((function(e,t){return new Intl.DateTimeFormat(e.language,{weekday:"short",timeZone:(0,k.w)(e.time_zone,t)})})),a(),e.next=57;break;case 54:e.prev=54,e.t2=e.catch(0),a(e.t2);case 57:case"end":return e.stop()}}),e,null,[[0,54]])})));return function(t,n){return e.apply(this,arguments)}}())},8581:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(i,a){var o,s,u,c,l,d,h,f,p,v,m,k,g,b,_,y,x,A;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.d(t,{GH:function(){return A},ZS:function(){return b},aQ:function(){return k},r6:function(){return v},yg:function(){return y}}),o=n(81027),s=n(13265),u=n(94100),c=n(57289),l=n(41924),d=n(35638),h=n(3453),!(f=i([s,c,l])).then){e.next=18;break}return e.next=14,f;case 14:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=19;break;case 18:e.t0=f;case 19:p=e.t0,s=p[0],c=p[1],l=p[2],v=function(e,t,n){return m(t,n.time_zone).format(e)},m=(0,u.A)((function(e,t){return new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",hour:(0,h.J)(e)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,h.J)(e)?"h12":"h23",timeZone:(0,d.w)(e.time_zone,t)})})),k=function(e,t,n){return g(t,n.time_zone).format(e)},g=(0,u.A)((function(e,t){return new Intl.DateTimeFormat(e.language,{year:"numeric",month:"short",day:"numeric",hour:(0,h.J)(e)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,h.J)(e)?"h12":"h23",timeZone:(0,d.w)(e.time_zone,t)})})),b=function(e,t,n){return _(t,n.time_zone).format(e)},_=(0,u.A)((function(e,t){return new Intl.DateTimeFormat(e.language,{month:"short",day:"numeric",hour:(0,h.J)(e)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,h.J)(e)?"h12":"h23",timeZone:(0,d.w)(e.time_zone,t)})})),y=function(e,t,n){return x(t,n.time_zone).format(e)},x=(0,u.A)((function(e,t){return new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",hour:(0,h.J)(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,h.J)(e)?"h12":"h23",timeZone:(0,d.w)(e.time_zone,t)})})),A=function(e,t,n){return"".concat((0,c.zB)(e,t,n),", ").concat((0,l.fU)(e,t,n))},a(),e.next=38;break;case 35:e.prev=35,e.t2=e.catch(0),a(e.t2);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n){return e.apply(this,arguments)}}())},41924:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(i,a){var o,s,u,c,l,d,h,f,p,v,m,k,g;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.d(t,{LW:function(){return k},Xs:function(){return v},fU:function(){return d},ie:function(){return f}}),o=n(13265),s=n(94100),u=n(35638),c=n(3453),!(l=i([o])).then){e.next=14;break}return e.next=10,l;case 10:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=15;break;case 14:e.t0=l;case 15:o=e.t0[0],d=function(e,t,n){return h(t,n.time_zone).format(e)},h=(0,s.A)((function(e,t){return new Intl.DateTimeFormat(e.language,{hour:"numeric",minute:"2-digit",hourCycle:(0,c.J)(e)?"h12":"h23",timeZone:(0,u.w)(e.time_zone,t)})})),f=function(e,t,n){return p(t,n.time_zone).format(e)},p=(0,s.A)((function(e,t){return new Intl.DateTimeFormat(e.language,{hour:(0,c.J)(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,c.J)(e)?"h12":"h23",timeZone:(0,u.w)(e.time_zone,t)})})),v=function(e,t,n){return m(t,n.time_zone).format(e)},m=(0,s.A)((function(e,t){return new Intl.DateTimeFormat(e.language,{weekday:"long",hour:(0,c.J)(e)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,c.J)(e)?"h12":"h23",timeZone:(0,u.w)(e.time_zone,t)})})),k=function(e,t,n){return g(t,n.time_zone).format(e)},g=(0,s.A)((function(e,t){return new Intl.DateTimeFormat("en-GB",{hour:"numeric",minute:"2-digit",hour12:!1,timeZone:(0,u.w)(e.time_zone,t)})})),a(),e.next=30;break;case 27:e.prev=27,e.t2=e.catch(0),a(e.t2);case 30:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(t,n){return e.apply(this,arguments)}}())},35638:function(e,t,n){n.d(t,{w:function(){return l}});var i,r,a,o,s,u=n(45269),c=null!==(i=null===(r=(a=Intl).DateTimeFormat)||void 0===r||null===(o=(s=r.call(a)).resolvedOptions)||void 0===o?void 0:o.call(s).timeZone)&&void 0!==i?i:"UTC",l=function(e,t){return e===u.Wj.local&&"UTC"!==c?c:t}},3453:function(e,t,n){n.d(t,{J:function(){return a}});n(82386),n(36604);var i=n(94100),r=n(45269),a=(0,i.A)((function(e){if(e.time_format===r.Hg.language||e.time_format===r.Hg.system){var t=e.time_format===r.Hg.language?e.language:void 0;return new Date("January 1, 2023 22:00:00").toLocaleString(t).includes("10")}return e.time_format===r.Hg.am_pm}))},37456:function(e,t,n){n.d(t,{a:function(){return r}});var i=(0,n(58034).n)((function(e){history.replaceState({scrollPosition:e},"")}),300),r=function(e){return function(t){return{kind:"method",placement:"prototype",key:t.key,descriptor:{set:function(e){i(e),this["__".concat(String(t.key))]=e},get:function(){var e;return this["__".concat(String(t.key))]||(null===(e=history.state)||void 0===e?void 0:e.scrollPosition)},enumerable:!0,configurable:!0},finisher:function(n){var i=n.prototype.connectedCallback;n.prototype.connectedCallback=function(){var n=this;i.call(this);var r=this[t.key];r&&this.updateComplete.then((function(){var t=n.renderRoot.querySelector(e);t&&setTimeout((function(){t.scrollTop=r}),0)}))}}}}}},54480:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(i,a){var o,s,u,c,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.d(t,{T:function(){return c}}),o=n(13265),s=n(94100),!(u=i([o])).then){e.next=12;break}return e.next=8,u;case 8:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=13;break;case 12:e.t0=u;case 13:o=e.t0[0],c=function(e,t){try{var n,i;return null!==(n=null===(i=l(t))||void 0===i?void 0:i.of(e))&&void 0!==n?n:e}catch(r){return e}},l=(0,s.A)((function(e){return new Intl.DisplayNames(e.language,{type:"language",fallback:"code"})})),a(),e.next=22;break;case 19:e.prev=19,e.t2=e.catch(0),a(e.t2);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n){return e.apply(this,arguments)}}())},57636:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(i,a){var o,s,u,c,l,d,h,f,p,v,m,k,g,b,_,y,x,A,w,M;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.d(t,{Yf:function(){return x},ZQ:function(){return w},ZV:function(){return A},ty:function(){return y},x:function(){return _}}),o=n(13265),s=n(81027),u=n(82386),c=n(39805),l=n(29193),d=n(63030),h=n(49445),f=n(26098),p=n(39790),v=n(7760),m=n(36604),k=n(45269),g=n(53249),!(b=i([o])).then){e.next=33;break}return e.next=29,b;case 29:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=34;break;case 33:e.t0=b;case 34:o=e.t0[0],_=function(e){return y(e.attributes)},y=function(e,t){return!!e.unit_of_measurement||!!e.state_class||(t||[]).includes(e.device_class||"")},x=function(e){switch(e.number_format){case k.jG.comma_decimal:return["en-US","en"];case k.jG.decimal_comma:return["de","es","it"];case k.jG.space_comma:return["fr","sv","cs"];case k.jG.system:return;default:return e.language}},A=function(e,t,n){var i=t?x(t):void 0;return Number.isNaN=Number.isNaN||function e(t){return"number"==typeof t&&e(t)},(null==t?void 0:t.number_format)===k.jG.none||Number.isNaN(Number(e))?Number.isNaN(Number(e))||""===e||(null==t?void 0:t.number_format)!==k.jG.none?"string"==typeof e?e:"".concat((0,g.L)(e,null==n?void 0:n.maximumFractionDigits).toString()).concat("currency"===(null==n?void 0:n.style)?" ".concat(n.currency):""):new Intl.NumberFormat("en-US",M(e,Object.assign(Object.assign({},n),{},{useGrouping:!1}))).format(Number(e)):new Intl.NumberFormat(i,M(e,n)).format(Number(e))},w=function(e,t){var n,i=null==t?void 0:t.display_precision;return null!=i?{maximumFractionDigits:i,minimumFractionDigits:i}:Number.isInteger(Number(null==e||null===(n=e.attributes)||void 0===n?void 0:n.step))&&Number.isInteger(Number(null==e?void 0:e.state))?{maximumFractionDigits:0}:void 0},M=function(e,t){var n=Object.assign({maximumFractionDigits:2},t);if("string"!=typeof e)return n;if(!t||void 0===t.minimumFractionDigits&&void 0===t.maximumFractionDigits){var i=e.indexOf(".")>-1?e.split(".")[1].length:0;n.minimumFractionDigits=i,n.maximumFractionDigits=i}return n},a(),e.next=47;break;case 44:e.prev=44,e.t2=e.catch(0),a(e.t2);case 47:case"end":return e.stop()}}),e,null,[[0,44]])})));return function(t,n){return e.apply(this,arguments)}}())},58034:function(e,t,n){n.d(t,{n:function(){return i}});var i=function(e,t){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=0,o=function(){for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];var c=Date.now();a||!1!==i||(a=c);var l=t-(c-a);l<=0||l>t?(n&&(clearTimeout(n),n=void 0),a=c,e.apply(void 0,s)):n||!1===r||(n=window.setTimeout((function(){a=!1===i?0:Date.now(),n=void 0,e.apply(void 0,s)}),l))};return o.cancel=function(){clearTimeout(n),n=void 0,a=0},o}},13292:function(e,t,n){n.r(t);var i,r,a,o,s=n(14842),u=n(64599),c=n(35806),l=n(71008),d=n(62193),h=n(2816),f=n(27927),p=(n(81027),n(15112)),v=n(29818),m=n(85323),k=n(34897),g=(n(28066),n(88400),{info:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z",warning:"M12,2L1,21H23M12,6L19.53,19H4.47M11,10V14H13V10M11,16V18H13V16",error:"M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z",success:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2,4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"});(0,f.A)([(0,v.EM)("ha-alert")],(function(e,t){var n=function(t){function n(){var t;(0,l.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,d.A)(this,n,[].concat(r)),e(t),t}return(0,h.A)(n,t),(0,c.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,v.MZ)()],key:"title",value:function(){return""}},{kind:"field",decorators:[(0,v.MZ)({attribute:"alert-type"})],key:"alertType",value:function(){return"info"}},{kind:"field",decorators:[(0,v.MZ)({type:Boolean})],key:"dismissable",value:function(){return!1}},{kind:"method",key:"render",value:function(){return(0,p.qy)(i||(i=(0,u.A)([' <div class="issue-type ','" role="alert"> <div class="icon ','"> <slot name="icon"> <ha-svg-icon .path="','"></ha-svg-icon> </slot> </div> <div class="content"> <div class="main-content"> ',' <slot></slot> </div> <div class="action"> <slot name="action"> '," </slot> </div> </div> </div> "])),(0,m.H)((0,s.A)({},this.alertType,!0)),this.title?"":"no-title",g[this.alertType],this.title?(0,p.qy)(r||(r=(0,u.A)(['<div class="title">',"</div>"])),this.title):"",this.dismissable?(0,p.qy)(a||(a=(0,u.A)(['<ha-icon-button @click="','" label="Dismiss alert" .path="','"></ha-icon-button>'])),this._dismiss_clicked,"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"):"")}},{kind:"method",key:"_dismiss_clicked",value:function(){(0,k.r)(this,"alert-dismissed-clicked")}},{kind:"field",static:!0,key:"styles",value:function(){return(0,p.AH)(o||(o=(0,u.A)(['.issue-type{position:relative;padding:8px;display:flex}.issue-type::after{position:absolute;top:0;right:0;bottom:0;left:0;opacity:.12;pointer-events:none;content:"";border-radius:4px}.icon{z-index:1}.icon.no-title{align-self:center}.content{display:flex;justify-content:space-between;align-items:center;width:100%;text-align:var(--float-start)}.action{z-index:1;width:min-content;--mdc-theme-primary:var(--primary-text-color)}.main-content{overflow-wrap:anywhere;word-break:break-word;margin-left:8px;margin-right:0;margin-inline-start:8px;margin-inline-end:0}.title{margin-top:2px;font-weight:700}.action ha-icon-button,.action mwc-button{--mdc-theme-primary:var(--primary-text-color);--mdc-icon-button-size:36px}.issue-type.info>.icon{color:var(--info-color)}.issue-type.info::after{background-color:var(--info-color)}.issue-type.warning>.icon{color:var(--warning-color)}.issue-type.warning::after{background-color:var(--warning-color)}.issue-type.error>.icon{color:var(--error-color)}.issue-type.error::after{background-color:var(--error-color)}.issue-type.success>.icon{color:var(--success-color)}.issue-type.success::after{background-color:var(--success-color)}:host ::slotted(ul){margin:0;padding-inline-start:20px}'])))}}]}}),p.WF)},12609:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(t,i){var a,o,s,u,c,l,d,h,f,p,v,m,k,g,b,_,y,x,A,w,M,C,Z,z,I,L,F,H;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=n(64599),o=n(35806),s=n(71008),u=n(62193),c=n(2816),l=n(27927),d=n(35890),h=n(81027),f=n(44124),p=n(97741),v=n(50693),m=n(39790),k=n(253),g=n(94438),b=n(16891),_=n(15112),y=n(29818),x=n(34897),A=n(79051),w=n(54480),M=n(79228),n(13830),n(77312),!(C=t([w])).then){e.next=40;break}return e.next=36,C;case 36:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=41;break;case 40:e.t0=C;case 41:w=e.t0[0],F="preferred",H="last_used",(0,l.A)([(0,y.EM)("ha-assist-pipeline-picker")],(function(e,t){var n=function(t){function n(){var t;(0,s.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,u.A)(this,n,[].concat(r)),e(t),t}return(0,c.A)(n,t),(0,o.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,y.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,y.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,y.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,y.MZ)({type:Boolean,reflect:!0})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,y.MZ)({type:Boolean})],key:"required",value:function(){return!1}},{kind:"field",decorators:[(0,y.MZ)({type:Boolean})],key:"includeLastUsed",value:function(){return!1}},{kind:"field",decorators:[(0,y.wk)()],key:"_pipelines",value:void 0},{kind:"field",decorators:[(0,y.wk)()],key:"_preferredPipeline",value:function(){return null}},{kind:"get",key:"_default",value:function(){return this.includeLastUsed?H:F}},{kind:"method",key:"render",value:function(){var e,t,n=this;if(!this._pipelines)return _.s6;var i=null!==(e=this.value)&&void 0!==e?e:this._default;return(0,_.qy)(Z||(Z=(0,a.A)([' <ha-select .label="','" .value="','" .required="','" .disabled="','" @selected="','" @closed="','" fixedMenuPosition naturalMenuWidth> ',' <ha-list-item .value="','"> '," </ha-list-item> "," </ha-select> "])),this.label||this.hass.localize("ui.components.pipeline-picker.pipeline"),i,this.required,this.disabled,this._changed,A.d,this.includeLastUsed?(0,_.qy)(z||(z=(0,a.A)([' <ha-list-item .value="','"> '," </ha-list-item> "])),H,this.hass.localize("ui.components.pipeline-picker.last_used")):null,F,this.hass.localize("ui.components.pipeline-picker.preferred",{preferred:null===(t=this._pipelines.find((function(e){return e.id===n._preferredPipeline})))||void 0===t?void 0:t.name}),this._pipelines.map((function(e){return(0,_.qy)(I||(I=(0,a.A)(['<ha-list-item .value="','"> '," (",") </ha-list-item>"])),e.id,e.name,(0,w.T)(e.language,n.hass.locale))})))}},{kind:"method",key:"firstUpdated",value:function(e){var t=this;(0,d.A)(n,"firstUpdated",this,3)([e]),(0,M.nx)(this.hass).then((function(e){t._pipelines=e.pipelines,t._preferredPipeline=e.preferred_pipeline}))}},{kind:"get",static:!0,key:"styles",value:function(){return(0,_.AH)(L||(L=(0,a.A)(["ha-select{width:100%}"])))}},{kind:"method",key:"_changed",value:function(e){var t=e.target;!this.hass||""===t.value||t.value===this.value||void 0===this.value&&t.value===this._default||(this.value=t.value===this._default?void 0:t.value,(0,x.r)(this,"value-changed",{value:this.value}))}}]}}),_.WF),i(),e.next=51;break;case 48:e.prev=48,e.t2=e.catch(0),i(e.t2);case 51:case"end":return e.stop()}}),e,null,[[0,48]])})));return function(t,n){return e.apply(this,arguments)}}())},88725:function(e,t,n){var i,r=n(64599),a=n(35806),o=n(71008),s=n(62193),u=n(2816),c=n(27927),l=(n(81027),n(41204)),d=n(15565),h=n(15112),f=n(29818);(0,c.A)([(0,f.EM)("ha-checkbox")],(function(e,t){var n=function(t){function n(){var t;(0,o.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,s.A)(this,n,[].concat(r)),e(t),t}return(0,u.A)(n,t),(0,a.A)(n)}(t);return{F:n,d:[{kind:"field",static:!0,key:"styles",value:function(){return[d.R,(0,h.AH)(i||(i=(0,r.A)([":host{--mdc-theme-secondary:var(--primary-color)}"])))]}}]}}),l.L)},37629:function(e,t,n){n.r(t),n.d(t,{HaCircularProgress:function(){return v}});var i,r=n(64599),a=n(41981),o=n(35806),s=n(71008),u=n(62193),c=n(2816),l=n(27927),d=n(35890),h=(n(81027),n(99322)),f=n(15112),p=n(29818),v=(0,l.A)([(0,p.EM)("ha-circular-progress")],(function(e,t){var n=function(t){function n(){var t;(0,s.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,u.A)(this,n,[].concat(r)),e(t),t}return(0,c.A)(n,t),(0,o.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,p.MZ)({attribute:"aria-label",type:String})],key:"ariaLabel",value:function(){return"Loading"}},{kind:"field",decorators:[(0,p.MZ)()],key:"size",value:function(){return"medium"}},{kind:"method",key:"updated",value:function(e){if((0,d.A)(n,"updated",this,3)([e]),e.has("size"))switch(this.size){case"tiny":this.style.setProperty("--md-circular-progress-size","16px");break;case"small":this.style.setProperty("--md-circular-progress-size","28px");break;case"medium":this.style.setProperty("--md-circular-progress-size","48px");break;case"large":this.style.setProperty("--md-circular-progress-size","68px")}}},{kind:"field",static:!0,key:"styles",value:function(){return[].concat((0,a.A)((0,d.A)(n,"styles",this)),[(0,f.AH)(i||(i=(0,r.A)([":host{--md-sys-color-primary:var(--primary-color);--md-circular-progress-size:48px}"])))])}}]}}),h.U)},24284:function(e,t,n){var i,r,a=n(64599),o=n(35806),s=n(71008),u=n(62193),c=n(2816),l=n(27927),d=(n(81027),n(37136)),h=n(18881),f=n(15112),p=n(29818),v=n(85323),m=n(34897);(0,l.A)([(0,p.EM)("ha-formfield")],(function(e,t){var n=function(t){function n(){var t;(0,s.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,u.A)(this,n,[].concat(r)),e(t),t}return(0,c.A)(n,t),(0,o.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,p.MZ)({type:Boolean,reflect:!0})],key:"disabled",value:function(){return!1}},{kind:"method",key:"render",value:function(){var e={"mdc-form-field--align-end":this.alignEnd,"mdc-form-field--space-between":this.spaceBetween,"mdc-form-field--nowrap":this.nowrap};return(0,f.qy)(i||(i=(0,a.A)([' <div class="mdc-form-field ','"> <slot></slot> <label class="mdc-label" @click="','"> <slot name="label">',"</slot> </label> </div>"])),(0,v.H)(e),this._labelClick,this.label)}},{kind:"method",key:"_labelClick",value:function(){var e=this.input;if(e&&(e.focus(),!e.disabled))switch(e.tagName){case"HA-CHECKBOX":e.checked=!e.checked,(0,m.r)(e,"change");break;case"HA-RADIO":e.checked=!0,(0,m.r)(e,"change");break;default:e.click()}}},{kind:"field",static:!0,key:"styles",value:function(){return[h.R,(0,f.AH)(r||(r=(0,a.A)([":host(:not([alignEnd])) ::slotted(ha-switch){margin-right:10px;margin-inline-end:10px;margin-inline-start:inline}.mdc-form-field{align-items:var(--ha-formfield-align-items,center);gap:4px}.mdc-form-field>label{direction:var(--direction);margin-inline-start:0;margin-inline-end:auto;padding:0}:host([disabled]) label{color:var(--disabled-text-color)}"])))]}}]}}),d.M)},45346:function(e,t,n){n.r(t),n.d(t,{HaIconButtonArrowPrev:function(){return f}});var i,r=n(64599),a=n(35806),o=n(71008),s=n(62193),u=n(2816),c=n(27927),l=(n(81027),n(15112)),d=n(29818),h=n(74005),f=(n(28066),(0,c.A)([(0,d.EM)("ha-icon-button-arrow-prev")],(function(e,t){var n=function(t){function n(){var t;(0,o.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,s.A)(this,n,[].concat(r)),e(t),t}return(0,u.A)(n,t),(0,a.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,d.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,d.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,d.wk)()],key:"_icon",value:function(){return"rtl"===h.G.document.dir?"M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z":"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"}},{kind:"method",key:"render",value:function(){var e;return(0,l.qy)(i||(i=(0,r.A)([' <ha-icon-button .disabled="','" .label="','" .path="','"></ha-icon-button> '])),this.disabled,this.label||(null===(e=this.hass)||void 0===e?void 0:e.localize("ui.common.back"))||"Back",this._icon)}}]}}),l.WF))},11804:function(e,t,n){var i,r,a,o=n(64599),s=n(35806),u=n(71008),c=n(62193),l=n(2816),d=n(27927),h=n(35890),f=(n(71499),n(81027),n(29193),n(15112)),p=n(29818),v=n(34897),m=n(77679);n(28066),(0,d.A)([(0,p.EM)("ha-menu-button")],(function(e,t){var n=function(t){function n(){var t;(0,u.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,c.A)(this,n,[].concat(r)),e(t),t}return(0,l.A)(n,t),(0,s.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,p.MZ)({type:Boolean})],key:"hassio",value:function(){return!1}},{kind:"field",decorators:[(0,p.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,p.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,p.wk)()],key:"_hasNotifications",value:function(){return!1}},{kind:"field",decorators:[(0,p.wk)()],key:"_show",value:function(){return!1}},{kind:"field",key:"_alwaysVisible",value:function(){return!1}},{kind:"field",key:"_attachNotifOnConnect",value:function(){return!1}},{kind:"field",key:"_unsubNotifications",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,h.A)(n,"connectedCallback",this,3)([]),this._attachNotifOnConnect&&(this._attachNotifOnConnect=!1,this._subscribeNotifications())}},{kind:"method",key:"disconnectedCallback",value:function(){(0,h.A)(n,"disconnectedCallback",this,3)([]),this._unsubNotifications&&(this._attachNotifOnConnect=!0,this._unsubNotifications(),this._unsubNotifications=void 0)}},{kind:"method",key:"render",value:function(){if(!this._show)return f.s6;var e=this._hasNotifications&&(this.narrow||"always_hidden"===this.hass.dockedSidebar);return(0,f.qy)(i||(i=(0,o.A)([' <ha-icon-button .label="','" .path="','" @click="','"></ha-icon-button> '," "])),this.hass.localize("ui.sidebar.sidebar_toggle"),"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",this._toggleMenu,e?(0,f.qy)(r||(r=(0,o.A)(['<div class="dot"></div>']))):"")}},{kind:"method",key:"firstUpdated",value:function(e){(0,h.A)(n,"firstUpdated",this,3)([e]),this.hassio&&(this._alwaysVisible=(Number(window.parent.frontendVersion)||0)<20190710)}},{kind:"method",key:"willUpdate",value:function(e){if((0,h.A)(n,"willUpdate",this,3)([e]),e.has("narrow")||e.has("hass")){var t=e.has("hass")?e.get("hass"):this.hass,i=(e.has("narrow")?e.get("narrow"):this.narrow)||"always_hidden"===(null==t?void 0:t.dockedSidebar),r=this.narrow||"always_hidden"===this.hass.dockedSidebar;this.hasUpdated&&i===r||(this._show=r||this._alwaysVisible,r?this._subscribeNotifications():this._unsubNotifications&&(this._unsubNotifications(),this._unsubNotifications=void 0))}}},{kind:"method",key:"_subscribeNotifications",value:function(){var e=this;if(this._unsubNotifications)throw new Error("Already subscribed");this._unsubNotifications=(0,m.V)(this.hass.connection,(function(t){e._hasNotifications=t.length>0}))}},{kind:"method",key:"_toggleMenu",value:function(){(0,v.r)(this,"hass-toggle-menu")}},{kind:"get",static:!0,key:"styles",value:function(){return(0,f.AH)(a||(a=(0,o.A)([":host{position:relative}.dot{pointer-events:none;position:absolute;background-color:var(--accent-color);width:12px;height:12px;top:9px;right:7px;inset-inline-end:7px;inset-inline-start:initial;border-radius:50%;border:2px solid var(--app-header-background-color)}"])))}}]}}),f.WF)},77312:function(e,t,n){var i,r,a,o,s=n(33994),u=n(22858),c=n(64599),l=n(35806),d=n(71008),h=n(62193),f=n(2816),p=n(27927),v=n(35890),m=(n(81027),n(24500)),k=n(14691),g=n(15112),b=n(29818),_=n(18409),y=n(61441);n(28066),(0,p.A)([(0,b.EM)("ha-select")],(function(e,t){var n=function(t){function n(){var t;(0,d.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,h.A)(this,n,[].concat(r)),e(t),t}return(0,f.A)(n,t),(0,l.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,b.MZ)({type:Boolean})],key:"icon",value:function(){return!1}},{kind:"field",decorators:[(0,b.MZ)({type:Boolean,reflect:!0})],key:"clearable",value:function(){return!1}},{kind:"method",key:"render",value:function(){return(0,g.qy)(i||(i=(0,c.A)([" "," "," "])),(0,v.A)(n,"render",this,3)([]),this.clearable&&!this.required&&!this.disabled&&this.value?(0,g.qy)(r||(r=(0,c.A)(['<ha-icon-button label="clear" @click="','" .path="','"></ha-icon-button>'])),this._clearValue,"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"):g.s6)}},{kind:"method",key:"renderLeadingIcon",value:function(){return this.icon?(0,g.qy)(a||(a=(0,c.A)(['<span class="mdc-select__icon"><slot name="icon"></slot></span>']))):g.s6}},{kind:"method",key:"connectedCallback",value:function(){(0,v.A)(n,"connectedCallback",this,3)([]),window.addEventListener("translations-updated",this._translationsUpdated)}},{kind:"method",key:"disconnectedCallback",value:function(){(0,v.A)(n,"disconnectedCallback",this,3)([]),window.removeEventListener("translations-updated",this._translationsUpdated)}},{kind:"method",key:"_clearValue",value:function(){!this.disabled&&this.value&&(this.valueSetDirectly=!0,this.select(-1),this.mdcFoundation.handleChange())}},{kind:"field",key:"_translationsUpdated",value:function(){var e=this;return(0,_.s)((0,u.A)((0,s.A)().mark((function t(){return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,y.E)();case 2:e.layoutOptions();case 3:case"end":return t.stop()}}),t)}))),500)}},{kind:"field",static:!0,key:"styles",value:function(){return[k.R,(0,g.AH)(o||(o=(0,c.A)([":host([clearable]){position:relative}.mdc-select:not(.mdc-select--disabled) .mdc-select__icon{color:var(--secondary-text-color)}.mdc-select__anchor{width:var(--ha-select-min-width,200px)}.mdc-select--filled .mdc-select__anchor{height:var(--ha-select-height,56px)}.mdc-select--filled .mdc-floating-label{inset-inline-start:12px;inset-inline-end:initial;direction:var(--direction)}.mdc-select--filled.mdc-select--with-leading-icon .mdc-floating-label{inset-inline-start:48px;inset-inline-end:initial;direction:var(--direction)}.mdc-select .mdc-select__anchor{padding-inline-start:12px;padding-inline-end:0px;direction:var(--direction)}.mdc-select__anchor .mdc-floating-label--float-above{transform-origin:var(--float-start)}.mdc-select__selected-text-container{padding-inline-end:var(--select-selected-text-padding-end,0px)}:host([clearable]) .mdc-select__selected-text-container{padding-inline-end:var(--select-selected-text-padding-end,12px)}ha-icon-button{position:absolute;top:10px;right:28px;--mdc-icon-button-size:36px;--mdc-icon-size:20px;color:var(--secondary-text-color);inset-inline-start:initial;inset-inline-end:28px;direction:var(--direction)}"])))]}}]}}),m.o)},90431:function(e,t,n){var i,r,a,o,s=n(64599),u=n(35806),c=n(71008),l=n(62193),d=n(2816),h=n(27927),f=n(35890),p=(n(81027),n(44331)),v=n(67449),m=n(15112),k=n(29818),g=n(74005);(0,h.A)([(0,k.EM)("ha-textfield")],(function(e,t){var n=function(t){function n(){var t;(0,c.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,l.A)(this,n,[].concat(r)),e(t),t}return(0,d.A)(n,t),(0,u.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,k.MZ)({type:Boolean})],key:"invalid",value:void 0},{kind:"field",decorators:[(0,k.MZ)({attribute:"error-message"})],key:"errorMessage",value:void 0},{kind:"field",decorators:[(0,k.MZ)({type:Boolean})],key:"icon",value:function(){return!1}},{kind:"field",decorators:[(0,k.MZ)({type:Boolean})],key:"iconTrailing",value:function(){return!1}},{kind:"field",decorators:[(0,k.MZ)()],key:"autocomplete",value:void 0},{kind:"field",decorators:[(0,k.MZ)()],key:"autocorrect",value:void 0},{kind:"field",decorators:[(0,k.MZ)({attribute:"input-spellcheck"})],key:"inputSpellcheck",value:void 0},{kind:"field",decorators:[(0,k.P)("input")],key:"formElement",value:void 0},{kind:"method",key:"updated",value:function(e){(0,f.A)(n,"updated",this,3)([e]),(e.has("invalid")||e.has("errorMessage"))&&(this.setCustomValidity(this.invalid?this.errorMessage||this.validationMessage||"Invalid":""),(this.invalid||this.validateOnInitialRender||e.has("invalid")&&void 0!==e.get("invalid"))&&this.reportValidity()),e.has("autocomplete")&&(this.autocomplete?this.formElement.setAttribute("autocomplete",this.autocomplete):this.formElement.removeAttribute("autocomplete")),e.has("autocorrect")&&(this.autocorrect?this.formElement.setAttribute("autocorrect",this.autocorrect):this.formElement.removeAttribute("autocorrect")),e.has("inputSpellcheck")&&(this.inputSpellcheck?this.formElement.setAttribute("spellcheck",this.inputSpellcheck):this.formElement.removeAttribute("spellcheck"))}},{kind:"method",key:"renderIcon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?"trailing":"leading";return(0,m.qy)(i||(i=(0,s.A)([' <span class="mdc-text-field__icon mdc-text-field__icon--','" tabindex="','"> <slot name="','Icon"></slot> </span> '])),n,t?1:-1,n)}},{kind:"field",static:!0,key:"styles",value:function(){return[v.R,(0,m.AH)(r||(r=(0,s.A)([".mdc-text-field__input{width:var(--ha-textfield-input-width,100%)}.mdc-text-field:not(.mdc-text-field--with-leading-icon){padding:var(--text-field-padding,0px 16px)}.mdc-text-field__affix--suffix{padding-left:var(--text-field-suffix-padding-left,12px);padding-right:var(--text-field-suffix-padding-right,0px);padding-inline-start:var(--text-field-suffix-padding-left,12px);padding-inline-end:var(--text-field-suffix-padding-right,0px);direction:ltr}.mdc-text-field--with-leading-icon{padding-inline-start:var(--text-field-suffix-padding-left,0px);padding-inline-end:var(--text-field-suffix-padding-right,16px);direction:var(--direction)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:var(--text-field-suffix-padding-left,0px);padding-right:var(--text-field-suffix-padding-right,0px);padding-inline-start:var(--text-field-suffix-padding-left,0px);padding-inline-end:var(--text-field-suffix-padding-right,0px)}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__affix--suffix{color:var(--secondary-text-color)}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__icon{color:var(--secondary-text-color)}.mdc-text-field__icon--leading{margin-inline-start:16px;margin-inline-end:8px;direction:var(--direction)}.mdc-text-field__icon--trailing{padding:var(--textfield-icon-trailing-padding,12px)}.mdc-floating-label:not(.mdc-floating-label--float-above){text-overflow:ellipsis;width:inherit;padding-right:30px;padding-inline-end:30px;padding-inline-start:initial;box-sizing:border-box;direction:var(--direction)}input{text-align:var(--text-field-text-align,start)}::-ms-reveal{display:none}:host([no-spinner]) input::-webkit-inner-spin-button,:host([no-spinner]) input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}:host([no-spinner]) input[type=number]{-moz-appearance:textfield}.mdc-text-field__ripple{overflow:hidden}.mdc-text-field{overflow:var(--text-field-overflow)}.mdc-floating-label{inset-inline-start:16px!important;inset-inline-end:initial!important;transform-origin:var(--float-start);direction:var(--direction);text-align:var(--float-start)}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px - var(--text-field-suffix-padding-left,0px));inset-inline-start:calc(48px + var(--text-field-suffix-padding-left,0px))!important;inset-inline-end:initial!important;direction:var(--direction)}.mdc-text-field__input[type=number]{direction:var(--direction)}.mdc-text-field__affix--prefix{padding-right:var(--text-field-prefix-padding-right,2px);padding-inline-end:var(--text-field-prefix-padding-right,2px);padding-inline-start:initial}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__affix--prefix{color:var(--mdc-text-field-label-ink-color)}"]))),"rtl"===g.G.document.dir?(0,m.AH)(a||(a=(0,s.A)([".mdc-floating-label,.mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field__icon--leading,.mdc-text-field__input[type=number]{direction:rtl;--direction:rtl}"]))):(0,m.AH)(o||(o=(0,s.A)([""])))]}}]}}),p.J)},77679:function(e,t,n){n.d(t,{V:function(){return a}});var i=n(71008),r=n(35806),a=(n(26098),n(10507),n(9241),function(e,t){var n=new o,i=e.subscribeMessage((function(e){return t(n.processMessage(e))}),{type:"persistent_notification/subscribe"});return function(){i.then((function(e){return null==e?void 0:e()}))}}),o=function(){return(0,r.A)((function e(){(0,i.A)(this,e),this.notifications=void 0,this.notifications={}}),[{key:"processMessage",value:function(e){if("removed"===e.type)for(var t=0,n=Object.keys(e.notifications);t<n.length;t++){var i=n[t];delete this.notifications[i]}else this.notifications=Object.assign(Object.assign({},this.notifications),e.notifications);return Object.values(this.notifications)}}])}()},77980:function(e,t,n){var i,r,a,o,s,u=n(64599),c=n(35806),l=n(71008),d=n(62193),h=n(2816),f=n(27927),p=(n(81027),n(15112)),v=n(29818),m=n(37456),k=(n(45346),n(11804),n(55321));(0,f.A)([(0,v.EM)("hass-subpage")],(function(e,t){var n=function(t){function n(){var t;(0,l.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,d.A)(this,n,[].concat(r)),e(t),t}return(0,h.A)(n,t),(0,c.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,v.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,v.MZ)()],key:"header",value:void 0},{kind:"field",decorators:[(0,v.MZ)({type:Boolean,attribute:"main-page"})],key:"mainPage",value:function(){return!1}},{kind:"field",decorators:[(0,v.MZ)({type:String,attribute:"back-path"})],key:"backPath",value:void 0},{kind:"field",decorators:[(0,v.MZ)({attribute:!1})],key:"backCallback",value:void 0},{kind:"field",decorators:[(0,v.MZ)({type:Boolean,reflect:!0})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,v.MZ)({type:Boolean})],key:"supervisor",value:function(){return!1}},{kind:"field",decorators:[(0,m.a)(".content")],key:"_savedScrollPos",value:void 0},{kind:"method",key:"render",value:function(){var e;return(0,p.qy)(i||(i=(0,u.A)([' <div class="toolbar"> ',' <div class="main-title"><slot name="header">','</slot></div> <slot name="toolbar-icon"></slot> </div> <div class="content ha-scrollbar" @scroll="','"> <slot></slot> </div> <div id="fab"> <slot name="fab"></slot> </div> '])),this.mainPage||null!==(e=history.state)&&void 0!==e&&e.root?(0,p.qy)(r||(r=(0,u.A)([' <ha-menu-button .hassio="','" .hass="','" .narrow="','"></ha-menu-button> '])),this.supervisor,this.hass,this.narrow):this.backPath?(0,p.qy)(a||(a=(0,u.A)([' <a href="','"> <ha-icon-button-arrow-prev .hass="','"></ha-icon-button-arrow-prev> </a> '])),this.backPath,this.hass):(0,p.qy)(o||(o=(0,u.A)([' <ha-icon-button-arrow-prev .hass="','" @click="','"></ha-icon-button-arrow-prev> '])),this.hass,this._backTapped),this.header,this._saveScrollPos)}},{kind:"method",decorators:[(0,v.Ls)({passive:!0})],key:"_saveScrollPos",value:function(e){this._savedScrollPos=e.target.scrollTop}},{kind:"method",key:"_backTapped",value:function(){this.backCallback?this.backCallback():history.back()}},{kind:"get",static:!0,key:"styles",value:function(){return[k.dp,(0,p.AH)(s||(s=(0,u.A)([":host{display:block;height:100%;background-color:var(--primary-background-color);overflow:hidden;position:relative}:host([narrow]){width:100%;position:fixed}.toolbar{display:flex;align-items:center;font-size:20px;height:var(--header-height);padding:8px 12px;background-color:var(--app-header-background-color);font-weight:400;color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box}@media (max-width:599px){.toolbar{padding:4px}}.toolbar a{color:var(--sidebar-text-color);text-decoration:none}::slotted([slot=toolbar-icon]),ha-icon-button-arrow-prev,ha-menu-button{pointer-events:auto;color:var(--sidebar-icon-color)}.main-title{margin:var(--margin-title);line-height:20px;flex-grow:1}.content{position:relative;width:100%;height:calc(100% - 1px - var(--header-height));overflow-y:auto;overflow:auto;-webkit-overflow-scrolling:touch}#fab{position:absolute;right:calc(16px + env(safe-area-inset-right));inset-inline-end:calc(16px + env(safe-area-inset-right));inset-inline-start:initial;bottom:calc(16px + env(safe-area-inset-bottom));z-index:1;display:flex;flex-wrap:wrap;justify-content:flex-end;gap:8px}:host([narrow]) #fab.tabs{bottom:calc(84px + env(safe-area-inset-bottom))}#fab[is-wide]{bottom:24px;right:24px;inset-inline-end:24px;inset-inline-start:initial}"])))]}}]}}),p.WF)},53564:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(i,a){var o,s,u,c,l,d,h,f,p,v,m,k,g,b,_,y;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.r(t),n.d(t,{AssistDebug:function(){return y}}),o=n(64599),s=n(35806),u=n(71008),c=n(62193),l=n(2816),d=n(27927),h=n(81027),f=n(15112),p=n(29818),v=n(76083),m=n(6011),!(k=i([v,m])).then){e.next=23;break}return e.next=19,k;case 19:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=24;break;case 23:e.t0=k;case 24:g=e.t0,v=g[0],m=g[1],y=(0,d.A)([(0,p.EM)("assist-debug")],(function(e,t){var n=function(t){function n(){var t;(0,u.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,c.A)(this,n,[].concat(r)),e(t),t}return(0,l.A)(n,t),(0,s.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,p.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,p.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,p.MZ)({attribute:!1})],key:"route",value:void 0},{kind:"method",key:"render",value:function(){var e=this.route.path.substring(1);return e?(0,f.qy)(b||(b=(0,o.A)(['<assist-pipeline-debug .hass="','" .narrow="','" .pipelineId="','"></assist-pipeline-debug>'])),this.hass,this.narrow,e):(0,f.qy)(_||(_=(0,o.A)(['<assist-pipeline-run-debug .hass="','" .narrow="','"></assist-pipeline-run-debug>'])),this.hass,this.narrow)}}]}}),f.WF),a(),e.next=34;break;case 31:e.prev=31,e.t2=e.catch(0),a(e.t2);case 34:case"end":return e.stop()}}),e,null,[[0,31]])})));return function(t,n){return e.apply(this,arguments)}}())},76083:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(t,i){var a,o,s,u,c,l,d,h,f,p,v,m,k,g,b,_,y,x,A,w,M,C,Z,z,I,L,F,H,D,P,R,N,T;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=n(33994),o=n(22858),s=n(64599),u=n(35806),c=n(71008),l=n(62193),d=n(2816),h=n(27927),f=n(35890),p=n(81027),v=n(44124),m=n(88557),k=n(82386),g=n(53165),b=n(39790),_=n(253),y=n(94438),x=n(15112),A=n(29818),w=n(66066),M=n(8581),C=n(79228),Z=n(6121),n(77980),z=n(55321),I=n(88362),!(L=t([M,I])).then){e.next=43;break}return e.next=39,L;case 39:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=44;break;case 43:e.t0=L;case 44:F=e.t0,M=F[0],I=F[1],(0,h.A)([(0,A.EM)("assist-pipeline-debug")],(function(e,t){var n,i,r=function(t){function n(){var t;(0,c.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,l.A)(this,n,[].concat(r)),e(t),t}return(0,d.A)(n,t),(0,u.A)(n)}(t);return{F:r,d:[{kind:"field",decorators:[(0,A.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,A.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,A.MZ)({attribute:!1})],key:"route",value:void 0},{kind:"field",decorators:[(0,A.MZ)()],key:"pipelineId",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_runId",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_runs",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_events",value:void 0},{kind:"field",key:"_unsubRefreshEventsID",value:void 0},{kind:"method",key:"render",value:function(){var e,t,n=this;return(0,x.qy)(H||(H=(0,s.A)(['<hass-subpage .narrow="','" .hass="','" .header="','"> <a href="/config/voice-assistants/debug?pipeline=','" slot="toolbar-icon"><ha-icon-button .path="','" .label="','"></ha-icon-button></a> <div class="toolbar"> '," </div> ",' <div class="content"> '," </div> </hass-subpage>"])),this.narrow,this.hass,this.hass.localize("ui.panel.config.voice_assistants.debug.header"),this.pipelineId,"M8,7A2,2 0 0,1 10,9V14A2,2 0 0,1 8,16A2,2 0 0,1 6,14V9A2,2 0 0,1 8,7M14,14C14,16.97 11.84,19.44 9,19.92V22H7V19.92C4.16,19.44 2,16.97 2,14H4A4,4 0 0,0 8,18A4,4 0 0,0 12,14H14M21.41,9.41L17.17,13.66L18.18,10H14A2,2 0 0,1 12,8V4A2,2 0 0,1 14,2H20A2,2 0 0,1 22,4V8C22,8.55 21.78,9.05 21.41,9.41Z",this.hass.localize("ui.panel.config.voice_assistants.debug.start_debug_run"),null!==(e=this._runs)&&void 0!==e&&e.length?(0,x.qy)(D||(D=(0,s.A)([' <ha-icon-button .disabled="','" .label="','" @click="','" .path="','"></ha-icon-button> <select .value="','" @change="','"> ',' </select> <ha-icon-button .disabled="','" .label="','" @click="','" .path="','"></ha-icon-button> '])),this._runs[this._runs.length-1].pipeline_run_id===this._runId,this.hass.localize("ui.panel.config.voice_assistants.debug.older_run"),this._pickOlderRun,"M1,12L5,16V13H17.17C17.58,14.17 18.69,15 20,15A3,3 0 0,0 23,12A3,3 0 0,0 20,9C18.69,9 17.58,9.83 17.17,11H5V8L1,12Z",this._runId,this._pickRun,(0,w.u)(this._runs,(function(e){return e.pipeline_run_id}),(function(e){return(0,x.qy)(P||(P=(0,s.A)(['<option value="','"> '," </option>"])),e.pipeline_run_id,(0,M.yg)(new Date(e.timestamp),n.hass.locale,n.hass.config))})),this._runs[0].pipeline_run_id===this._runId,this.hass.localize("ui.panel.config.voice_assistants.debug.newer_run"),this._pickNewerRun,"M23,12L19,16V13H6.83C6.42,14.17 5.31,15 4,15A3,3 0 0,1 1,12A3,3 0 0,1 4,9C5.31,9 6.42,9.83 6.83,11H19V8L23,12Z"):"",0===(null===(t=this._runs)||void 0===t?void 0:t.length)?(0,x.qy)(R||(R=(0,s.A)(['<div class="container"> '," </div>"])),this.hass.localize("ui.panel.config.voice_assistants.debug.no_runs_found")):"",this._events?(0,x.qy)(N||(N=(0,s.A)(['<assist-render-pipeline-events .hass="','" .events="','"></assist-render-pipeline-events>'])),this.hass,this._events):"")}},{kind:"method",key:"willUpdate",value:function(e){var t=!1;e.has("pipelineId")&&(this._fetchRuns(),t=!0),e.has("_runId")&&(this._fetchEvents(),t=!0),t&&this._unsubRefreshEventsID&&(clearTimeout(this._unsubRefreshEventsID),this._unsubRefreshEventsID=void 0)}},{kind:"method",key:"disconnectedCallback",value:function(){(0,f.A)(r,"disconnectedCallback",this,3)([]),this._unsubRefreshEventsID&&(clearTimeout(this._unsubRefreshEventsID),this._unsubRefreshEventsID=void 0)}},{kind:"method",key:"_fetchRuns",value:(i=(0,o.A)((0,a.A)().mark((function e(){var t=this;return(0,a.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.pipelineId){e.next=3;break}return this._runs=void 0,e.abrupt("return");case 3:return e.prev=3,e.next=6,(0,C.Uc)(this.hass,this.pipelineId);case 6:this._runs=e.sent.pipeline_runs.reverse(),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),(0,Z.showAlertDialog)(this,{title:"Failed to fetch pipeline runs",text:e.t0.message}),e.abrupt("return");case 13:if(this._runs.length){e.next=15;break}return e.abrupt("return");case 15:this._runId&&this._runs.find((function(e){return e.pipeline_run_id===t._runId}))||(this._runId=this._runs[0].pipeline_run_id,this._fetchEvents());case 16:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"_fetchEvents",value:(n=(0,o.A)((0,a.A)().mark((function e(){var t,n=this;return(0,a.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._runId){e.next=3;break}return this._events=void 0,e.abrupt("return");case 3:return e.prev=3,e.next=6,(0,C.hJ)(this.hass,this.pipelineId,this._runId);case 6:this._events=e.sent.events,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),(0,Z.showAlertDialog)(this,{title:"Failed to fetch events",text:e.t0.message}),e.abrupt("return");case 13:null!==(t=this._events)&&void 0!==t&&t.length&&!["run-end","error"].includes(this._events[this._events.length-1].type)&&(this._unsubRefreshEventsID=window.setTimeout((function(){n._fetchEvents()}),2e3));case 14:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"_pickOlderRun",value:function(){var e=this,t=this._runs.findIndex((function(t){return t.pipeline_run_id===e._runId}));this._runId=this._runs[t+1].pipeline_run_id}},{kind:"method",key:"_pickNewerRun",value:function(){var e=this,t=this._runs.findIndex((function(t){return t.pipeline_run_id===e._runId}));this._runId=this._runs[t-1].pipeline_run_id}},{kind:"method",key:"_pickRun",value:function(e){this._runId=e.target.value}},{kind:"field",static:!0,key:"styles",value:function(){return[z.RF,(0,x.AH)(T||(T=(0,s.A)([".toolbar{display:flex;align-items:center;justify-content:center;height:var(--header-height);background-color:var(--primary-background-color);color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box}.content{padding:24px 0 32px;max-width:600px;margin:0 auto;direction:ltr}.container{padding:16px}assist-render-pipeline-run{padding-top:16px}"])))]}}]}}),x.WF),i(),e.next=57;break;case 54:e.prev=54,e.t2=e.catch(0),i(e.t2);case 57:case"end":return e.stop()}}),e,null,[[0,54]])})));return function(t,n){return e.apply(this,arguments)}}())},6011:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(t,i){var a,o,s,u,c,l,d,h,f,p,v,m,k,g,b,_,y,x,A,w,M,C,Z,z,I,L,F,H,D,P,R,N,T,B,E,q,V,S,U,j,O,W,J,G,Y,K,Q,X,$,ee,te,ne,ie,re,ae,oe,se,ue,ce,le,de,he,fe,pe,ve,me,ke,ge,be,_e,ye,xe,Ae,we,Me,Ce,Ze;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=n(41981),o=n(64782),s=n(33994),u=n(22858),c=n(64599),l=n(35806),d=n(71008),h=n(62193),f=n(2816),p=n(27927),v=n(81027),m=n(82386),k=n(95737),g=n(97741),b=n(89655),_=n(18193),y=n(96678),x=n(34927),A=n(99770),w=n(3443),M=n(42699),C=n(72735),Z=n(26098),z=n(39790),I=n(70904),L=n(33026),F=n(809),H=n(1965),D=n(47185),P=n(96141),R=n(40142),N=n(5255),T=n(854),B=n(95308),E=n(98333),q=n(12723),V=n(89593),S=n(55422),U=n(40866),j=n(24952),O=n(19363),W=n(9208),J=n(46182),G=n(88917),Y=n(16252),K=n(44514),Q=n(73432),X=n(50164),$=n(70800),ee=n(8691),te=n(14920),ne=n(2452),ie=n(86115),re=n(89811),ae=n(97152),oe=n(16891),se=n(15112),ue=n(29818),ce=n(56932),le=n(12609),n(77372),n(88725),n(24284),n(90431),de=n(79228),he=n(6121),n(77980),fe=n(55321),pe=n(47287),ve=n(30489),me=n(87094),!(ke=t([le,me])).then){e.next=126;break}return e.next=122,ke;case 122:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=127;break;case 126:e.t0=ke;case 127:ge=e.t0,le=ge[0],me=ge[1],(0,p.A)([(0,ue.EM)("assist-pipeline-run-debug")],(function(e,t){var n,i,r,p,v=function(t){function n(){var t;(0,d.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,h.A)(this,n,[].concat(r)),e(t),t}return(0,f.A)(n,t),(0,l.A)(n)}(t);return{F:v,d:[{kind:"field",decorators:[(0,ue.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,ue.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,ue.wk)()],key:"_pipelineRuns",value:function(){return[]}},{kind:"field",decorators:[(0,ue.P)("#continue-conversation")],key:"_continueConversationCheckbox",value:void 0},{kind:"field",decorators:[(0,ue.P)("#continue-conversation-text")],key:"_continueConversationTextField",value:void 0},{kind:"field",key:"_audioBuffer",value:void 0},{kind:"field",decorators:[(0,ue.wk)()],key:"_finished",value:function(){return!1}},{kind:"field",decorators:[(0,ue.wk)()],key:"_pipelineId",value:function(){return(0,ce.p9)("pipeline")||void 0}},{kind:"method",key:"render",value:function(){var e=this;return(0,se.qy)(be||(be=(0,c.A)([' <hass-subpage .narrow="','" .hass="','" .header="','"> ',' <div class="content"> <div class="start-row"> '," </div> "," </div> </hass-subpage> "])),this.narrow,this.hass,this.hass.localize("ui.panel.config.voice_assistants.debug.pipeline.header"),this._pipelineRuns.length>0?(0,se.qy)(_e||(_e=(0,c.A)([' <ha-button slot="toolbar-icon" @click="','" .disabled="','"> ',' </ha-button> <ha-button slot="toolbar-icon" @click="','"> '," </ha-button> "])),this._clearConversation,!this._finished,this.hass.localize("ui.common.clear"),this._downloadConversation,this.hass.localize("ui.common.download")):"",0===this._pipelineRuns.length?(0,se.qy)(ye||(ye=(0,c.A)([' <ha-assist-pipeline-picker .hass="','" .value="','" @value-changed="','"></ha-assist-pipeline-picker> <div class="start-buttons"> <ha-button raised @click="','"> ',' </ha-button> <ha-button raised @click="','" .disabled="','"> ',' </ha-button> <ha-button raised @click="','" .disabled="','"> '," </ha-button> </div> "])),this.hass,this._pipelineId,this._pipelinePicked,this._runTextPipeline,this.hass.localize("ui.panel.config.voice_assistants.debug.pipeline.run_text_pipeline"),this._runAudioPipeline,!window.isSecureContext||!(window.AudioContext||window.webkitAudioContext),this.hass.localize("ui.panel.config.voice_assistants.debug.pipeline.run_audio_pipeline"),this._runAudioWakeWordPipeline,!window.isSecureContext||!(window.AudioContext||window.webkitAudioContext),this.hass.localize("ui.panel.config.voice_assistants.debug.pipeline.run_audio_with_wake")):"intent"===this._pipelineRuns[0].init_options.start_stage?(0,se.qy)(xe||(xe=(0,c.A)([' <ha-textfield id="continue-conversation-text" .label="','" .disabled="','" @keydown="','"></ha-textfield> <ha-button @click="','" .disabled="','"> '," </ha-button> "])),this.hass.localize("ui.panel.config.voice_assistants.debug.pipeline.response"),!this._finished,this._handleContinueKeyDown,this._runTextPipeline,!this._finished,this.hass.localize("ui.panel.config.voice_assistants.debug.pipeline.send")):this._finished?"wake_word"===this._pipelineRuns[0].init_options.start_stage?(0,se.qy)(Ae||(Ae=(0,c.A)([' <ha-button @click="','"> '," </ha-button> "])),this._runAudioWakeWordPipeline,this.hass.localize("ui.panel.config.voice_assistants.debug.pipeline.continue_listening")):(0,se.qy)(we||(we=(0,c.A)(['<ha-button @click="','"> '," </ha-button>"])),this._runAudioPipeline,this.hass.localize("ui.panel.config.voice_assistants.debug.pipeline.continue_talking")):(0,se.qy)(Me||(Me=(0,c.A)([' <ha-formfield .label="','"> <ha-checkbox id="continue-conversation" checked="checked"></ha-checkbox> </ha-formfield> '])),this.hass.localize("ui.panel.config.voice_assistants.debug.pipeline.continue_conversation")),this._pipelineRuns.map((function(t){return null===t?"":(0,se.qy)(Ce||(Ce=(0,c.A)([' <assist-render-pipeline-run .hass="','" .pipelineRun="','"></assist-render-pipeline-run> '])),e.hass,t)})))}},{kind:"get",key:"conversationId",value:function(){var e;return 0===this._pipelineRuns.length?null:(null===(e=this._pipelineRuns[0].intent)||void 0===e||null===(e=e.intent_output)||void 0===e?void 0:e.conversation_id)||null}},{kind:"method",key:"_runTextPipeline",value:(p=(0,u.A)((0,s.A)().mark((function e(){var t,n,i=this;return(0,s.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._continueConversationTextField)){e.next=5;break}n=t.value,e.next=8;break;case 5:return e.next=7,(0,he.showPromptDialog)(this,{title:this.hass.localize("ui.panel.config.voice_assistants.debug.pipeline.input_text"),confirmText:this.hass.localize("ui.panel.config.voice_assistants.debug.pipeline.run")});case 7:n=e.sent;case 8:if(n){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,this._doRunPipeline((function(e){["done","error"].includes(e.stage)&&(i._finished=!0,t&&(t.value=""))}),{start_stage:"intent",end_stage:"intent",input:{text:n}});case 12:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{kind:"method",key:"_runAudioWakeWordPipeline",value:(r=(0,u.A)((0,s.A)().mark((function e(){var t,n,i,r=this;return(0,s.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new pe.N((function(e){r._audioBuffer?r._audioBuffer.push(e):r._sendAudioChunk(e)})),this._audioBuffer=[],e.next=4,t.start();case 4:return i=function(){var e;if(i=void 0,t.close(),"stt"===(null===(e=n)||void 0===e?void 0:e.stage)&&!1===n.stt.done){if(r._audioBuffer){var a,s=(0,o.A)(r._audioBuffer);try{for(s.s();!(a=s.n()).done;){var u=a.value;r._sendAudioChunk(u)}}catch(c){s.e(c)}finally{s.f()}}r._sendAudioChunk(new Int16Array)}r._audioBuffer=void 0},e.next=7,this._doRunPipeline((function(e){if(n=e,"wake_word"===e.stage&&r._audioBuffer){var t,a=(0,o.A)(r._audioBuffer);try{for(a.s();!(t=a.n()).done;){var s=t.value;r._sendAudioChunk(s)}}catch(l){a.e(l)}finally{a.f()}r._audioBuffer=void 0}if(!["ready","wake_word","stt"].includes(e.stage)&&i&&i(),"done"!==e.stage||e.error)("done"===e.stage&&e.error||"error"===e.stage)&&(r._finished=!0);else{var u=e.tts.tts_output.url,c=new Audio(u);c.addEventListener("ended",(function(){r.isConnected&&r._continueConversationCheckbox.checked?r._runAudioWakeWordPipeline():r._finished=!0})),c.play()}}),{start_stage:"wake_word",end_stage:"tts",input:{sample_rate:t.sampleRate}});case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{kind:"method",key:"_runAudioPipeline",value:(i=(0,u.A)((0,s.A)().mark((function e(){var t,n,i,r=this;return(0,s.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new pe.N((function(e){r._audioBuffer?r._audioBuffer.push(e):r._sendAudioChunk(e)})),this._audioBuffer=[],e.next=4,t.start();case 4:return i=function(){var e;if(i=void 0,t.close(),"stt"===(null===(e=n)||void 0===e?void 0:e.stage)&&!1===n.stt.done){if(r._audioBuffer){var a,s=(0,o.A)(r._audioBuffer);try{for(s.s();!(a=s.n()).done;){var u=a.value;r._sendAudioChunk(u)}}catch(c){s.e(c)}finally{s.f()}}r._sendAudioChunk(new Int16Array)}r._audioBuffer=void 0},e.next=7,this._doRunPipeline((function(e){if(n=e,"stt"===e.stage&&r._audioBuffer){var t,a=(0,o.A)(r._audioBuffer);try{for(a.s();!(t=a.n()).done;){var s=t.value;r._sendAudioChunk(s)}}catch(l){a.e(l)}finally{a.f()}r._audioBuffer=void 0}if(!["ready","stt"].includes(e.stage)&&i&&i(),"done"===e.stage){var u=e.tts.tts_output.url,c=new Audio(u);c.addEventListener("ended",(function(){r.isConnected&&r._continueConversationCheckbox.checked?r._runAudioPipeline():r._finished=!0})),c.play()}else"error"===e.stage&&(r._finished=!0)}),{start_stage:"stt",end_stage:"tts",input:{sample_rate:t.sampleRate}});case 7:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"_doRunPipeline",value:(n=(0,u.A)((0,s.A)().mark((function e(t,n){var i,r=this;return(0,s.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._finished=!1,i=!1,e.prev=2,e.next=5,(0,de.AH)(this.hass,(function(e){i?r._pipelineRuns=[e].concat((0,a.A)(r._pipelineRuns.slice(1))):(r._pipelineRuns=[e].concat((0,a.A)(r._pipelineRuns)),i=!0),t(e)}),Object.assign(Object.assign({},n),{},{pipeline:this._pipelineId,conversation_id:this.conversationId}));case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),e.next=11,(0,he.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.voice_assistants.debug.pipeline.error_starting"),text:e.t0.message||e.t0});case 11:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e,t){return n.apply(this,arguments)})},{kind:"method",key:"_sendAudioChunk",value:function(e){this.hass.connection.socket.binaryType="arraybuffer";var t=new Uint8Array(1+2*e.length);t[0]=this._pipelineRuns[0].run.runner_data.stt_binary_handler_id,t.set(new Uint8Array(e.buffer),1),this.hass.connection.socket.send(t)}},{kind:"method",key:"_handleContinueKeyDown",value:function(e){"Enter"===e.key&&this._runTextPipeline()}},{kind:"method",key:"_clearConversation",value:function(){this._pipelineRuns=[]}},{kind:"method",key:"_downloadConversation",value:function(){(0,ve.R)("data:text/plain;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(this._pipelineRuns,null,2))),"conversation.json")}},{kind:"method",key:"_pipelinePicked",value:function(e){this._pipelineId=e.detail.value}},{kind:"field",static:!0,key:"styles",value:function(){return[fe.RF,(0,se.AH)(Ze||(Ze=(0,c.A)([".content{padding:24px 0 32px;max-width:600px;margin:0 auto;direction:ltr}.start-buttons{display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:center}.start-row{display:flex;justify-content:space-around;align-items:center;flex-wrap:wrap;margin:0 16px 16px;direction:var(--direction)}ha-assist-pipeline-picker{display:block;width:100%;margin-bottom:16px}.start-row ha-textfield{flex:1}assist-render-pipeline-run{padding-top:16px}assist-render-pipeline-run+assist-render-pipeline-run{border-top:1px solid var(--divider-color)}"])))]}}]}}),se.WF),i(),e.next=137;break;case 134:e.prev=134,e.t2=e.catch(0),i(e.t2);case 137:case"end":return e.stop()}}),e,null,[[0,134]])})));return function(t,n){return e.apply(this,arguments)}}())},13265:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(t,i){var a,o,s,u,c,l,d,h,f,p,v,m,k,g,b,_,y,x,A;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n(33994),o=n(22858),s=n(95737),u=n(89655),c=n(39790),l=n(66457),d=n(99019),h=n(96858),f=n(4604),p=n(41344),v=n(51141),m=n(5269),k=n(12124),g=n(78008),b=n(12653),_=n(74264),y=n(48815),x=n(44129),A=function(){var e=(0,o.A)((0,a.A)().mark((function e(){var t,i;return(0,a.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,y.wb)(),i=[],!(0,v.Z)()){e.next=5;break}return e.next=5,Promise.all([n.e(17500),n.e(59699)]).then(n.bind(n,59699));case 5:if(!(0,k.Z)()){e.next=8;break}return e.next=8,Promise.all([n.e(97555),n.e(17500),n.e(70548)]).then(n.bind(n,70548));case 8:if((0,f.Z)(t)&&i.push(Promise.all([n.e(97555),n.e(43028)]).then(n.bind(n,43028)).then((function(){return(0,x.T)()}))),(0,p.Z6)(t)&&i.push(Promise.all([n.e(97555),n.e(24904)]).then(n.bind(n,24904))),(0,m.Z)(t)&&i.push(Promise.all([n.e(97555),n.e(70307)]).then(n.bind(n,70307))),(0,g.Z)(t)&&i.push(Promise.all([n.e(97555),n.e(56336)]).then(n.bind(n,56336))),(0,b.Z)(t)&&i.push(Promise.all([n.e(97555),n.e(50027)]).then(n.bind(n,50027)).then((function(){return n.e(99135).then(n.t.bind(n,99135,23))}))),(0,_.Z)(t)&&i.push(Promise.all([n.e(97555),n.e(36368)]).then(n.bind(n,36368))),0!==i.length){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,Promise.all(i).then((function(){return(0,x.K)(t)}));case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=28,A();case 28:i(),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(0),i(e.t0);case 34:case"end":return e.stop()}}),e,null,[[0,31]])})));return function(t,n){return e.apply(this,arguments)}}(),1)},30489:function(e,t,n){n.d(t,{R:function(){return i}});var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=document.createElement("a");n.target="_blank",n.href=e,n.download=t,document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click")),document.body.removeChild(n)}}}]);
//# sourceMappingURL=78066.wucONJjxEB8.js.map