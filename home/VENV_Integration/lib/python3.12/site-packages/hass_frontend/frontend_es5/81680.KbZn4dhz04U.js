"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[81680],{57115:function(e,t,i){i.d(t,{s:function(){return r}});i(36016),i(43037);var r=function(e){return e.normalize("NFD").replace(/[\u0300-\u036F]/g,"")}},15625:function(e,t,i){i.d(t,{S_:function(){return o},Xd:function(){return c},lZ:function(){return d}});i(82386),i(95737),i(10507),i(39790),i(74268),i(24545),i(51855),i(82130),i(31743),i(22328),i(4959),i(62435),i(99019),i(253),i(54846),i(66555),i(96858);var r=["zone","persistent_notification"],n=function(e,t){var i,r,n,a,s,o,c,d;if("call-service"===t.action&&(null!==(i=t.target)&&void 0!==i&&i.entity_id||null!==(r=t.service_data)&&void 0!==r&&r.entity_id||null!==(n=t.data)&&void 0!==n&&n.entity_id)){var l=null!==(a=null!==(s=null===(o=t.service_data)||void 0===o?void 0:o.entity_id)&&void 0!==s?s:null===(c=t.data)||void 0===c?void 0:c.entity_id)&&void 0!==a?a:null===(d=t.target)||void 0===d?void 0:d.entity_id;Array.isArray(l)||(l=[l]);for(var u=0,h=l;u<h.length;u++){var p=h[u];e.add(p)}}},a=function(e,t){"string"!=typeof t?(t.entity&&e.add(t.entity),t.camera_image&&e.add(t.camera_image),t.tap_action&&n(e,t.tap_action),t.hold_action&&n(e,t.hold_action)):e.add(t)},s=function(e,t){t.entity&&a(e,t.entity),t.entities&&Array.isArray(t.entities)&&t.entities.forEach((function(t){return a(e,t)})),t.card&&s(e,t.card),t.cards&&Array.isArray(t.cards)&&t.cards.forEach((function(t){return s(e,t)})),t.elements&&Array.isArray(t.elements)&&t.elements.forEach((function(t){return s(e,t)})),t.badges&&Array.isArray(t.badges)&&t.badges.forEach((function(t){return a(e,t)}))},o=function(e){var t=new Set;return e.views.forEach((function(e){return s(t,e)})),t},c=function(e,t){for(var i=new Set,n=0,a=Object.keys(e.states);n<a.length;n++){var s=a[n];t.has(s)||r.includes(s.split(".",1)[0])||i.add(s)}return i},d=function(e,t){var i=o(t);return c(e,i)}},81680:function(e,t,i){var r=i(22858).A,n=i(33994).A;i.a(e,function(){var e=r(n().mark((function e(t,r){var a,s,o,c,d,l,u,h,p,v,f,y,m,g,k,_,w,b,x,E,A,C,z,S,q,R,j,F,M,O,P,H,I,N,U,D,J,T,W,Z,L,X,B,Y,G,K,Q,V,$,ee,te,ie,re,ne,ae,se;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=i(33994),s=i(22858),o=i(41981),c=i(64599),d=i(35806),l=i(71008),u=i(62193),h=i(2816),p=i(27927),v=i(42942),f=i(48062),y=i(81027),m=i(13025),g=i(82386),k=i(97741),_=i(33231),w=i(50693),b=i(26098),x=i(39790),E=i(36016),A=i(36604),C=i(20529),z=i(253),S=i(2075),q=i(16891),R=i(94366),j=i(15112),F=i(29818),M=i(85323),O=i(63073),P=i(10296),H=i(94100),I=i(96979),N=i(34897),U=i(2682),D=i(57115),i(37629),i(72829),J=i(9883),T=i(33257),W=i(54629),Z=i(15625),L=i(54075),X=i(64390),B=i(30998),!(Y=t([L,X])).then){e.next=70;break}return e.next=66,Y;case 66:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=71;break;case 70:e.t0=Y;case 71:G=e.t0,L=G[0],X=G[1],(0,p.A)([(0,F.EM)("hui-card-picker")],(function(e,t){var i,r=function(t){function i(){var t;(0,l.A)(this,i);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=(0,u.A)(this,i,[].concat(n)),e(t),t}return(0,h.A)(i,t),(0,d.A)(i)}(t);return{F:r,d:[{kind:"field",decorators:[(0,F.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,F.MZ)({attribute:!1})],key:"suggestedCards",value:void 0},{kind:"field",decorators:[(0,I.I)({key:"dashboardCardClipboard",state:!0,subscribe:!0,storage:"sessionStorage"})],key:"_clipboard",value:void 0},{kind:"field",decorators:[(0,F.wk)()],key:"_cards",value:function(){return[]}},{kind:"field",key:"lovelace",value:void 0},{kind:"field",key:"cardPicked",value:void 0},{kind:"field",decorators:[(0,F.wk)()],key:"_filter",value:function(){return""}},{kind:"field",decorators:[(0,F.wk)()],key:"_width",value:void 0},{kind:"field",decorators:[(0,F.wk)()],key:"_height",value:void 0},{kind:"field",key:"_unusedEntities",value:void 0},{kind:"field",key:"_usedEntities",value:void 0},{kind:"field",key:"_filterCards",value:function(){return(0,H.A)((function(e,t){if(!t)return e;var i=e.map((function(e){return e.card})),r={keys:["type","name","description"],isCaseSensitive:!1,minMatchCharLength:Math.min(t.length,2),threshold:.2,getFn:W.i},n=new R.A(i,r);return i=n.search((0,D.s)(t)).map((function(e){return e.item})),e.filter((function(e){return i.includes(e.card)}))}))}},{kind:"field",key:"_suggestedCards",value:function(){return(0,H.A)((function(e){return e.filter((function(e){return e.card.isSuggested}))}))}},{kind:"field",key:"_customCards",value:function(){return(0,H.A)((function(e){return e.filter((function(e){return e.card.isCustom&&!e.card.isSuggested}))}))}},{kind:"field",key:"_otherCards",value:function(){return(0,H.A)((function(e){return e.filter((function(e){return!e.card.isSuggested&&!e.card.isCustom}))}))}},{kind:"method",key:"render",value:function(){if(!(this.hass&&this.lovelace&&this._unusedEntities&&this._usedEntities))return j.s6;var e=this._suggestedCards(this._cards),t=this._otherCards(this._cards),i=this._customCards(this._cards);return(0,j.qy)(K||(K=(0,c.A)([' <search-input .hass="','" .filter="','" @value-changed="','" .label="','"></search-input> <div id="content" style="','"> <div class="cards-container"> ',' </div> <div class="cards-container"> <div class="card manual" @click="','" .config="','"> <div class="card-header"> ',' </div> <div class="preview description"> '," </div> </div> </div> </div> "])),this.hass,this._filter,this._handleSearchChange,this.hass.localize("ui.panel.lovelace.editor.edit_card.search_cards"),(0,O.W)({width:this._width?"".concat(this._width,"px"):"auto",height:this._height?"".concat(this._height,"px"):"auto"}),this._filter?this._filterCards(this._cards,this._filter).map((function(e){return e.element})):(0,j.qy)(Q||(Q=(0,c.A)([" "," "," "," "," "," "," "," "])),e.length>0?(0,j.qy)(V||(V=(0,c.A)([' <div class="cards-container-header"> '," </div> "])),this.hass.localize("ui.panel.lovelace.editor.card.generic.suggested_cards")):j.s6,this._renderClipboardCard(),e.map((function(e){return e.element})),e.length>0?(0,j.qy)($||($=(0,c.A)([' <div class="cards-container-header"> '," </div> "])),this.hass.localize("ui.panel.lovelace.editor.card.generic.other_cards")):j.s6,t.map((function(e){return e.element})),i.length>0?(0,j.qy)(ee||(ee=(0,c.A)([' <div class="cards-container-header"> '," </div> "])),this.hass.localize("ui.panel.lovelace.editor.card.generic.custom_cards")):j.s6,i.map((function(e){return e.element}))),this._cardPicked,{type:""},this.hass.localize("ui.panel.lovelace.editor.card.generic.manual"),this.hass.localize("ui.panel.lovelace.editor.card.generic.manual_description"))}},{kind:"method",key:"shouldUpdate",value:function(e){var t=e.get("hass");return!t||t.locale!==this.hass.locale}},{kind:"method",key:"firstUpdated",value:function(){var e=this;if(this.hass&&this.lovelace){var t=(0,Z.S_)(this.lovelace),i=(0,Z.Xd)(this.hass,t);this._usedEntities=(0,o.A)(t).filter((function(t){return e.hass.states[t]&&!(0,J.g0)(e.hass.states[t].state)})),this._unusedEntities=(0,o.A)(i).filter((function(t){return e.hass.states[t]&&!(0,J.g0)(e.hass.states[t].state)})),this._loadCards()}}},{kind:"method",key:"_loadCards",value:function(){var e=this,t=B.j.map((function(t){var i;return Object.assign({name:e.hass.localize("ui.panel.lovelace.editor.card.".concat(t.type,".name")),description:e.hass.localize("ui.panel.lovelace.editor.card.".concat(t.type,".description")),isSuggested:(null===(i=e.suggestedCards)||void 0===i?void 0:i.includes(t.type))||!1},t)}));t=t.sort((function(t,i){var r;return t.isSuggested&&!i.isSuggested?-1:!t.isSuggested&&i.isSuggested?1:(0,U.x)(t.name||t.type,i.name||i.type,null===(r=e.hass)||void 0===r?void 0:r.language)})),T.J_.length>0&&(t=t.concat(T.J_.map((function(e){return{type:e.type,name:e.name,description:e.description,showElement:e.preview,isCustom:!0}})).sort((function(t,i){var r;return(0,U.x)(t.name||t.type,i.name||i.type,null===(r=e.hass)||void 0===r?void 0:r.language)})))),this._cards=t.map((function(t){return{card:t,element:(0,j.qy)(te||(te=(0,c.A)(["",""])),(0,P.T)(e._renderCardElement(t),(0,j.qy)(ie||(ie=(0,c.A)([' <div class="card spinner"> <ha-circular-progress indeterminate></ha-circular-progress> </div> '])))))}}))}},{kind:"method",key:"_renderClipboardCard",value:function(){return this._clipboard?(0,j.qy)(re||(re=(0,c.A)([" ",""])),(0,P.T)(this._renderCardElement({type:this._clipboard.type,showElement:!0,isCustom:!1,name:this.hass.localize("ui.panel.lovelace.editor.card.generic.paste"),description:"".concat(this.hass.localize("ui.panel.lovelace.editor.card.generic.paste_description",{type:this._clipboard.type}))},this._clipboard),(0,j.qy)(ne||(ne=(0,c.A)([' <div class="card spinner"> <ha-circular-progress indeterminate></ha-circular-progress> </div> ']))))):j.s6}},{kind:"method",key:"_handleSearchChange",value:function(e){var t=e.detail.value;if(t){if(!this._width||!this._height){var i=this.shadowRoot.getElementById("content");if(i&&!this._width){var r=i.clientWidth;r&&(this._width=r)}if(i&&!this._height){var n=i.clientHeight;n&&(this._height=n)}}}else this._width=void 0,this._height=void 0;this._filter=t}},{kind:"method",key:"_cardPicked",value:function(e){var t=e.currentTarget.config;(0,N.r)(this,"config-changed",{config:t})}},{kind:"method",key:"_tryCreateCardElement",value:function(e){var t=this,i=(0,L.MJ)(e);return i.hass=this.hass,i.addEventListener("ll-rebuild",(function(r){r.stopPropagation(),t._rebuildCard(i,e)}),{once:!0}),i}},{kind:"method",key:"_rebuildCard",value:function(e,t){var i;try{i=this._tryCreateCardElement(t)}catch(r){return}e.parentElement&&e.parentElement.replaceChild(i,e)}},{kind:"method",key:"_renderCardElement",value:(i=(0,s.A)((0,a.A)().mark((function e(t,i){var r,n,s,o,d,l,u,h;return(0,a.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.type,n=t.showElement,s=t.isCustom,o=t.name,d=t.description,l=s?(0,T.wi)(r):void 0,s&&(r="".concat(T.IP).concat(r)),h=null!=i?i:{type:r},!this.hass||!this.lovelace){e.next=11;break}if(i){e.next=10;break}return e.next=9,(0,X.N)(this.hass,r,this._unusedEntities,this._usedEntities);case 9:h=e.sent;case 10:if(n)try{u=this._tryCreateCardElement(h)}catch(a){u=void 0}case 11:return e.abrupt("return",(0,j.qy)(ae||(ae=(0,c.A)([' <div class="card"> <div class="overlay" @click="','" .config="','"></div> <div class="card-header"> ',' </div> <div class="preview ','"> '," </div> </div> "])),this._cardPicked,h,l?"".concat(this.hass.localize("ui.panel.lovelace.editor.cardpicker.custom_card"),": ").concat(l.name||l.type):o,(0,M.H)({description:!u||"HUI-ERROR-CARD"===u.tagName}),u&&"HUI-ERROR-CARD"!==u.tagName?u:l?l.description||this.hass.localize("ui.panel.lovelace.editor.cardpicker.no_description"):d));case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[(0,j.AH)(se||(se=(0,c.A)(["search-input{display:block;--mdc-shape-small:var(--card-picker-search-shape);margin:var(--card-picker-search-margin)}.cards-container-header{font-size:16px;font-weight:500;padding:12px 8px 4px 8px;margin:0;grid-column:1/-1}.cards-container{display:grid;grid-gap:8px 8px;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));margin-top:20px}.card{height:100%;max-width:500px;display:flex;flex-direction:column;border-radius:var(--ha-card-border-radius,12px);background:var(--primary-background-color,#fafafa);cursor:pointer;position:relative;overflow:hidden;border:var(--ha-card-border-width,1px) solid var(--ha-card-border-color,var(--divider-color))}.card-header{color:var(--ha-card-header-color,--primary-text-color);font-family:var(--ha-card-header-font-family, inherit);font-size:16px;font-weight:700;letter-spacing:-.012em;line-height:20px;padding:12px 16px;display:block;text-align:center;background:var(--ha-card-background,var(--card-background-color,#fff));border-bottom:1px solid var(--divider-color)}.preview{pointer-events:none;margin:20px;flex-grow:1;display:flex;align-items:center;justify-content:center}.preview>:first-child{zoom:0.6;display:block;width:100%}.description{text-align:center}.spinner{align-items:center;justify-content:center}.overlay{position:absolute;width:100%;height:100%;z-index:1;box-sizing:border-box;border-radius:var(--ha-card-border-radius,12px)}.manual{max-width:none;grid-column:1/-1}.icon{position:absolute;top:8px;right:8px inset-inline-start: 8px;inset-inline-end:8px;border-radius:50%;--mdc-icon-size:16px;line-height:16px;box-sizing:border-box;color:var(--text-primary-color);padding:4px}.icon.custom{background:var(--warning-color)}"])))]}}]}}),j.WF),r(),e.next=81;break;case 78:e.prev=78,e.t2=e.catch(0),r(e.t2);case 81:case"end":return e.stop()}}),e,null,[[0,78]])})));return function(t,i){return e.apply(this,arguments)}}())},64390:function(e,t,i){var r=i(22858).A,n=i(33994).A;i.a(e,function(){var e=r(n().mark((function e(r,a){var s,o,c,d,l,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i.d(t,{N:function(){return u}}),s=i(33994),o=i(22858),c=i(26098),d=i(54075),!(l=r([d])).then){e.next=15;break}return e.next=11,l;case 11:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=16;break;case 15:e.t0=l;case 16:d=e.t0[0],u=function(){var e=(0,o.A)((0,s.A)().mark((function e(t,i,r,n){var a,o,c;return(0,s.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={type:i},e.next=3,(0,d.dY)(i);case 3:if(!(o=e.sent)||!o.getStubConfig){e.next=9;break}return e.next=7,o.getStubConfig(t,r,n);case 7:c=e.sent,a=Object.assign(Object.assign({},a),c);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t,i,r,n){return e.apply(this,arguments)}}(),a(),e.next=24;break;case 21:e.prev=21,e.t2=e.catch(0),a(e.t2);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,i){return e.apply(this,arguments)}}())},30998:function(e,t,i){i.d(t,{j:function(){return r}});var r=[{type:"alarm-panel",showElement:!0},{type:"button",showElement:!0},{type:"calendar",showElement:!0},{type:"entities",showElement:!0},{type:"entity",showElement:!0},{type:"gauge",showElement:!0},{type:"glance",showElement:!0},{type:"history-graph",showElement:!0},{type:"statistics-graph",showElement:!1},{type:"statistic",showElement:!0},{type:"humidifier",showElement:!0},{type:"light",showElement:!0},{type:"map",showElement:!0},{type:"markdown",showElement:!0},{type:"media-control",showElement:!0},{type:"picture",showElement:!0},{type:"picture-elements",showElement:!0},{type:"picture-entity",showElement:!0},{type:"picture-glance",showElement:!0},{type:"plant-status",showElement:!0},{type:"sensor",showElement:!0},{type:"thermostat",showElement:!0},{type:"weather-forecast",showElement:!0},{type:"area",showElement:!0},{type:"tile",showElement:!0},{type:"conditional"},{type:"entity-filter"},{type:"grid"},{type:"horizontal-stack"},{type:"iframe"},{type:"logbook"},{type:"vertical-stack"},{type:"todo-list"},{type:"heading",showElement:!0}]},54629:function(e,t,i){i.d(t,{i:function(){return a}});i(97741),i(16891);var r=i(94366),n=i(57115),a=function(e,t){var i,a=r.A.config.getFn(e,t);return Array.isArray(a)?a.map((function(e){return(0,n.s)(null!=e?e:"")})):(0,n.s)(null!==(i=a)&&void 0!==i?i:"")}}}]);
//# sourceMappingURL=81680.KbZn4dhz04U.js.map