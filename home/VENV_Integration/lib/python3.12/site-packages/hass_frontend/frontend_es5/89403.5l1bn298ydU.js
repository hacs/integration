"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[89403],{31594:function(e,t,i){i.d(t,{m:function(){return G}});var n,r,o,s,a,u,l,d,c,h,f,g,v=i(64599),p=i(33994),m=i(22858),k=i(35806),_=i(71008),y=i(62193),E=i(2816),A=i(27927),b=i(35890),w=(i(81027),i(95737),i(79243),i(97741),i(26098),i(10507),i(39790),i(66457),i(99019),i(253),i(54846),i(16891),i(66555),i(96858),i(15112)),C=i(29818),x=i(73965),q=i(34897),M=i(94624),S=i(16569),U=(i(13292),i(37629),i(57641),i(28880)),I=(i(71499),i(50693),function(e){function t(e,i,n){var r;return(0,_.A)(this,t),(r=(0,y.A)(this,t,[e])).warnings=void 0,r.errors=void 0,r.name="GUISupportError",r.warnings=i,r.errors=n,r}return(0,E.A)(t,e),(0,k.A)(t)}((0,U.A)(Error))),G=(0,A.A)(null,(function(e,t){var A,U,G,P,z,T,W=function(t){function i(){var t;(0,_.A)(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=(0,y.A)(this,i,[].concat(r)),e(t),t}return(0,E.A)(i,t),(0,k.A)(i)}(t);return{F:W,d:[{kind:"field",decorators:[(0,C.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,C.MZ)({attribute:!1})],key:"lovelace",value:void 0},{kind:"field",decorators:[(0,C.MZ)({attribute:!1})],key:"context",value:void 0},{kind:"field",decorators:[(0,C.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,C.wk)()],key:"_configElement",value:void 0},{kind:"field",decorators:[(0,C.wk)()],key:"_subElementEditorConfig",value:void 0},{kind:"field",decorators:[(0,C.wk)()],key:"_guiMode",value:function(){return!0}},{kind:"field",decorators:[(0,C.wk)()],key:"_errors",value:void 0},{kind:"field",decorators:[(0,C.wk)()],key:"_warnings",value:void 0},{kind:"field",decorators:[(0,C.wk)()],key:"_guiSupported",value:void 0},{kind:"field",decorators:[(0,C.wk)()],key:"_loading",value:function(){return!1}},{kind:"field",decorators:[(0,C.P)("ha-yaml-editor")],key:"_yamlEditor",value:void 0},{kind:"get",key:"value",value:function(){return this._config}},{kind:"set",key:"value",value:function(e){this._config&&(0,S.b)(e,this._config)||(this._config=e,this._errors=void 0,this._setConfig())}},{kind:"method",key:"_setConfig",value:function(){var e=this;if(!this._errors)try{this._updateConfigElement()}catch(t){this._errors=[t.message]}this.updateComplete.then((function(){var t;(0,q.r)(e,"config-changed",{config:e.value,error:null===(t=e._errors)||void 0===t?void 0:t.join(", "),guiModeAvailable:!(e.hasWarning||e.hasError||!1===e._guiSupported)})}))}},{kind:"get",key:"hasWarning",value:function(){return void 0!==this._warnings&&this._warnings.length>0}},{kind:"get",key:"hasError",value:function(){return void 0!==this._errors&&this._errors.length>0}},{kind:"get",key:"GUImode",value:function(){return this._guiMode}},{kind:"set",key:"GUImode",value:function(e){var t=this;this._guiMode=e,this.updateComplete.then((function(){(0,q.r)(t,"GUImode-changed",{guiMode:e,guiModeAvailable:!(t.hasWarning||t.hasError||!1===t._guiSupported)})}))}},{kind:"method",key:"toggleMode",value:function(){this.GUImode=!this.GUImode}},{kind:"method",key:"focusYamlEditor",value:function(){var e;null!==(e=this._configElement)&&void 0!==e&&e.focusYamlEditor&&this._configElement.focusYamlEditor(),this._yamlEditor&&this._yamlEditor.focus()}},{kind:"method",key:"getConfigElement",value:(T=(0,m.A)((0,p.A)().mark((function e(){return(0,p.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)}))),function(){return T.apply(this,arguments)})},{kind:"method",key:"getConfigForm",value:(z=(0,m.A)((0,p.A)().mark((function e(){return(0,p.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)}))),function(){return z.apply(this,arguments)})},{kind:"method",key:"renderConfigElement",value:function(){return(0,w.qy)(n||(n=(0,v.A)(["",""])),this._configElement)}},{kind:"method",key:"_renderSubElement",value:function(){return(0,w.qy)(r||(r=(0,v.A)([' <hui-sub-element-editor .hass="','" .config="','" @go-back="','" @config-changed="','"> </hui-sub-element-editor> '])),this.hass,this._subElementEditorConfig,this._goBack,this._subElementChanged)}},{kind:"method",key:"_subElementChanged",value:function(e){var t,i;e.stopPropagation();var n=e.detail.config;this._subElementEditorConfig=Object.assign(Object.assign({},this._subElementEditorConfig),{},{elementConfig:n}),null===(t=(i=this._subElementEditorConfig).saveElementConfig)||void 0===t||t.call(i,n)}},{kind:"method",key:"_goBack",value:function(e){e.stopPropagation(),this._subElementEditorConfig=void 0}},{kind:"method",key:"_editSubElement",value:(P=(0,m.A)((0,p.A)().mark((function e(t){return(0,p.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.next=3,Promise.all([i.e(63893),i.e(23766),i.e(29654),i.e(31572),i.e(24500),i.e(81625),i.e(73767),i.e(17590),i.e(82371),i.e(12675),i.e(68236),i.e(16204),i.e(54083),i.e(24014),i.e(97243),i.e(54581),i.e(35212),i.e(17543),i.e(88557)]).then(i.bind(i,54581));case 3:this._subElementEditorConfig={type:t.detail.type,elementConfig:t.detail.config,context:t.detail.context,saveElementConfig:t.detail.saveConfig};case 4:case"end":return e.stop()}}),e,this)}))),function(e){return P.apply(this,arguments)})},{kind:"method",key:"render",value:function(){return(0,w.qy)(o||(o=(0,v.A)([' <div class="wrapper"> '," "," "," "," </div> "])),this.GUImode?(0,w.qy)(s||(s=(0,v.A)([' <div class="gui-editor" @edit-sub-element="','"> '," </div> "])),this._editSubElement,this._loading?(0,w.qy)(a||(a=(0,v.A)([' <ha-circular-progress indeterminate class="center margin-bot"></ha-circular-progress> ']))):(0,x.P)(this._subElementEditorConfig?this._renderSubElement():this.renderConfigElement())):(0,w.qy)(u||(u=(0,v.A)([' <div class="yaml-editor"> <ha-yaml-editor .defaultValue="','" autofocus .hass="','" @value-changed="','" @keydown="','" dir="ltr"></ha-yaml-editor> </div> '])),this._config,this.hass,this._handleYAMLChanged,this._ignoreKeydown),!1===this._guiSupported&&!1===this._loading?(0,w.qy)(l||(l=(0,v.A)([' <ha-alert alert-type="info" .title="','"> '," <br> "," </ha-alert> "])),this.hass.localize("ui.errors.config.visual_editor_not_supported"),this.hass.localize("ui.errors.config.visual_editor_not_supported_reason_type"),this.hass.localize("ui.errors.config.edit_in_yaml_supported")):w.s6,this.hasError?(0,w.qy)(d||(d=(0,v.A)([' <ha-alert alert-type="error" .title="','"> <ul> '," </ul> </ha-alert> "])),this.hass.localize("ui.errors.config.configuration_error"),this._errors.map((function(e){return(0,w.qy)(c||(c=(0,v.A)(["<li>","</li>"])),e)}))):w.s6,this.hasWarning?(0,w.qy)(h||(h=(0,v.A)([' <ha-alert alert-type="warning" .title="','"> <ul> '," </ul> "," </ha-alert> "])),this.hass.localize("ui.errors.config.visual_editor_not_supported"),this._warnings.map((function(e){return(0,w.qy)(f||(f=(0,v.A)(["<li>","</li>"])),e)})),this.hass.localize("ui.errors.config.edit_in_yaml_supported")):w.s6)}},{kind:"method",key:"updated",value:function(e){(0,b.A)(W,"updated",this,3)([e]),this._configElement&&e.has("hass")&&(this._configElement.hass=this.hass),this._configElement&&"lovelace"in this._configElement&&e.has("lovelace")&&(this._configElement.lovelace=this.lovelace),this._configElement&&e.has("context")&&(this._configElement.context=this.context)}},{kind:"method",key:"_handleUIConfigChanged",value:function(e){if(e.stopPropagation(),this.GUImode){var t=e.detail.config;Object.keys(t).forEach((function(e){void 0===t[e]&&delete t[e]})),this.value=t}}},{kind:"method",key:"_handleYAMLChanged",value:function(e){e.stopPropagation();var t=e.detail.value;e.detail.isValid&&(this._config=t,this._errors=void 0,this._setConfig())}},{kind:"method",key:"unloadConfigElement",value:(G=(0,m.A)((0,p.A)().mark((function e(){return(0,p.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._configElement=void 0,this._guiSupported=void 0;case 2:case"end":return e.stop()}}),e,this)}))),function(){return G.apply(this,arguments)})},{kind:"method",key:"loadConfigElement",value:(U=(0,m.A)((0,p.A)().mark((function e(){var t,n,r,o,s,a,u=this;return(0,p.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._configElement){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getConfigElement();case 4:if(t=e.sent){e.next=18;break}return e.next=8,this.getConfigForm();case 8:if(!(n=e.sent)){e.next=18;break}return e.next=12,i.e(98835).then(i.bind(i,98835));case 12:t=document.createElement("hui-form-editor"),r=n.schema,o=n.assertConfig,s=n.computeLabel,a=n.computeHelper,t.schema=r,s&&(t.computeLabel=s),a&&(t.computeHelper=a),o&&(t.assertConfig=o);case 18:t?(t.hass=this.hass,"lovelace"in t&&(t.lovelace=this.lovelace),t.context=this.context,t.addEventListener("config-changed",(function(e){return u._handleUIConfigChanged(e)})),this._guiSupported=!0):this._guiSupported=!1,this._configElement=t;case 20:case"end":return e.stop()}}),e,this)}))),function(){return U.apply(this,arguments)})},{kind:"method",key:"_updateConfigElement",value:(A=(0,m.A)((0,p.A)().mark((function e(){var t,i;return(0,p.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.value){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this._errors=void 0,this._warnings=void 0,e.next=7,this.loadConfigElement();case 7:if(!this._configElement){e.next=18;break}e.prev=8,this._configElement.setConfig(this.value),e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(8),t=(0,M._)(this.hass,e.t0),new I("Config is not supported",t.warnings,t.errors);case 16:e.next=20;break;case 18:this._guiSupported=!1,this.GUImode=!1;case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(2),e.t1 instanceof I?(this._warnings=null!==(i=e.t1.warnings)&&void 0!==i?i:[e.t1.message],this._errors=e.t1.errors||void 0):this._errors=[e.t1.message],this.GUImode=!1;case 26:return e.prev=26,this._loading=!1,e.finish(26);case 29:case"end":return e.stop()}}),e,this,[[2,22,26,29],[8,12]])}))),function(){return A.apply(this,arguments)})},{kind:"method",key:"_ignoreKeydown",value:function(e){e.stopPropagation()}},{kind:"get",static:!0,key:"styles",value:function(){return(0,w.AH)(g||(g=(0,v.A)([":host{display:flex}.wrapper{width:100%}.gui-editor,.yaml-editor{padding:8px 0px}ha-code-editor{--code-mirror-max-height:calc(100vh - 245px)}ha-circular-progress{display:block;margin:auto}"])))}}]}}),w.WF)},89403:function(e,t,i){i.d(t,{U:function(){return f}});var n=i(33994),r=i(22858),o=i(35806),s=i(71008),a=i(62193),u=i(2816),l=i(27927),d=i(35890),c=(i(71499),i(81027),i(29818)),h=i(31594),f=(0,l.A)(null,(function(e,t){var i,l=function(t){function i(){var t;(0,s.A)(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=(0,a.A)(this,i,[].concat(r)),e(t),t}return(0,u.A)(i,t),(0,o.A)(i)}(t);return{F:l,d:[{kind:"field",decorators:[(0,c.wk)()],key:"_configElementType",value:void 0},{kind:"get",key:"configElementType",value:function(){return this.value?this.value.type:void 0}},{kind:"method",key:"loadConfigElement",value:(i=(0,r.A)((0,n.A)().mark((function e(){return(0,n.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._configElementType===this.configElementType){e.next=5;break}if(this.unloadConfigElement(),this.configElementType){e.next=4;break}throw new Error(this.hass.localize("ui.errors.config.no_type_provided"));case 4:this._configElementType=this.configElementType;case 5:return e.abrupt("return",(0,d.A)(l,"loadConfigElement",this,3)([]));case 6:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})}]}}),h.m)},73965:function(e,t,i){i.d(t,{P:function(){return h}});var n=i(658),r=i(71008),o=i(35806),s=i(62193),a=i(2816),u=(i(95737),i(39790),i(99019),i(15129),i(96858),i(33192)),l=i(68063),d=i(32559),c=function(e){return(0,d.ps)(e)?e._$litType$.h:e.strings},h=(0,l.u$)(function(e){function t(e){var i;return(0,r.A)(this,t),(i=(0,s.A)(this,t,[e])).tt=new WeakMap,i}return(0,a.A)(t,e),(0,o.A)(t,[{key:"render",value:function(e){return[e]}},{key:"update",value:function(e,t){var i=(0,n.A)(t,1)[0],r=(0,d.qb)(this.et)?c(this.et):null,o=(0,d.qb)(i)?c(i):null;if(null!==r&&(null===o||r!==o)){var s=(0,d.cN)(e).pop(),a=this.tt.get(r);if(void 0===a){var l=document.createDocumentFragment();(a=(0,u.XX)(u.s6,l)).setConnected(!1),this.tt.set(r,a)}(0,d.mY)(a,[s]),(0,d.Dx)(a,void 0,s)}if(null!==o){if(null===r||r!==o){var h=this.tt.get(o);if(void 0!==h){var f=(0,d.cN)(h).pop();(0,d.Jz)(e),(0,d.Dx)(e,void 0,f),(0,d.mY)(e,[f])}}this.et=i}else this.et=void 0;return this.render(i)}}])}(l.WL))}}]);
//# sourceMappingURL=89403.5l1bn298ydU.js.map