"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[97960],{46999:function(t,e,n){n.d(e,{Vy:function(){return o},fI:function(){return s}});var i=n(3254),r=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#9498a0","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#74787f","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#b6bac2","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function o(t){return r[t%r.length]}function s(t,e){var n=e.getPropertyValue("--graph-color-".concat(t+1))||o(t);return(0,i.RQ)(n)}},64741:function(t,e,n){var i=n(22858).A,r=n(33994).A;n.a(t,function(){var t=i(r().mark((function t(i,o){var s,a,c,u,l,d,f,h,_,v,m,g,b,y,p,k,w,A;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.r(e),n.d(e,{computeStateDisplay:function(){return w},computeStateDisplayFromEntityAttributes:function(){return A}}),s=n(81027),a=n(82386),c=n(79243),u=n(26098),l=n(36604),d=n(9883),f=n(45269),h=n(9449),_=n(57289),v=n(8581),m=n(41924),g=n(57636),b=n(40863),y=n(213),!(p=i([_,v,m,g])).then){t.next=30;break}return t.next=26,p;case 26:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=31;break;case 30:t.t0=p;case 31:k=t.t0,_=k[0],v=k[1],m=k[2],g=k[3],w=function(t,e,n,i,r,o,s){var a=null==o?void 0:o[e.entity_id];return A(t,n,i,r,a,e.entity_id,e.attributes,void 0!==s?s:e.state)},A=function(t,e,n,i,r,o,s,a){if(a===d.HV||a===d.Hh)return t("state.default.".concat(a));var c=(0,y.m)(o);if((0,g.ty)(s,"sensor"===c?n:[])){if("duration"===s.device_class&&s.unit_of_measurement&&h.Z[s.unit_of_measurement])try{return(0,h.a)(a,s.unit_of_measurement)}catch(A){}if("monetary"===s.device_class)try{return(0,g.ZV)(a,e,Object.assign({style:"currency",currency:s.unit_of_measurement,minimumFractionDigits:2},(0,g.ZQ)({state:a,attributes:s},r)))}catch(A){}var u=(0,g.ZV)(a,e,(0,g.ZQ)({state:a,attributes:s},r)),l=s.unit_of_measurement;return l?"".concat(u).concat((0,b.A)(l,e)).concat(l):u}if("datetime"===c){var p=new Date(a);return(0,v.r6)(p,e,i)}if(["date","input_datetime","time"].includes(c))try{var k=a.split(" ");if(2===k.length)return(0,v.r6)(new Date(k.join("T")),Object.assign(Object.assign({},e),{},{time_zone:f.Wj.local}),i);if(1===k.length){if(a.includes("-"))return(0,_.Yq)(new Date("".concat(a,"T00:00")),Object.assign(Object.assign({},e),{},{time_zone:f.Wj.local}),i);if(a.includes(":")){var w=new Date;return(0,m.fU)(new Date("".concat(w.toISOString().split("T")[0],"T").concat(a)),Object.assign(Object.assign({},e),{},{time_zone:f.Wj.local}),i)}}return a}catch(H){return a}if("counter"===c||"number"===c||"input_number"===c)return(0,g.ZV)(a,e,(0,g.ZQ)({state:a,attributes:s},r));if(["button","conversation","event","image","input_button","notify","scene","stt","tag","tts","wake_word"].includes(c)||"sensor"===c&&"timestamp"===s.device_class)try{return(0,v.r6)(new Date(a),e,i)}catch(A){return a}return(null==r?void 0:r.translation_key)&&t("component.".concat(r.platform,".entity.").concat(c,".").concat(r.translation_key,".state.").concat(a))||s.device_class&&t("component.".concat(c,".entity_component.").concat(s.device_class,".state.").concat(a))||t("component.".concat(c,".entity_component._.state.").concat(a))||a},o(),t.next=44;break;case 41:t.prev=41,t.t2=t.catch(0),o(t.t2);case 44:case"end":return t.stop()}}),t,null,[[0,41]])})));return function(e,n){return t.apply(this,arguments)}}())},77226:function(t,e,n){n.d(e,{A:function(){return r}});n(71499),n(28552),n(36016),n(55228),n(43037);var i=function(t){var e=parseFloat(t);if(isNaN(e))throw new Error("".concat(t," is not a number"));return e};function r(t){if(!t)return null;try{if(t.endsWith("%"))return{w:100,h:i(t.substr(0,t.length-1))};var e=t.replace(":","x").split("x");return 0===e.length?null:1===e.length?{w:i(e[0]),h:1}:{w:i(e[0]),h:i(e[1])}}catch(n){}return null}},11630:function(t,e,n){var i=n(22858).A,r=n(33994).A;n.a(t,function(){var t=i(r().mark((function t(i,o){var s,a,c,u,l,d,f,h,_,v,m,g,b,y,p,k,w,A,H,E,x,O,M,j,S,D,V,z,C,T,F,Z,I,P,U,N,Q,W,B,q,L,R,Y,J,G,K,X,$,tt,et,nt,it,rt,ot,st;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.d(e,{IQ:function(){return K},Jo:function(){return J},Mm:function(){return ot},qc:function(){return st}}),s=n(41981),a=n(64782),c=n(71008),u=n(35806),l=n(81027),d=n(13025),f=n(44124),h=n(82386),_=n(95737),v=n(79243),m=n(97741),g=n(89655),b=n(33231),y=n(54774),p=n(26098),k=n(10507),w=n(39790),A=n(74268),H=n(24545),E=n(51855),x=n(82130),O=n(31743),M=n(22328),j=n(4959),S=n(62435),D=n(36604),V=n(99019),z=n(253),C=n(2075),T=n(94438),F=n(54846),Z=n(16891),I=n(4525),P=n(66555),U=n(96858),N=n(213),Q=n(64741),W=n(19244),!(B=i([Q])).then){t.next=79;break}return t.next=75,B;case 75:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=80;break;case 79:t.t0=B;case 80:Q=t.t0[0],q=["climate","humidifier","water_heater"],L=["climate","humidifier","input_datetime","thermostat","water_heater","person","device_tracker"],R=["temperature","current_temperature","target_temp_low","target_temp_high","hvac_action","humidity","mode","action","current_humidity"],Y=function(t,e){return!t.states[e]||L.includes((0,N.m)(e))},J=function(t,e,n,i,r){var o={type:"history/stream",entity_ids:r,start_time:n.toISOString(),end_time:i.toISOString(),minimal_response:!0,no_attributes:!r.some((function(e){return Y(t,e)}))},s=new G(t);return t.connection.subscribeMessage((function(t){return e(s.processMessage(t))}),o)},G=function(){return(0,u.A)((function t(e,n){(0,c.A)(this,t),this.hass=void 0,this.hoursToShow=void 0,this.combinedHistory=void 0,this.hass=e,this.hoursToShow=n,this.combinedHistory={}}),[{key:"processMessage",value:function(t){if(!this.combinedHistory||!Object.keys(this.combinedHistory).length)return this.combinedHistory=t.states,this.combinedHistory;if(!Object.keys(t.states).length)return this.combinedHistory;for(var e=this.hoursToShow?((new Date).getTime()-3600*this.hoursToShow*1e3)/1e3:void 0,n={},i=0,r=Object.keys(this.combinedHistory);i<r.length;i++){n[r[i]]=[]}for(var o=0,s=Object.keys(t.states);o<s.length;o++){n[s[o]]=[]}for(var a=0,c=Object.keys(n);a<c.length;a++){var u=c[a];if(u in this.combinedHistory&&u in t.states){var l=this.combinedHistory[u],d=l[l.length-1];n[u]=l.concat(t.states[u]),t.states[u][0].lu<d.lu&&(n[u]=n[u].sort((function(t,e){return t.lu-e.lu})))}else u in this.combinedHistory?n[u]=this.combinedHistory[u]:n[u]=t.states[u];if(e&&u in this.combinedHistory){var f=n[u].filter((function(t){return t.lu<e}));if(!f.length)continue;if(n[u]=n[u].filter((function(t){return t.lu>=e})),n[u].length&&n[u][0].lu===e)continue;var h=f[f.length-1];h.lu=e,n[u].unshift(h)}}return this.combinedHistory=n,this.combinedHistory}}])}(),K=function(t,e,n,i){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6?arguments[6]:void 0,a={type:"history/stream",entity_ids:i,start_time:new Date((new Date).getTime()-3600*n*1e3).toISOString(),minimal_response:r,significant_changes_only:o,no_attributes:null!=s?s:!i.some((function(e){return Y(t,e)}))},c=new G(t,n);return t.connection.subscribeMessage((function(t){return e(c.processMessage(t))}),a)},X=function(t,e){return t.state===e.state&&(!t.attributes||!e.attributes||R.every((function(n){return t.attributes[n]===e.attributes[n]})))},$=function(t,e,n,i,r,o,s){var c,u=[],l=o[0],d=(0,a.A)(o);try{for(d.s();!(c=d.n()).done;){var f=c.value;if(!(u.length>0&&f.s===u[u.length-1].state)){var h={};null!=s&&s.attributes.device_class&&(h.device_class=null==s?void 0:s.attributes.device_class),u.push({state_localize:(0,Q.computeStateDisplayFromEntityAttributes)(t,e,[],n,i[r],r,Object.assign(Object.assign({},f.a||l.a),h),f.s),state:f.s,last_changed:1e3*(f.lc?f.lc:f.lu)})}}}catch(_){d.e(_)}finally{d.f()}return{name:(0,W._)(r,(null==s?void 0:s.attributes)||l.a),entity_id:r,data:u}},tt=function(t,e,n,i){var r=[];return Object.keys(n).forEach((function(t){var e,o=n[t],s=o[0],c=(0,N.m)(t),u=[],l=(0,a.A)(o);try{for(l.s();!(e=l.n()).done;){var d=e.value,f=void 0;if(q.includes(c)){f={state:d.s,last_changed:1e3*d.lu,attributes:{}};for(var h=0,_=R;h<_.length;h++){var v=_[h];v in d.a&&(f.attributes[v]=d.a[v])}}else f={state:d.s,last_changed:1e3*(d.lc?d.lc:d.lu),attributes:{}};u.length>1&&X(f,u[u.length-1])&&X(f,u[u.length-2])||u.push(f)}}catch(g){l.e(g)}finally{l.f()}var m=t in i?i[t].attributes:"friendly_name"in s.a?s.a:void 0;r.push({domain:c,name:(0,W._)(t,m||{}),entity_id:t,states:u})})),{unit:t,device_class:e,identifier:Object.keys(n).join(""),data:r}},et=["counter","input_number","number"],nt=function(t){return et.includes(t)},it=function(t){return"unit_of_measurement"in t||"state_class"in t},rt=function(t,e){return null!=t.attributes.device_class&&e.includes(t.attributes.device_class)},ot=function(t,e,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c={},u=[],l={};return new Set([].concat((0,s.A)(n),(0,s.A)(Object.keys(e)))).forEach((function(n){n in e?l[n]=e[n]:t.states[n]&&(l[n]=[{s:t.states[n].state,a:t.states[n].attributes,lu:new Date(t.states[n].last_updated).getTime()/1e3}])})),l?(Object.keys(l).forEach((function(e){var n,d=l[e];if(0!==d.length){var f,h=(0,N.m)(e),_=e in t.states?t.states[e]:void 0,v=_||nt(h)?void 0:d.find((function(t){return t.a&&it(t.a)}));f=a||nt(h)||null!=_&&it(_.attributes)||null!=_&&"sensor"===h&&rt(_,r)||null!=v?(null==_?void 0:_.attributes.unit_of_measurement)||(null==v?void 0:v.a.unit_of_measurement)||" ":{zone:i("ui.dialogs.more_info_control.zone.graph_unit"),climate:t.config.unit_system.temperature,humidifier:"%",water_heater:t.config.unit_system.temperature}[h];var m={climate:"temperature",humidifier:"humidity",water_heater:"temperature"}[h]||(null===(n=(null==_?void 0:_.attributes)||(null==v?void 0:v.a))||void 0===n?void 0:n.device_class),g=st(f,m,o);if(f)if(g&&g in c&&e in c[g]){var b;(b=c[g][e]).push.apply(b,(0,s.A)(d))}else g&&(g in c||(c[g]={}),c[g][e]=d);else u.push($(i,t.locale,t.config,t.entities,e,d,_))}})),{line:Object.keys(c).map((function(e){var n=e.split("_"),i=n[0],r=n[1]||void 0;return tt(i,r,c[e],t.states)})),timeline:u}):{line:[],timeline:[]}},st=function(t,e,n){return n?"".concat(t,"_").concat(e||""):t},o(),t.next=105;break;case 102:t.prev=102,t.t2=t.catch(0),o(t.t2);case 105:case"end":return t.stop()}}),t,null,[[0,102]])})));return function(e,n){return t.apply(this,arguments)}}())},29399:function(t,e,n){var i=n(22858).A,r=n(33994).A;n.a(t,function(){var t=i(r().mark((function t(i,o){var s,a,c,u,l,d,f,h,_,v,m,g,b,y,p,k,w,A,H,E,x,O,M,j,S,D,V,z,C,T,F,Z,I,P,U,N,Q,W,B,q,L,R,Y,J,G,K,X,$,tt,et,nt,it;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.r(e),n.d(e,{DEFAULT_HOURS_TO_SHOW:function(){return nt},DEFAULT_ZOOM:function(){return it}}),s=n(64782),a=n(41981),c=n(64599),u=n(33994),l=n(22858),d=n(35806),f=n(71008),h=n(62193),_=n(2816),v=n(27927),m=n(35890),g=n(71499),b=n(81027),y=n(44124),p=n(82386),k=n(95737),w=n(97741),A=n(89655),H=n(50693),E=n(29193),x=n(82115),O=n(10507),M=n(39790),j=n(9241),S=n(66457),D=n(36604),V=n(99019),z=n(253),C=n(94438),T=n(16891),F=n(96858),Z=n(15112),I=n(29818),P=n(94100),U=n(46999),N=n(33922),Q=n(213),W=n(19244),B=n(16569),q=n(77226),n(13082),n(13292),n(28066),L=n(4712),R=n(11630),Y=n(7934),J=n(18102),G=n(62241),!(K=i([L,R])).then){t.next=79;break}return t.next=75,K;case 75:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=80;break;case 79:t.t0=K;case 80:X=t.t0,L=X[0],R=X[1],nt=0,it=14,(0,v.A)([(0,I.EM)("hui-map-card")],(function(t,e){var i,r=function(e){function n(){var e;(0,f.A)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=(0,h.A)(this,n,[].concat(r)),t(e),e}return(0,_.A)(n,e),(0,d.A)(n)}(e);return{F:r,d:[{kind:"field",decorators:[(0,I.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,I.MZ)({attribute:!1})],key:"layout",value:void 0},{kind:"field",decorators:[(0,I.wk)()],key:"_stateHistory",value:void 0},{kind:"field",decorators:[(0,I.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,I.P)("ha-map")],key:"_map",value:void 0},{kind:"field",key:"_configEntities",value:void 0},{kind:"field",decorators:[(0,I.wk)()],key:"_mapEntities",value:function(){return[]}},{kind:"field",key:"_colorDict",value:function(){return{}}},{kind:"field",key:"_colorIndex",value:function(){return 0}},{kind:"field",decorators:[(0,I.wk)()],key:"_error",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"method",key:"setConfig",value:function(t){var e;if(!t)throw new Error("Error in card configuration.");if(!(null!==(e=t.entities)&&void 0!==e&&e.length||t.geo_location_sources))throw new Error("Either entities or geo_location_sources must be specified");if(t.entities&&!Array.isArray(t.entities))throw new Error("Entities need to be an array");if(t.geo_location_sources&&!Array.isArray(t.geo_location_sources))throw new Error("Parameter geo_location_sources needs to be an array");this._config=t,this._configEntities=t.entities?(0,G.L)(t.entities):[],this._mapEntities=this._getMapEntities()}},{kind:"method",key:"getCardSize",value:function(){var t;if(null===(t=this._config)||void 0===t||!t.aspect_ratio)return 7;var e=(0,q.A)(this._config.aspect_ratio),n=e&&e.w>0&&e.h>0?"".concat((100*e.h/e.w).toFixed(2)):"100";return 1+Math.floor(Number(n)/25)||3}},{kind:"method",static:!0,key:"getConfigElement",value:(i=(0,l.A)((0,u.A)().mark((function t(){return(0,u.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.e(94131),n.e(40319),n.e(7726),n.e(55792),n.e(94548),n.e(33644),n.e(57396)]).then(n.bind(n,57396));case 2:return t.abrupt("return",document.createElement("hui-map-card-editor"));case 3:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{kind:"method",static:!0,key:"getStubConfig",value:function(t,e,n){return{type:"map",entities:(0,J.B)(t,2,e,n,["device_tracker"]),theme_mode:"auto"}}},{kind:"method",key:"render",value:function(){var t;if(!this._config)return Z.s6;if(this._error)return(0,Z.qy)($||($=(0,c.A)(['<ha-alert alert-type="error"> ',": "," (",") </ha-alert>"])),this.hass.localize("ui.components.map.error"),this._error.message,this._error.code);var e=!(!this._config.dark_mode&&"dark"!==this._config.theme_mode)||"light"!==this._config.theme_mode&&this.hass.themes.darkMode,n=this._config.theme_mode||(this._config.dark_mode?"dark":"auto");return(0,Z.qy)(tt||(tt=(0,c.A)([' <ha-card id="card" .header="','"> <div id="root"> <ha-map .hass="','" .entities="','" .zoom="','" .paths="','" .autoFit="','" .fitZones="','" .themeMode="','" interactiveZones renderPassive></ha-map> <ha-icon-button .label="','" .path="','" style="','" @click="','" tabindex="0"></ha-icon-button> </div> </ha-card> '])),this._config.title,this.hass,this._mapEntities,null!==(t=this._config.default_zoom)&&void 0!==t?t:it,this._getHistoryPaths(this._config,this._stateHistory),this._config.auto_fit||!1,this._config.fit_zones,n,this.hass.localize("ui.panel.lovelace.cards.map.reset_focus"),"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M19,19H15V21H19A2,2 0 0,0 21,19V15H19M19,3H15V5H19V9H21V5A2,2 0 0,0 19,3M5,5H9V3H5A2,2 0 0,0 3,5V9H5M5,15H3V19A2,2 0 0,0 5,21H9V19H5V15Z",e?"color:#ffffff":"color:#000000",this._fitMap)}},{kind:"method",key:"shouldUpdate",value:function(t){var e,n;if(!t.has("hass")||t.size>1)return!0;var i=t.get("hass");return!i||!this._configEntities||(i.themes.darkMode!==this.hass.themes.darkMode||(!!t.has("_stateHistory")||(!(null===(e=this._config)||void 0===e||!e.geo_location_sources||i.states===this.hass.states)||(null!==(n=this._config)&&void 0!==n&&n.entities?(0,Y.pY)(this,t):(0,Y.xP)(this,t)))))}},{kind:"method",key:"willUpdate",value:function(t){var e,n;(0,m.A)(r,"willUpdate",this,3)([t]),t.has("hass")&&null!==(e=this._config)&&void 0!==e&&e.geo_location_sources&&!(0,B.b)(this._getSourceEntities(null===(n=t.get("hass"))||void 0===n?void 0:n.states),this._getSourceEntities(this.hass.states))&&(this._mapEntities=this._getMapEntities())}},{kind:"method",key:"connectedCallback",value:function(){var t;(0,m.A)(r,"connectedCallback",this,3)([]),this.hasUpdated&&null!==(t=this._configEntities)&&void 0!==t&&t.length&&this._subscribeHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,m.A)(r,"disconnectedCallback",this,3)([]),this._unsubscribeHistory()}},{kind:"method",key:"_subscribeHistory",value:function(){var t,e,n,i=this;(0,N.x)(this.hass,"history")&&!this._subscribed&&(null!==(t=null===(e=this._config)||void 0===e?void 0:e.hours_to_show)&&void 0!==t?t:nt)&&(this._subscribed=(0,R.IQ)(this.hass,(function(t){i._subscribed&&(i._stateHistory=t)}),null!==(n=this._config.hours_to_show)&&void 0!==n?n:nt,(this._configEntities||[]).map((function(t){return t.entity})),!1,!1,!1).catch((function(t){i._subscribed=void 0,i._error=t})))}},{kind:"method",key:"_unsubscribeHistory",value:function(){this._subscribed&&(this._subscribed.then((function(t){return null==t?void 0:t()})),this._subscribed=void 0)}},{kind:"method",key:"updated",value:function(t){var e;null!==(e=this._configEntities)&&void 0!==e&&e.length?this._subscribed&&!t.has("_config")||(this._unsubscribeHistory(),this._subscribeHistory()):this._unsubscribeHistory(),t.has("_config")&&this._computePadding()}},{kind:"method",key:"_computePadding",value:function(){var t=this.shadowRoot.getElementById("root"),e="panel"===this.layout||"grid"===this.layout;if(this._config&&!e&&t)if(this._config.aspect_ratio){t.style.height="auto";var n=(0,q.A)(this._config.aspect_ratio);t.style.paddingBottom=n&&n.w>0&&n.h>0?"".concat((100*n.h/n.w).toFixed(2),"%"):t.style.paddingBottom="100%"}else t.style.paddingBottom="100%"}},{kind:"method",key:"_fitMap",value:function(){var t;null===(t=this._map)||void 0===t||t.fitMap()}},{kind:"method",key:"_getColor",value:function(t){var e=this._colorDict[t];return e||(e=(0,U.Vy)(this._colorIndex),this._colorIndex++,this._colorDict[t]=e,e)}},{kind:"method",key:"_getSourceEntities",value:function(t){var e;if(!t||null===(e=this._config)||void 0===e||!e.geo_location_sources)return[];for(var n=[],i=this._config.geo_location_sources.includes("all"),r=0,o=Object.values(t);r<o.length;r++){var s=o[r];"geo_location"===(0,Q.m)(s.entity_id)&&(i||this._config.geo_location_sources.includes(s.attributes.source))&&n.push(s.entity_id)}return n}},{kind:"method",key:"_getMapEntities",value:function(){var t,e=this;return[].concat((0,a.A)((this._configEntities||[]).map((function(t){return{entity_id:t.entity,color:e._getColor(t.entity),label_mode:t.label_mode,focus:t.focus,name:t.name}}))),(0,a.A)(this._getSourceEntities(null===(t=this.hass)||void 0===t?void 0:t.states).map((function(t){return{entity_id:t,color:e._getColor(t)}}))))}},{kind:"field",key:"_getHistoryPaths",value:function(){var t=this;return(0,P.A)((function(e,n){var i;if(n&&(null!==(i=e.hours_to_show)&&void 0!==i?i:nt)){for(var r=[],o=function(){var i,o,u,l=c[a];if("zone"===(0,Q.m)(l))return 0;var d=n[l];if(null==d||!d.length)return 0;var f,h=[],_=(0,s.A)(d);try{for(_.s();!(f=_.n()).done;){var v=f.value,m=v.a.latitude,g=v.a.longitude;if(m&&g){var b={};b.point=[m,g],b.timestamp=new Date(1e3*v.lu),h.push(b)}}}catch(k){_.e(k)}finally{_.f()}var y=null===(i=t._configEntities)||void 0===i?void 0:i.find((function(t){return t.entity===l})),p=null!==(o=null==y?void 0:y.name)&&void 0!==o?o:l in t.hass.states?(0,W.u)(t.hass.states[l]):l;r.push({points:h,name:p,fullDatetime:(null!==(u=e.hours_to_show)&&void 0!==u?u:nt)>144,color:t._getColor(l),gradualOpacity:.8})},a=0,c=Object.keys(n);a<c.length;a++)o();return r}}))}},{kind:"method",key:"getLayoutOptions",value:function(){return{grid_columns:"full",grid_rows:4,grid_min_columns:2,grid_min_rows:2}}},{kind:"get",static:!0,key:"styles",value:function(){return(0,Z.AH)(et||(et=(0,c.A)(["ha-card{overflow:hidden;width:100%;height:100%;display:flex;flex-direction:column}ha-map{z-index:0;border:none;position:absolute;top:0;left:0;width:100%;height:100%;background:inherit}ha-icon-button{position:absolute;top:75px;left:3px;outline:0}#root{position:relative;height:100%}"])))}}]}}),Z.WF),o(),t.next=93;break;case 90:t.prev=90,t.t2=t.catch(0),o(t.t2);case 93:case"end":return t.stop()}}),t,null,[[0,90]])})));return function(e,n){return t.apply(this,arguments)}}())},82115:function(t,e,n){var i=n(41765),r=n(13113),o=n(33616),s=n(64849),a=n(90924),c=n(26906),u=RangeError,l=String,d=Math.floor,f=r(a),h=r("".slice),_=r(1..toFixed),v=function(t,e,n){return 0===e?n:e%2==1?v(t,e-1,n*t):v(t*t,e/2,n)},m=function(t,e,n){for(var i=-1,r=n;++i<6;)r+=e*t[i],t[i]=r%1e7,r=d(r/1e7)},g=function(t,e){for(var n=6,i=0;--n>=0;)i+=t[n],t[n]=d(i/e),i=i%e*1e7},b=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var i=l(t[e]);n=""===n?i:n+f("0",7-i.length)+i}return n};i({target:"Number",proto:!0,forced:c((function(){return"0.000"!==_(8e-5,3)||"1"!==_(.9,0)||"1.25"!==_(1.255,2)||"1000000000000000128"!==_(0xde0b6b3a7640080,0)}))||!c((function(){_({})}))},{toFixed:function(t){var e,n,i,r,a=s(this),c=o(t),d=[0,0,0,0,0,0],_="",y="0";if(c<0||c>20)throw new u("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return l(a);if(a<0&&(_="-",a=-a),a>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(a*v(2,69,1))-69)<0?a*v(2,-e,1):a/v(2,e,1),n*=4503599627370496,(e=52-e)>0){for(m(d,0,n),i=c;i>=7;)m(d,1e7,0),i-=7;for(m(d,v(10,i,1),0),i=e-1;i>=23;)g(d,1<<23),i-=23;g(d,1<<i),m(d,1,1),g(d,2),y=b(d)}else m(d,0,n),m(d,1<<-e,0),y=b(d)+f("0",c);return y=c>0?_+((r=y.length)<=c?"0."+f("0",c-r)+y:h(y,0,r-c)+"."+h(y,r-c)):_+y}})},78276:function(t,e,n){n.d(e,{A:function(){return r}});var i=n(76270);function r(t){return(0,i.w)(t,Date.now())}},78635:function(t,e,n){n.d(e,{r:function(){return s}});var i=n(658),r=n(52142),o=n(23566);function s(t,e,n){var s=(0,r.x)(null==n?void 0:n.in,t,e),a=(0,i.A)(s,2),c=a[0],u=a[1];return+(0,o.o)(c)==+(0,o.o)(u)}},28514:function(t,e,n){n.d(e,{c:function(){return s}});var i=n(76270),r=n(78276),o=n(78635);function s(t,e){return(0,o.r)((0,i.w)((null==e?void 0:e.in)||t,t),(0,r.A)((null==e?void 0:e.in)||t))}}}]);
//# sourceMappingURL=97960.j-MeuFUZ-34.js.map